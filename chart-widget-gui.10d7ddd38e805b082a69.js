(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5093,51030],{411985:e=>{e.exports={pills:"pills-PVWoXu5j",primary:"primary-PVWoXu5j",gray:"gray-PVWoXu5j",selected:"selected-PVWoXu5j",grouped:"grouped-PVWoXu5j",active:"active-PVWoXu5j",disableActiveOnTouch:"disableActiveOnTouch-PVWoXu5j",disableActiveStateStyles:"disableActiveStateStyles-PVWoXu5j",withGrouped:"withGrouped-PVWoXu5j","quiet-primary":"quiet-primary-PVWoXu5j",green:"green-PVWoXu5j",red:"red-PVWoXu5j",blue:"blue-PVWoXu5j",secondary:"secondary-PVWoXu5j",ghost:"ghost-PVWoXu5j"}},778457:e=>{e.exports={lightButton:"lightButton-bYDQcOkp",link:"link-bYDQcOkp",ltr:"ltr-bYDQcOkp",rtl:"rtl-bYDQcOkp","typography-regular16px":"typography-regular16px-bYDQcOkp","typography-medium16px":"typography-medium16px-bYDQcOkp","typography-regular14px":"typography-regular14px-bYDQcOkp","typography-semibold14px":"typography-semibold14px-bYDQcOkp","typography-semibold16px":"typography-semibold16px-bYDQcOkp",content:"content-bYDQcOkp",visuallyHidden:"visuallyHidden-bYDQcOkp",nowrap:"nowrap-bYDQcOkp",ellipsisContainer:"ellipsisContainer-bYDQcOkp",textWrapContainer:"textWrapContainer-bYDQcOkp",textWrapWithEllipsis:"textWrapWithEllipsis-bYDQcOkp",slot:"slot-bYDQcOkp",caret:"caret-bYDQcOkp",activeCaret:"activeCaret-bYDQcOkp",xsmall:"xsmall-bYDQcOkp",withStartSlot:"withStartSlot-bYDQcOkp",withEndSlot:"withEndSlot-bYDQcOkp",noContent:"noContent-bYDQcOkp",wrap:"wrap-bYDQcOkp",small:"small-bYDQcOkp",medium:"medium-bYDQcOkp"}},138672:e=>{e.exports={"nav-button":"nav-button-znwuaSC1",link:"link-znwuaSC1",background:"background-znwuaSC1",icon:"icon-znwuaSC1","flip-icon":"flip-icon-znwuaSC1","size-large":"size-large-znwuaSC1","preserve-paddings":"preserve-paddings-znwuaSC1","size-medium":"size-medium-znwuaSC1","size-small":"size-small-znwuaSC1","size-xsmall":"size-xsmall-znwuaSC1","size-xxsmall":"size-xxsmall-znwuaSC1","visually-hidden":"visually-hidden-znwuaSC1"}},370168:e=>{e.exports={button:"button-D4RPB3ZC",iconOnly:"iconOnly-D4RPB3ZC",withStartSlot:"withStartSlot-D4RPB3ZC",withEndSlot:"withEndSlot-D4RPB3ZC",startSlotWrap:"startSlotWrap-D4RPB3ZC",endSlotWrap:"endSlotWrap-D4RPB3ZC",xsmall:"xsmall-D4RPB3ZC",small:"small-D4RPB3ZC",medium:"medium-D4RPB3ZC",large:"large-D4RPB3ZC",xlarge:"xlarge-D4RPB3ZC",content:"content-D4RPB3ZC",link:"link-D4RPB3ZC",blue:"blue-D4RPB3ZC",primary:"primary-D4RPB3ZC",secondary:"secondary-D4RPB3ZC",gray:"gray-D4RPB3ZC",green:"green-D4RPB3ZC",red:"red-D4RPB3ZC",black:"black-D4RPB3ZC",slot:"slot-D4RPB3ZC",stretch:"stretch-D4RPB3ZC",grouped:"grouped-D4RPB3ZC",adjustPosition:"adjustPosition-D4RPB3ZC",firstRow:"firstRow-D4RPB3ZC",firstCol:"firstCol-D4RPB3ZC","no-corner-top-left":"no-corner-top-left-D4RPB3ZC","no-corner-top-right":"no-corner-top-right-D4RPB3ZC","no-corner-bottom-right":"no-corner-bottom-right-D4RPB3ZC","no-corner-bottom-left":"no-corner-bottom-left-D4RPB3ZC",textWrap:"textWrap-D4RPB3ZC",multilineContent:"multilineContent-D4RPB3ZC",primaryText:"primaryText-D4RPB3ZC",secondaryText:"secondaryText-D4RPB3ZC"}},737643:e=>{e.exports={
pair:"pair-ocURKVwI",xxceptionallysmalldonotusebrv1023:"xxceptionallysmalldonotusebrv1023-ocURKVwI",xxxxsmall:"xxxxsmall-ocURKVwI",xxxsmall:"xxxsmall-ocURKVwI",xxsmall:"xxsmall-ocURKVwI",xsmall:"xsmall-ocURKVwI",small:"small-ocURKVwI",medium:"medium-ocURKVwI",large:"large-ocURKVwI",xlarge:"xlarge-ocURKVwI",xxlarge:"xxlarge-ocURKVwI",xxxlarge:"xxxlarge-ocURKVwI",logo:"logo-ocURKVwI",skeleton:"skeleton-ocURKVwI",empty:"empty-ocURKVwI"}},757554:e=>{e.exports={logo:"logo-PsAlMQQF",hidden:"hidden-PsAlMQQF",xxceptionallysmalldonotusebrv1023:"xxceptionallysmalldonotusebrv1023-PsAlMQQF",xxxsmall:"xxxsmall-PsAlMQQF",xxsmall:"xxsmall-PsAlMQQF",xsmall:"xsmall-PsAlMQQF",small:"small-PsAlMQQF",medium:"medium-PsAlMQQF",large:"large-PsAlMQQF",xlarge:"xlarge-PsAlMQQF",xxlarge:"xxlarge-PsAlMQQF",xxxlarge:"xxxlarge-PsAlMQQF",skeleton:"skeleton-PsAlMQQF",letter:"letter-PsAlMQQF"}},649107:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa"}},116313:e=>{e.exports={wrapper:"wrapper-TJ9ObuLF",animated:"animated-TJ9ObuLF",pulsation:"pulsation-TJ9ObuLF"}},648692:e=>{e.exports={wrap:"wrap-HXzRntFl",input:"input-HXzRntFl",box:"box-HXzRntFl",hoverDot:"hoverDot-HXzRntFl",red:"red-HXzRntFl",blue:"blue-HXzRntFl",green:"green-HXzRntFl",orange:"orange-HXzRntFl",purple:"purple-HXzRntFl",cyan:"cyan-HXzRntFl",pink:"pink-HXzRntFl",large:"large-HXzRntFl",pickerDot:"pickerDot-HXzRntFl"}},916067:e=>{e.exports={wrapper:"wrapper-BZLCGWlx",buttons:"buttons-BZLCGWlx",colorSelectButton:"colorSelectButton-BZLCGWlx"}},534426:e=>{e.exports={wrapper:"wrapper-xPNB6vOB",selector:"selector-xPNB6vOB",arrowLeft:"arrowLeft-xPNB6vOB",colorSelectButton:"colorSelectButton-xPNB6vOB",popup:"popup-xPNB6vOB"}},986:e=>{e.exports={wrap:"wrap-erqqoDve",uiMarker:"uiMarker-erqqoDve",red:"red-erqqoDve",blue:"blue-erqqoDve",green:"green-erqqoDve",orange:"orange-erqqoDve",purple:"purple-erqqoDve",cyan:"cyan-erqqoDve",pink:"pink-erqqoDve",uiMarker__small:"uiMarker__small-erqqoDve"}},447429:e=>{e.exports={item:"item-GJX1EXhk",interactive:"interactive-GJX1EXhk",hovered:"hovered-GJX1EXhk",disabled:"disabled-GJX1EXhk",active:"active-GJX1EXhk",shortcut:"shortcut-GJX1EXhk",normal:"normal-GJX1EXhk",big:"big-GJX1EXhk",iconCell:"iconCell-GJX1EXhk",icon:"icon-GJX1EXhk",content:"content-GJX1EXhk",label:"label-GJX1EXhk",checked:"checked-GJX1EXhk",toolbox:"toolbox-GJX1EXhk",showToolboxOnHover:"showToolboxOnHover-GJX1EXhk",arrowIcon:"arrowIcon-GJX1EXhk",subMenu:"subMenu-GJX1EXhk",invisibleHotkey:"invisibleHotkey-GJX1EXhk"}},405264:e=>{e.exports={item:"item-WJDah4zD",emptyIcons:"emptyIcons-WJDah4zD",loading:"loading-WJDah4zD",disabled:"disabled-WJDah4zD",interactive:"interactive-WJDah4zD",hovered:"hovered-WJDah4zD",normal:"normal-WJDah4zD",big:"big-WJDah4zD",icon:"icon-WJDah4zD",label:"label-WJDah4zD",title:"title-WJDah4zD",nested:"nested-WJDah4zD",shortcut:"shortcut-WJDah4zD",
remove:"remove-WJDah4zD"}},868745:e=>{e.exports={separator:"separator-Ymxd0dt_"}},276773:e=>{e.exports={"default-drawer-min-top-distance":"100px",wrap:"wrap-_HnK0UIN",positionBottom:"positionBottom-_HnK0UIN",backdrop:"backdrop-_HnK0UIN",drawer:"drawer-_HnK0UIN",positionLeft:"positionLeft-_HnK0UIN"}},538455:e=>{e.exports={wrapStackTrace:"wrapStackTrace-qq2jSr9O",stackTraceLine:"stackTraceLine-qq2jSr9O",functionName:"functionName-qq2jSr9O"}},743970:e=>{e.exports={container:"container-zLVm6B4t",content:"content-zLVm6B4t",arrowHolder:"arrowHolder-zLVm6B4t","arrowHolder--below":"arrowHolder--below-zLVm6B4t","arrowHolder--above":"arrowHolder--above-zLVm6B4t","arrowHolder--before":"arrowHolder--before-zLVm6B4t","arrowHolder--after":"arrowHolder--after-zLVm6B4t","arrowHolder--above-fix":"arrowHolder--above-fix-zLVm6B4t","arrowHolder--before-rtl-fix":"arrowHolder--before-rtl-fix-zLVm6B4t","arrowHolder--after-ltr-fix":"arrowHolder--after-ltr-fix-zLVm6B4t",label:"label-zLVm6B4t",closeButton:"closeButton-zLVm6B4t"}},160794:(e,t,s)=>{"use strict";s.d(t,{getActions:()=>p});var i=s(50959),o=s(444372),l=s(604e3),a=s(547989),n=s(172073),r=s(779923),d=s(494966),u=s(345848),c=s(810978),h=s(24064);function p(e,t,p,_){const m=function(e,t,r,p){const _=o.t(null,void 0,s(160589)).format({symbol:(0,d.safeShortName)(t)}),m=e.getSymbolColor(t)||void 0,g={},b=l.LIST_COLORS.map((e=>{const t=new n.Action({actionId:"Watchlist.ChangeFlaggedGroupColor",options:{label:(0,h.flaggedSymbolColorName)(e),onExecute:()=>v(e),checkable:!0,checked:e===m}});return g[e]=t,t})),v=s=>{p(),(0,c.runOrSigninWithFeature)((()=>{r.setColor(s),e.setSymbolsColor([t],r.getColor()),(0,u.trackEvent)("Watchlist","Context menu","Flag"),l.LIST_COLORS.forEach((e=>{g[e].update({checked:e===r.getColor()})}))}),{feature:"flaggedSymbolsColors",source:"Set symbol color"})},w={doNotCloseOnClick:!0};return[new n.Action({actionId:"Watchlist.FlagSymbol",options:{label:_,onExecute:()=>v(r.getColor())}}),new n.Action({actionId:"Watchlist.ChangeFlaggedGroupColor",options:{...w,label:o.t(null,void 0,s(84151)),subItems:b},customActionOptions:{...w,jsxLabel:i.createElement(a.LabelColorSelector,{value:m,onChange:v})}})]}(e,t,p,_);return null!==e.getSymbolColor(t)&&m.push(function(e,t){return new n.Action({actionId:"Watchlist.UnflagSymbol",options:{label:o.t(null,void 0,s(967047)).format({symbol:(0,d.safeShortName)(t)}),onExecute:()=>{e.setSymbolsColor([t],null),(0,u.trackEvent)("Watchlist","Context menu","Unflag")}}})}(e,t)),m.push(function(e){return new n.Action({actionId:"Watchlist.UnflagAllSymbols",options:{label:o.t(null,void 0,s(429678)),onExecute:()=>{var t;t=()=>{e.clearAllSymbolsColor()},(0,r.showConfirm)({text:o.t(null,void 0,s(173837)),onConfirm:({dialogClose:e})=>{t(),e()}}),(0,u.trackEvent)("Watchlist","Context menu","Unflag all")}}})}(e)),m}},230725:(e,t,s)=>{"use strict";s.d(t,{ColorSelector:()=>S});var i=s(50959),o=s(604e3),l=s(591800),a=s(364511),n=s(887208),r=s(432438),d=s(497754),u=s.n(d),c=s(79205),h=s(444372),p=s(948019),_=s(263361),m=s(676809),g=s(24122),b=s(648692)
;const v=(0,a.makeSwitchGroupItem)((function(e){const{className:t,value:l=o.ListColor.Red,name:a,checked:n}=e,[r,d]=(0,_.useRovingTabindexElement)(null),v=(0,i.useContext)(p.ContextMenuContext),w=v?.type??"menu",S=l;return i.createElement("label",{ref:r,tabIndex:d,className:u()(t,b.wrap,"drawer"===w&&b.large),"data-color":S,role:"menuitem","aria-label":h.t(null,{replace:{color:S}},s(958673)),"aria-checked":n},i.createElement("input",{className:b.input,type:"radio",name:a,value:l,checked:n,onChange:function(){e.onChange&&e.onChange(l)},onClick:n?function(){e.onClickIfChecked&&e.onClickIfChecked(l)}:void 0}),i.createElement("div",{className:u()(b.box,b[S],"drawer"===w&&b.large)},n?i.createElement(c.Icon,{icon:m}):i.createElement("div",{className:b.pickerDot},i.createElement(c.Icon,{className:b.hoverDot,icon:g}))))})),w=[39,37,13,32,27];function S(e){const{buttonClassName:t,value:s,onSelectedClick:d,fromKeyboard:u}=e,c=(0,i.useRef)(null),h=(0,i.useCallback)((e=>{if(!c.current||e.defaultPrevented)return;const t=(0,l.hashFromEvent)(e);if(!w.includes(t))return;e.preventDefault();const i=(0,n.queryFocusableElements)(c.current).sort(n.navigationOrderComparator),a=i.findIndex((e=>e===document.activeElement));if(-1===a)return;const d=i[a];let u;switch(t){case 13:case 32:_(d.dataset.color||o.ListColor.Red);break;case 27:_(s)}switch((0,n.mapKeyCodeToDirection)(t)){case"inlineNext":u=i[a+1]||i[0];break;case"inlinePrev":u=i[a-1]||i[i.length-1]}u instanceof HTMLLabelElement&&((0,r.becomeSecondaryElement)(d),(0,r.becomeMainElement)(u),u.focus())}),[]);(0,i.useLayoutEffect)((()=>{if(!u)return;const e=document.activeElement,t=c.current;if(!t)return;const[s]=(0,n.queryFocusableElements)(t).sort(n.navigationOrderComparator);return s?((0,r.becomeMainElement)(s),s.focus(),()=>{e instanceof HTMLElement&&e.focus()}):void 0}),[]);const p=o.LIST_COLORS.map(((e,s)=>i.createElement(v,{key:s,className:t,onClickIfChecked:d,value:e})));return i.createElement("menu",{ref:c,onKeyDown:h},i.createElement(a.SwitchGroup,{name:"color-selector",onChange:_,values:void 0!==s?[s]:[]},p));function _(t){e.onChange&&void 0!==t&&e.onChange(t)}}},24064:(e,t,s)=>{"use strict";s.d(t,{flaggedSymbolColorName:()=>l});var i=s(604e3),o=s(444372);function l(e){switch(e){case i.ListColor.Red:return o.t(null,void 0,s(653893));case i.ListColor.Green:return o.t(null,void 0,s(831313));case i.ListColor.Blue:return o.t(null,void 0,s(747414));case i.ListColor.Orange:return o.t(null,void 0,s(721149));case i.ListColor.Purple:return o.t(null,void 0,s(321564));case i.ListColor.Cyan:return o.t(null,void 0,s(84535));case i.ListColor.Pink:return o.t(null,void 0,s(996355))}}},547989:(e,t,s)=>{"use strict";s.d(t,{LabelColorSelector:()=>n});var i=s(50959),o=s(230725),l=s(982528),a=s(916067);class n extends i.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.props.onChange(e)}}render(){const{value:e}=this.props;return i.createElement("span",{className:a.wrapper},i.createElement("span",{className:a.buttons,onClick:l.preventDefault},i.createElement(o.ColorSelector,{
buttonClassName:a.colorSelectButton,value:e,onChange:this._onChange,onSelectedClick:this._onChange})))}}},857769:(e,t,s)=>{"use strict";s.d(t,{PopupColorSelector:()=>y});var i=s(50959),o=s(670797),l=s(642709),a=s(18182),n=s(332585),r=s(67812),d=s(762852),u=s(969680),c=s(707533),h=s(230725),p=s(778785),_=s(534426);class m extends i.PureComponent{constructor(){super(...arguments),this._popUpElem=null,this._onChange=e=>{this.props.onSelectColor(e),this.props.hide()},this._onTargetMouseLeave=e=>{const t=!!e.relatedTarget.nodeName,s=e.relatedTarget===this._popUpElem,i=this._popUpElem&&t&&this._popUpElem.contains(e.relatedTarget);s||i||this.props.hide()},this._onPopUpMouseLeave=e=>{const t=!!e.nativeEvent.relatedTarget.nodeName,s=e.nativeEvent.relatedTarget===this.props.elem,i=t&&this.props.elem.contains(e.nativeEvent.relatedTarget);s||i||this.props.hide()},this._onTouchStart=e=>{const t=!!e.target.nodeName,s=e.target===this.props.elem,i=e.target===this._popUpElem,o=t&&this.props.elem.contains(e.target),l=this._popUpElem&&t&&this._popUpElem.contains(e.target);s||o||i||l||this.props.hide()},this._setPopUpElem=e=>{this._popUpElem=e}}componentDidMount(){document.documentElement&&(p.mobiletouch?document.documentElement.addEventListener("touchstart",this._onTouchStart):(this.props.elem.addEventListener("mouseleave",this._onTargetMouseLeave),document.body.addEventListener("scroll",this.props.hide)))}componentWillUnmount(){document.documentElement&&(p.mobiletouch?document.documentElement.removeEventListener("touchstart",this._onTouchStart):this.props.elem&&(this.props.elem.removeEventListener("mouseleave",this._onTargetMouseLeave),document.documentElement.removeEventListener("scroll",this.props.hide)))}render(){const e={top:0,left:0};if(this.props.elem){const t=this.props.elem.getBoundingClientRect();e.top=t.top+t.height/2,e.left=t.left+((0,u.isRtl)()?0:t.width)}return i.createElement(c.Portal,null,i.createElement("div",{style:e,className:_.popup,ref:this._setPopUpElem,onMouseLeave:p.mobiletouch?void 0:this._onPopUpMouseLeave},i.createElement("div",{className:_.wrapper},i.createElement("div",{className:_.selector},i.createElement("div",{className:_.arrowLeft}),i.createElement(h.ColorSelector,{buttonClassName:_.colorSelectButton,value:this.props.currentColor,fromKeyboard:this.props.fromKeyboard,onChange:this._onChange})))))}}var g=s(948019);function b(e){const{actions:t,...s}=e;return i.createElement(a.MatchMedia,{rule:l.DialogBreakpoints.TabletSmall},(e=>e&&t?i.createElement(n.DrawerManager,null,i.createElement(g.ContextMenuContext.Provider,{value:{type:"drawer"}},i.createElement(d.Drawer,{onClose:s.hide,position:"Bottom"},i.createElement(r.ContextMenuList,{items:t})))):i.createElement(m,{...s})))}var v=s(687341);let w=null,S=null;var y;!function(e){function t(){w&&S?.unmount()}e.show=function(e){w||(w=document.createElement("div")),t(),S=(0,v.createReactRoot)(i.createElement(o.SlotContext.Provider,{value:e.manager||null},i.createElement(b,{...e,hide:t})),w)},e.hide=t}(y||(y={}))},993110:(e,t,s)=>{"use strict";s.d(t,{
SymbolMarker:()=>u,createSymbolMarkerStandalone:()=>h});s(142492);var i=s(833367),o=s(330074),l=s(857769),a=s(60454),n=s(642709),r=s(160794),d=s(810978);class u{constructor(e){this._service=(0,o.getMarkedSymbolsListServiceInstance)(),this._colorManager=new a.ColorManager({context:a.ColorContext.SymbolMarker}),this._classes=[],this._onClick=e=>{e.preventDefault();const t=()=>{const t=(0,r.getActions)(this._service,this._symbol,this._colorManager,l.PopupColorSelector.hide),s=this._colorManager.getColor(),i={elem:this._uimarker.getElem(),currentColor:s,onSelectColor:this._onSelectColor,actions:t,manager:this._opts.manager,fromKeyboard:e instanceof KeyboardEvent};window.matchMedia(n.DialogBreakpoints.TabletSmall).matches?l.PopupColorSelector.show(i):null===this._color?(l.PopupColorSelector.show(i),this._service.setSymbolsColor([this._symbol],s)):(l.PopupColorSelector.hide(),this._service.setSymbolsColor([this._symbol],null))},s=window.is_authenticated;(0,d.runOrSigninWithFeature)((()=>{s&&(this._opts.onClick?this._opts.onClick(this._symbol,t):t())}),{feature:"flaggedSymbolsColors",source:"Set symbol color"})},this._onSelectColor=e=>{this._colorManager.setColor(e),this._service.setSymbolsColor([this._symbol],this._colorManager.getColor())},this._onDblClick=e=>{e.preventDefault()},this._onChange=()=>{this._setState(this._service.getSymbolColor(this._symbol))},this._opts=e,this._symbol=e.symbol,this._color=e.color||this._service.getSymbolColor(this._symbol),this._uimarker=new i.UiMarker({color:this._color,container:e.container,onClick:this._onClick,onDblClick:this._onDblClick,specialImage:e.specialImage}),e.className&&this.setClassName(e.className),null!==this._color&&this._addActiveClassName(),this._service.onSymbolChange(this._symbol,this._onChange)}updateSubscription(){this._setState(this._service.getSymbolColor(this._symbol))}bindTo(e,t){this._service.offSymbolChange(this._symbol,this._onChange),this._symbol=e,this._uimarker.appendTo(t),this._setState(this._service.getSymbolColor(e)),this._service.onSymbolChange(e,this._onChange)}unbind(){this._service.offSymbolChange(this._symbol,this._onChange),this._uimarker.detach()}getElem(){return this._uimarker.getElem()}isMarked(){return null!==this._color}setClassName(e){this._uimarker.getElem().classList.remove(...this._classes),this._classes=e.split(" ").filter(Boolean),this._uimarker.getElem().classList.add(...this._classes)}destroy(){this.unbind(),delete this._uimarker,delete this._opts}toggle(e){this._onClick(e)}_setState(e){const t=this.isMarked();this._color=e,null!==this._color?(this._uimarker.setColor(this._color),this._addActiveClassName()):(this._uimarker.removeColor(),this._removeActiveClassName()),void 0!==this._opts.onMarkedChanged&&t!==this.isMarked()&&this._opts.onMarkedChanged()}_addActiveClassName(){this._opts.activeClassName&&this._uimarker.addClass(this._opts.activeClassName)}_removeActiveClassName(){this._opts.activeClassName&&this._uimarker.removeClass(this._opts.activeClassName)}}class c extends u{constructor(e){super(e),this._onInit=()=>{
this.updateSubscription()},this._service.onInit(this._onInit)}destroy(){this._service.offInit(this._onInit),super.destroy()}}function h(e){return new c(e)}},833367:(e,t,s)=>{"use strict";s.d(t,{UiMarker:()=>r});var i=s(604e3),o=s(778785),l=s(497754),a=s(904799),n=s(986);class r{constructor(e){this._onClick=e=>{this._opts.onClick&&this._opts.onClick(e)},this._onDblClick=e=>{this._opts.onDblClick&&this._opts.onDblClick(e)},this._container=e.container,this._opts=e,this._elem=this._render(e),this._addEventListeners()}setColor(e){this.removeColor(),this.addClass(n[e])}removeColor(){this._elem.classList.remove(n[i.ListColor.Red],n[i.ListColor.Orange],n[i.ListColor.Purple],n[i.ListColor.Green],n[i.ListColor.Blue],n[i.ListColor.Cyan],n[i.ListColor.Pink])}addClass(e){this._elem.classList.add(e)}removeClass(e){this._elem.classList.remove(e)}getElem(){return this._elem}appendTo(e){this.detach(),this._container=e,this._container.appendChild(this._elem),this._addEventListeners()}detach(){this._removeEventListeners(),this._container&&(this._container.removeChild(this._elem),delete this._container)}_render(e){const t=l(n.uiMarker,{[e.className]:Boolean(e.className),[n[e.color]]:Boolean(e.color)}),s=e.specialImage||a,i=document.createElement("div");return i.className=t,i.innerHTML=s,this._container&&this._container.appendChild(i),i}_addEventListeners(){if(this._opts.onClick){const e=o.mobiletouch?"touchstart":"click";this._elem.addEventListener(e,this._onClick)}this._opts.onDblClick&&this._elem.addEventListener("dblclick",this._onDblClick)}_removeEventListeners(){if(this._opts.onClick){const e=o.mobiletouch?"touchstart":"click";this._elem.removeEventListener(e,this._onClick)}this._opts.onDblClick&&this._elem.removeEventListener("dblclick",this._onDblClick)}}},173777:(e,t,s)=>{"use strict";s.d(t,{SEPARATOR_PREFIX:()=>i,isSeparatorItem:()=>o});const i="###";function o(e){return e.startsWith(i)}},883522:(e,t,s)=>{"use strict";s.d(t,{AppContext:()=>i});const i=(0,s(50959).createContext)({isOnMobileAppPage:()=>!1,isRtl:!1,locale:"en"})},87745:(e,t,s)=>{"use strict";function i(e,t){return t||null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}s.d(t,{isIconOnly:()=>i})},729926:(e,t,s)=>{"use strict";s.d(t,{ButtonGroupContext:()=>i});const i=s(50959).createContext({isInButtonGroup:!1,isGroupPrimary:!1})},235432:(e,t,s)=>{"use strict";s.d(t,{ButtonGroupContext:()=>i.ButtonGroupContext});var i=s(729926)},275148:(e,t,s)=>{"use strict";s.d(t,{useLightButtonClasses:()=>u});var i=s(50959),o=s(497754),l=s.n(o),a=s(169986),n=s(87745),r=s(301792),d=s(235432);const u=(e,t,s)=>{const o=(0,i.useContext)(a.CustomBehaviourContext),{className:u,isSelected:c,children:h,showCaret:p,forceDirection:_,iconOnly:m,color:g="gray",variant:b="primary",size:v="medium",enableActiveStateStyles:w=o.enableActiveStateStyles,typography:S,isLink:y=!1,textWrap:f,isPills:C,isActive:E,startSlot:M,endSlot:x}=t,k=e[`typography-${((e,t,s)=>{if(s){const e=s.replace(/^\D+/g,"");return t?`semibold${e}`:s}switch(e){case"xsmall":return t?"semibold14px":"regular14px"
;case"small":case"medium":return t?"semibold16px":"regular16px";default:return""}})(v,c||C,S||void 0)}`],V=(0,i.useContext)(r.ControlGroupContext),{isInButtonGroup:L,isGroupPrimary:A}=(0,i.useContext)(d.ButtonGroupContext);return l()(u,e.lightButton,y&&e.link,E&&e.active,c&&e.selected,(0,n.isIconOnly)(h,m)&&e.noContent,!!M&&e.withStartSlot,(p||!!x)&&e.withEndSlot,s&&e.withGrouped,_&&e[_],e[A?"primary":b],e[A?"gray":g],e[v],k,!w&&e.disableActiveStateStyles,V.isGrouped&&e.grouped,f&&e.wrap,L&&e.disableActiveOnTouch,C&&e.pills)}},203323:(e,t,s)=>{"use strict";s.d(t,{LightButtonContent:()=>_});var i=s(50959),o=s(497754),l=s.n(o),a=s(843085),n=s(87745),r=s(79205),d=s(602948),u=s.n(d),c=s(778457),h=s.n(c);const p=e=>i.createElement(r.Icon,{className:l()(h().caret,e&&h().activeCaret),icon:u()});function _(e){const{showCaret:t,iconOnly:s,ellipsis:o=!0,textWrap:r,tooltipText:d,children:u,endSlot:c,startSlot:_,isActiveCaret:m}=e;[c,t].filter((e=>!!e));return i.createElement(i.Fragment,null,_&&i.createElement("span",{className:l()(h().slot,h().startSlot)},_),!(0,n.isIconOnly)(u,s)&&i.createElement("span",{className:l()(h().content,!r&&h().nowrap,"apply-overflow-tooltip","apply-overflow-tooltip--check-children-recursively","apply-overflow-tooltip--allow-text"),"data-overflow-tooltip-text":d??(0,a.getTextForTooltip)(u)},r||o?i.createElement(i.Fragment,null,i.createElement("span",{className:l()(!r&&o&&h().ellipsisContainer,r&&h().textWrapContainer,r&&o&&h().textWrapWithEllipsis)},u),i.createElement("span",{className:h().visuallyHidden,"aria-hidden":!0},u)):i.createElement(i.Fragment,null,u,i.createElement("span",{className:h().visuallyHidden,"aria-hidden":!0},u))),c&&i.createElement("span",{className:l()(h().slot,h().endSlot)},c),t&&p(m))}},25e3:(e,t,s)=>{"use strict";s.d(t,{LightButton:()=>c});var i=s(50959),o=s(301792),l=s(275148),a=s(203323),n=s(778457),r=s.n(n),d=s(411985),u=s.n(d);function c(e){const{isGrouped:t}=i.useContext(o.ControlGroupContext),{reference:s,className:n,isSelected:d,children:c,iconOnly:h,ellipsis:p,showCaret:_,forceDirection:m,endSlot:g,startSlot:b,color:v,variant:w,size:S,enableActiveStateStyles:y,typography:f,textWrap:C=!1,maxLines:E,style:M={},isPills:x,isActive:k,tooltipText:V,role:L,...A}=e,W=C?E??2:1,T=W>0?{...M,"--ui-lib-light-button-content-max-lines":W}:M;return i.createElement("button",{...A,className:(0,l.useLightButtonClasses)({...u(),...r()},{className:n,isSelected:d,children:c,iconOnly:h,showCaret:_,forceDirection:m,endSlot:g,startSlot:b,color:v,variant:w,size:S,enableActiveStateStyles:y,typography:f,textWrap:C,isPills:x,isActive:k},t),ref:s,style:T,role:L},i.createElement(a.LightButtonContent,{showCaret:_,isActiveCaret:_&&(x||k||d),iconOnly:h,ellipsis:p,textWrap:C,tooltipText:V,endSlot:g,startSlot:b},c))}},897782:(e,t,s)=>{"use strict";s.d(t,{NavButton:()=>c});var i=s(50959),o=s(497754),l=s.n(o),a=s(79205),n=s(138672),r=s.n(n);function d(e){const{size:t="large",preservePaddings:s,isLink:i,flipIconOnRtl:o,className:a}=e
;return l()(r()["nav-button"],r()[`size-${t}`],s&&r()["preserve-paddings"],o&&r()["flip-icon"],i&&r().link,a)}function u(e){const{children:t,icon:s}=e;return i.createElement(i.Fragment,null,i.createElement("span",{className:r().background}),i.createElement(a.Icon,{icon:s,className:r().icon,"aria-hidden":!0}),t&&i.createElement("span",{className:r()["visually-hidden"]},t))}const c=(0,i.forwardRef)(((e,t)=>{const{icon:s,type:o="button",preservePaddings:l,flipIconOnRtl:a,size:n,"aria-label":r,...c}=e;return i.createElement("button",{...c,className:d({...e,children:r}),ref:t,type:o},i.createElement(u,{icon:s},r))}));c.displayName="NavButton";var h=s(14388),p=s(551080);(0,i.forwardRef)(((e,t)=>{const{icon:s,renderComponent:o,"aria-label":l,...a}=e,n=o??h.CustomComponentDefaultLink;return i.createElement(n,{...a,className:d({...e,children:l,isLink:!0}),reference:(0,p.isomorphicRef)(t)},i.createElement(u,{icon:s},l))})).displayName="NavAnchorButton"},915812:(e,t,s)=>{"use strict";s.d(t,{SquareAnchorButton:()=>o.SquareAnchorButton,SquareButton:()=>i.SquareButton});s(221191);var i=s(422175),o=s(951144)},951144:(e,t,s)=>{"use strict";s.d(t,{SquareAnchorButton:()=>r});var i=s(50959),o=s(301792),l=s(8626),a=s(221191);function n(e){const{className:t,color:s,variant:i,size:o,stretch:a,iconOnly:n,startSlot:r,endSlot:d,...u}=e;return{...u,...(0,l.filterDataProps)(e),...(0,l.filterAriaProps)(e)}}function r(e){const{reference:t}=e,{isGrouped:s,cellState:l,disablePositionAdjustment:r}=(0,i.useContext)(o.ControlGroupContext),d=(0,a.getSquareButtonClasses)({...e,isGrouped:s,cellState:l,disablePositionAdjustment:r,isAnchor:!0});return i.createElement("a",{...n(e),className:d,ref:t},i.createElement(a.SquareButtonContent,{...e}))}},221191:(e,t,s)=>{"use strict";s.d(t,{SquareButtonContent:()=>c,getSquareButtonClasses:()=>u});var i=s(50959),o=s(497754),l=s.n(o),a=s(307754),n=s(370168),r=s.n(n);const d="apply-overflow-tooltip apply-overflow-tooltip--check-children-recursively apply-overflow-tooltip--allow-text apply-common-tooltip";function u(e){const{size:t="medium",variant:s="primary",color:i="brand",stretch:o=!1,startSlot:n,endSlot:u,iconOnly:c=!1,className:h,isGrouped:p,cellState:_,disablePositionAdjustment:m=!1,primaryText:g,secondaryText:b,isAnchor:v=!1}=e,w="brand"===i?"black":i,S=function(e){let t="";return 0!==e&&(1&e&&(t=l()(t,r()["no-corner-top-left"])),2&e&&(t=l()(t,r()["no-corner-top-right"])),4&e&&(t=l()(t,r()["no-corner-bottom-right"])),8&e&&(t=l()(t,r()["no-corner-bottom-left"]))),t}((0,a.getGroupCellRemoveRoundBorders)(_)),y=c&&(n||u);return l()(h,r().button,r()[t],r()[w],r()[s],o&&r().stretch,n&&r().withStartIcon,u&&r().withEndIcon,y&&r().iconOnly,S,p&&r().grouped,p&&!m&&r().adjustPosition,p&&_.isTop&&r().firstRow,p&&_.isLeft&&r().firstCol,g&&b&&r().multilineContent,v&&r().link,d)}function c(e){const{startSlot:t,iconOnly:s,children:o,endSlot:a,primaryText:n,secondaryText:u}=e;if(t&&a&&s)return i.createElement("span",{className:l()(r().slot,r().startSlotWrap)},t);const c=s&&(t??a),h=!t&&!a&&!s&&!o&&n&&u
;return i.createElement(i.Fragment,null,t&&i.createElement("span",{className:l()(r().slot,r().startSlotWrap)},t),o&&!c&&i.createElement("span",{className:r().content},o),a&&i.createElement("span",{className:l()(r().slot,r().endSlotWrap)},a),h&&!c&&function(e){return e.primaryText&&e.secondaryText&&i.createElement("div",{className:l()(r().textWrap,d)},i.createElement("span",{className:r().primaryText}," ",e.primaryText," "),"string"==typeof e.secondaryText?i.createElement("span",{className:r().secondaryText}," ",e.secondaryText," "):i.createElement("span",{className:r().secondaryText},i.createElement("span",null,e.secondaryText.firstLine),i.createElement("span",null,e.secondaryText.secondLine)))}(e))}},422175:(e,t,s)=>{"use strict";s.d(t,{SquareButton:()=>u});var i=s(50959),o=s(843085),l=s(301792),a=s(8626),n=s(990260),r=s(221191);function d(e){const{className:t,color:s,variant:i,size:o,stretch:l,iconOnly:n,startSlot:r,endSlot:d,primaryText:u,secondaryText:c,...h}=e;return{...h,...(0,a.filterDataProps)(e),...(0,a.filterAriaProps)(e)}}function u(e){const{reference:t,tooltipText:s,disabled:a,onClick:u,onMouseOver:c,onMouseOut:h,onMouseDown:p,onMouseEnter:_,"aria-disabled":m,...g}=e,{isGrouped:b,cellState:v,disablePositionAdjustment:w}=(0,i.useContext)(l.ControlGroupContext),S=(0,r.getSquareButtonClasses)({...g,isGrouped:b,cellState:v,disablePositionAdjustment:w}),y=s??(e.primaryText?[e.primaryText,e.secondaryText].join(" "):(0,o.getTextForTooltip)(e.children));return i.createElement("button",{...d(g),"aria-disabled":a||m,tabIndex:e.tabIndex??(a?-1:0),className:S,ref:t,onClick:(0,n.disableEventHandlerConditionally)(u,a),onMouseDown:(0,n.disableEventHandlerConditionally)(p,a),onMouseOver:(0,n.disableEventHandlerConditionally)(c,a),onMouseOut:(0,n.disableEventHandlerConditionally)(h,a),onMouseEnter:(0,n.disableEventHandlerConditionally)(_,a),"data-overflow-tooltip-text":y},i.createElement(r.SquareButtonContent,{...g}))}},115078:(e,t,s)=>{"use strict";s.d(t,{getBlockStyleClasses:()=>r,getLogoStyleClasses:()=>d});var i=s(497754),o=s.n(i),l=s(548729),a=s(737643),n=s.n(a);function r(e,t){return o()(n().pair,n()[e],t)}function d(e,t=2,s=!0){return o()(n().logo,n()[e],n().skeleton,l.skeletonTheme.wrapper,!s&&n().empty,1===t&&o()(l.skeletonTheme.animated))}},884566:(e,t,s)=>{"use strict";s.d(t,{CircleLogo:()=>n,hiddenCircleLogoClass:()=>a});var i=s(50959),o=s(842060),l=s(757554);const a=s.n(l)().hidden;function n(e){const t=(0,o.isCircleLogoWithUrlProps)(e),[s,l]=(0,i.useState)(0),a=(0,i.useRef)(null),n=(0,o.getStyleClasses)(e.size,s,e.className),r=e.alt??e.title??"",d=t?r[0]:e.placeholderLetter;return(0,i.useEffect)((()=>l(a.current?.complete??!t?2:1)),[t]),t&&3!==s?i.createElement("img",{ref:a,className:n,crossOrigin:"",src:e.logoUrl,alt:r,title:e.title,loading:e.loading,onLoad:()=>l(2),onError:()=>l(3),"aria-label":e["aria-label"],"aria-hidden":e["aria-hidden"]}):i.createElement("span",{className:n,title:e.title,"aria-label":e["aria-label"],"aria-hidden":e["aria-hidden"]},d)}},842060:(e,t,s)=>{"use strict";s.d(t,{
getStyleClasses:()=>r,isCircleLogoWithUrlProps:()=>d});var i=s(497754),o=s.n(i),l=s(548729),a=s(757554),n=s.n(a);function r(e,t=2,s){return o()(n().logo,n()[e],s,0===t||1===t?o()(l.skeletonTheme.wrapper,n().skeleton):n().letter,1===t&&l.skeletonTheme.animated)}function d(e){return"logoUrl"in e&&null!==e.logoUrl&&void 0!==e.logoUrl&&0!==e.logoUrl.length}},301792:(e,t,s)=>{"use strict";s.d(t,{ControlGroupContext:()=>l,defaultCellState:()=>o});var i=s(50959);const o={isTop:!0,isRight:!0,isBottom:!0,isLeft:!0},l=i.createContext({isGrouped:!1,cellState:o})},307754:(e,t,s)=>{"use strict";function i(e){let t=0;return e.isTop&&e.isLeft||(t+=1),e.isTop&&e.isRight||(t+=2),e.isBottom&&e.isLeft||(t+=8),e.isBottom&&e.isRight||(t+=4),t}s.d(t,{getGroupCellRemoveRoundBorders:()=>i})},834995:(e,t,s)=>{"use strict";function i(e){const{reference:t,...s}=e;return{...s,ref:t}}s.d(t,{renameRef:()=>i})},14388:(e,t,s)=>{"use strict";s.d(t,{CustomComponentDefaultLink:()=>l});var i=s(50959),o=s(834995);function l(e){return i.createElement("a",{...(0,o.renameRef)(e)})}i.PureComponent},465201:(e,t,s)=>{"use strict";s.d(t,{CustomBehaviourContext:()=>i});const i=(0,s(50959).createContext)({enableActiveStateStyles:!0});i.displayName="CustomBehaviourContext"},169986:(e,t,s)=>{"use strict";s.d(t,{CustomBehaviourContext:()=>i.CustomBehaviourContext,presetDefault:()=>o.presetDefault,presetPlatform:()=>o.presetPlatform});var i=s(465201),o=s(741083)},741083:(e,t,s)=>{"use strict";s.d(t,{presetDefault:()=>i,presetPlatform:()=>o});const i={enableActiveStateStyles:!0},o={enableActiveStateStyles:!1}},267521:(e,t,s)=>{"use strict";s.d(t,{useFunctionalRefObject:()=>l});var i=s(50959),o=s(774218);function l(e){const t=(0,i.useMemo)((()=>function(e){const t=s=>{e(s),t.current=s};return t.current=null,t}((e=>{n.current(e)}))),[]),s=(0,i.useRef)(null),l=t=>{if(null===t)return a(s.current,t),void(s.current=null);s.current!==e&&(s.current=e,a(s.current,t))},n=(0,i.useRef)(l);return n.current=l,(0,o.useIsomorphicLayoutEffect)((()=>{if(null!==t.current)return n.current(t.current),()=>n.current(null)}),[e]),t}function a(e,t){null!==e&&("function"==typeof e?e(t):e.current=t)}},640027:(e,t,s)=>{"use strict";s.d(t,{useIsMounted:()=>o});var i=s(50959);const o=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},774218:(e,t,s)=>{"use strict";s.d(t,{useIsomorphicLayoutEffect:()=>o});var i=s(50959);function o(e,t){("undefined"==typeof window?i.useEffect:i.useLayoutEffect)(e,t)}},940194:(e,t,s)=>{"use strict";function i(e,t,s,i,o){function l(o){if(e>o.timeStamp)return;const l=o.target;void 0!==s&&null!==t&&null!==l&&l.ownerDocument===i&&(t.contains(l)||s(o))}return o.click&&i.addEventListener("click",l,!1),o.mouseDown&&i.addEventListener("mousedown",l,!1),o.touchEnd&&i.addEventListener("touchend",l,!1),o.touchStart&&i.addEventListener("touchstart",l,!1),()=>{i.removeEventListener("click",l,!1),i.removeEventListener("mousedown",l,!1),i.removeEventListener("touchend",l,!1),i.removeEventListener("touchstart",l,!1)}}s.d(t,{
addOutsideEventListener:()=>i})},853970:(e,t,s)=>{"use strict";s.d(t,{useOutsideEvent:()=>i.useOutsideEvent});var i=s(31241)},31241:(e,t,s)=>{"use strict";s.d(t,{useOutsideEvent:()=>a});var i=s(50959),o=s(774218),l=s(940194);function a(e){const{click:t,mouseDown:s,touchEnd:a,touchStart:n,handler:r,reference:d}=e,u=(0,i.useRef)(null),c=(0,i.useRef)("undefined"==typeof window?0:new window.CustomEvent("timestamp").timeStamp);return(0,o.useIsomorphicLayoutEffect)((()=>{const e={click:t,mouseDown:s,touchEnd:a,touchStart:n},i=d?d.current:u.current;return(0,l.addOutsideEventListener)(c.current,i,r,document,e)}),[t,s,a,n,r]),d||u}},132734:(e,t,s)=>{"use strict";s.d(t,{Icon:()=>o});var i=s(50959);const o=i.forwardRef(((e,t)=>{const{icon:s="",title:o,ariaLabel:l,ariaLabelledby:a,ariaHidden:n,...r}=e,d=!!(o||l||a);return i.createElement("span",{role:"img",...r,ref:t,"aria-label":l,"aria-labelledby":a,"aria-hidden":n||!d,title:o,dangerouslySetInnerHTML:{__html:s}})}))},79205:(e,t,s)=>{"use strict";s.d(t,{Icon:()=>i.Icon});var i=s(132734)},265005:(e,t,s)=>{"use strict";s.d(t,{Loader:()=>i.Loader});var i=s(386290)},386290:(e,t,s)=>{"use strict";s.d(t,{Loader:()=>r});var i=s(50959),o=s(497754),l=s.n(o),a=s(649107),n=s.n(a);function r(e){const{className:t,size:s="medium",staticPosition:o,color:a="black"}=e,r=l()(n().item,n()[a],n()[s]);return i.createElement("span",{className:l()(n().loader,o&&n().static,t)},i.createElement("span",{className:r}),i.createElement("span",{className:r}),i.createElement("span",{className:r}))}},910958:(e,t,s)=>{"use strict";s.d(t,{Portal:()=>i.Portal,PortalContext:()=>i.PortalContext});var i=s(74446)},74446:(e,t,s)=>{"use strict";s.d(t,{Portal:()=>d,PortalContext:()=>u});var i=s(50959),o=s(632227),l=s(925931),a=s(351290),n=s(593110),r=s(474647);class d extends i.PureComponent{constructor(){super(...arguments),this._uuid=(0,l.nanoid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"";const t=this.props.className;return t&&("string"==typeof t?e.classList.add(t):e.classList.add(...t)),this.props.shouldTrapFocus&&!e.hasAttribute(n.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(n.FOCUS_TRAP_DATA_ATTRIBUTE,"true"),this.props["aria-hidden"]&&e.setAttribute("aria-hidden","true"),o.createPortal(i.createElement(u.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){return null===this.context?(0,a.getRootOverlapManager)():this.context}}d.contextType=r.SlotContext;const u=i.createContext(null)},548729:(e,t,s)=>{"use strict";s.d(t,{skeletonTheme:()=>o});var i=s(116313);const o=s.n(i)()},474647:(e,t,s)=>{"use strict";s.d(t,{Slot:()=>i.Slot,SlotContext:()=>i.SlotContext});var i=s(581585)},581585:(e,t,s)=>{"use strict";s.d(t,{Slot:()=>o,SlotContext:()=>l});var i=s(50959)
;class o extends i.Component{shouldComponentUpdate(){return!1}render(){return i.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const l=i.createContext(null)},364511:(e,t,s)=>{"use strict";s.d(t,{SwitchGroup:()=>i.SwitchGroup,makeSwitchGroupItem:()=>o.makeSwitchGroupItem});var i=s(367254),o=s(771813)},973920:(e,t,s)=>{"use strict";s.d(t,{SwitchGroupContext:()=>l});var i=s(50959),o=s(755883);const l=(0,i.createContext)({getName:()=>"",getValues:()=>[],getOnChange:()=>o.default,subscribe:o.default,unsubscribe:o.default})},771813:(e,t,s)=>{"use strict";s.d(t,{makeSwitchGroupItem:()=>l});var i=s(50959),o=s(973920);function l(e){var t;return t=class extends i.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.context.getOnChange()(e)},this._onUpdate=e=>{e.includes(this.props.value)&&this.forceUpdate()}}componentDidMount(){this.context.subscribe(this._onUpdate)}render(){return i.createElement(e,{...this.props,name:this._getName(),onChange:this._onChange,checked:this._isChecked()})}componentWillUnmount(){this.context.unsubscribe(this._onUpdate)}_getName(){return this.context.getName()}_isChecked(){return this.context.getValues().includes(this.props.value)}},t.contextType=o.SwitchGroupContext,t}},367254:(e,t,s)=>{"use strict";s.d(t,{SwitchGroup:()=>l});var i=s(50959),o=s(973920);class l extends i.PureComponent{constructor(e){super(e),this._subscriptions=new Set,this._getName=()=>this.props.name,this._getValues=()=>this.props.values,this._getOnChange=()=>this.props.onChange,this._subscribe=e=>{this._subscriptions.add(e)},this._unsubscribe=e=>{this._subscriptions.delete(e)},this.state={switchGroupContext:{getName:this._getName,getValues:this._getValues,getOnChange:this._getOnChange,subscribe:this._subscribe,unsubscribe:this._unsubscribe}}}render(){return i.createElement(o.SwitchGroupContext.Provider,{value:this.state.switchGroupContext},this.props.children)}componentDidUpdate(e){this._notify(this._getUpdates(this.props.values,e.values))}_notify(e){this._subscriptions.forEach((t=>t(e)))}_getUpdates(e,t){return[...t,...e].filter((s=>t.includes(s)?!e.includes(s):e.includes(s)))}}},8626:(e,t,s)=>{"use strict";function i(e){return l(e,a)}function o(e){return l(e,n)}function l(e,t){const s=Object.entries(e).filter(t),i={};for(const[e,t]of s)i[e]=t;return i}function a(e){const[t,s]=e;return 0===t.indexOf("data-")&&"string"==typeof s}function n(e){return 0===e[0].indexOf("aria-")}s.d(t,{filterAriaProps:()=>o,filterDataProps:()=>i,filterProps:()=>l,isAriaAttribute:()=>n,isDataAttribute:()=>a})},89317:(e,t,s)=>{"use strict";s.d(t,{dataQaIds:()=>o});var i=s(147975);function o(e,t){return[e,t].filter(i.isExistent).join(" ")}},990260:(e,t,s)=>{"use strict";function i(e,t){return s=>{if(t)return s.preventDefault(),void s.stopPropagation();e?.(s)}}s.d(t,{disableEventHandlerConditionally:()=>i})},843085:(e,t,s)=>{"use strict";s.d(t,{getTextForTooltip:()=>a});var i=s(50959);const o=e=>(0,
i.isValidElement)(e)&&Boolean(e.props.children),l=(e,t=!0)=>null==e||"boolean"==typeof e||"{}"===JSON.stringify(e)?"":e.toString()+(t?" ":""),a=e=>Array.isArray(e)||(0,i.isValidElement)(e)?i.Children.toArray(e).reduce(((e,t)=>{let s="";return s=(0,i.isValidElement)(t)&&o(t)?a(t.props.children):(0,i.isValidElement)(t)&&!o(t)?"":l(t),e.concat(s)}),"").trim():l(e,!1)},551080:(e,t,s)=>{"use strict";function i(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function o(e){return i([e])}s.d(t,{isomorphicRef:()=>o,mergeRefs:()=>i})},351290:(e,t,s)=>{"use strict";s.d(t,{OverlapManager:()=>a,getRootOverlapManager:()=>r});var i=s(650151),o=s(593110);class l{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter((t=>e!==t))}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class a{constructor(e=document){this._storage=new l,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,s=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,s),this._container=s}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const s=this._windows.get(e);if(void 0!==s)return s;this.registerWindow(e);const i=this._document.createElement("div");if(i.style.position=t.position,i.style.zIndex=this._index.toString(),i.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length;if(t.index>=e)this._container.appendChild(i);else if(t.index<=0)this._container.insertBefore(i,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(i,e)}}else"reverse"===t.direction?this._container.insertBefore(i,this._container.firstChild):this._container.appendChild(i);return this._windows.set(e,i),++this._index,i}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveLastWindowToTop(){const e=this._storage.getItems(),t=e[e.length-1];t&&this.moveToTop(t)}moveToTop(e){if(this.getZindex(e)!==this._index){const t=this.ensureWindow(e);this._windows.forEach(((e,s)=>{e.hasAttribute(o.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(o.FOCUS_TRAP_DATA_ATTRIBUTE,e===t?"true":"false")})),t.style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const n=new WeakMap;function r(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return(0,i.ensureDefined)(n.get(t));{const t=new a(e),s=function(e){const t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t.dataset.qaId="overlap-manager-root",t}(e);return n.set(s,t),t.setContainer(s),
e.body.appendChild(s),t}}},147975:(e,t,s)=>{"use strict";function i(e){return null!=e}s.d(t,{isExistent:()=>i})},675128:(e,t,s)=>{"use strict";function i(e){let t=null;return()=>(null===t&&(t=e()),t)}s.d(t,{lazyValue:()=>i})},687341:(e,t,s)=>{"use strict";s.d(t,{createReactRoot:()=>c});var i=s(50959),o=s(632227),l=s(904237),a=s(883522),n=s(314802),r=s(969680);const d={iOs:"old",android:"new",old:"old",new:"new",any:"any"};function u(e){const[t]=(0,i.useState)({isOnMobileAppPage:e=>(0,n.isOnMobileAppPage)(d[e]),isRtl:(0,r.isRtl)(),locale:window.locale});return i.createElement(a.AppContext.Provider,{value:t},e.children)}function c(e,t,s="legacy"){const a=i.createElement(u,null,e);if("modern"===s){const e=(0,l.createRoot)(t);return e.render(a),{render(t){e.render(i.createElement(u,null,t))},unmount(){e.unmount()}}}return o.render(a,t),{render(e){o.render(i.createElement(u,null,e),t)},unmount(){o.unmountComponentAtNode(t)}}}},176006:(e,t,s)=>{"use strict";function i(e,t){null===e.firstChild?e.textContent=t:e.firstChild.nodeValue=t}s.d(t,{updateTextNode:()=>i})},822714:(e,t,s)=>{"use strict";s.d(t,{changeDescription:()=>h,convertToCustomSymbolList:()=>r,convertToMarkedSymbolList:()=>d,getAllWatchLists:()=>c});var i=s(650151),o=s(803912),l=s(77117),a=(s(341286),s(421907),s(658583));s(435712);if(45206==s.j)var n=s(543469);s(62802),s(125226);function r(e){const t=e.id,s=e.name,{symbols:i,collapsedSeparators:o}=(0,l.localCollapseStateFromRemoteSymbols)(e.symbols??[]);return{type:"custom",id:t,name:s,description:e.description,active:e.active,symbols:i,shared:e.shared,collapsedSeparators:o,persistedState:e,meta:{server_id:+t}}}function d(e){const t=(0,i.ensureNotNull)(e.color),{symbols:s,collapsedSeparators:o}=(0,l.localCollapseStateFromRemoteSymbols)(e.symbols??[]);return{type:"colored",id:t,color:t,name:e.name??null,description:e.description,active:e.active,symbols:s,shared:e.shared,collapsedSeparators:o,persistedState:e,meta:{server_id:+e.id}}}function u(e){return(0,n.isCustomListResponse)(e)?r(e):d(e)}function c(e){return(0,o.fetch)("/api/v1/symbols_list/all/",{signal:e}).then(a.handleJSON).then((e=>e.map(u)))}function h(e,t){return(0,o.fetch)(`/api/v1/symbols_list/custom/${e}/update_meta/`,{method:"POST",body:JSON.stringify({description:t}),headers:{"Content-Type":"application/json"}}).then(a.handleJSON).then(r)}},182124:(e,t,s)=>{"use strict";s.d(t,{resolveUnderlyingSymbol:()=>o});var i=s(795394);async function o(e){const t=await(0,i.snapshoter)().getSnapshot(e,new Set(["underlying-symbol"]));if("error"===t.status)return null;const s=t.values["underlying-symbol"];return s||null}},337350:(e,t,s)=>{"use strict";s.d(t,{usePromise:()=>l});var i=s(50959),o=s(904653);function l(e,t,s){const[l,a]=(0,i.useState)(null);return(0,i.useEffect)((()=>{const s=new AbortController;let i=null;return(0,o.respectAbort)(s.signal,e()).then((e=>a(i=e))).catch(o.skipAbortError),()=>{s.abort(),i&&t&&t(i)}}),s?[...s]:void 0),l}},263361:(e,t,s)=>{"use strict";s.d(t,{useRovingTabindexElement:()=>l});var i=s(50959),o=s(267521);function l(e,t=[]){
const[s,l]=(0,i.useState)(!1),a=(0,o.useFunctionalRefObject)(e);return(0,i.useLayoutEffect)((()=>{const e=a.current;if(null===e)return;const t=e=>{switch(e.type){case"roving-tabindex:main-element":l(!0);break;case"roving-tabindex:secondary-element":l(!1)}};return e.addEventListener("roving-tabindex:main-element",t),e.addEventListener("roving-tabindex:secondary-element",t),()=>{e.removeEventListener("roving-tabindex:main-element",t),e.removeEventListener("roving-tabindex:secondary-element",t)}}),t),[a,s?0:-1]}},837657:(e,t,s)=>{"use strict";s.d(t,{isSeparatorItem:()=>o});var i=s(173777);function o(e){return(0,i.isSeparatorItem)(e)}},795394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{resolveSymbolName:()=>d,resolveSymbolNameForAll:()=>u,resolveSymbolNameForAllDistinct:()=>c,snapshoter:()=>n});var i=s(862170),o=s(675128),l=s(837657);const a=new Set(["pro_name","base_name","short_name","description","type","exchange","typespecs","listed_exchange","last_price","country_code","provider_id","symbol-primaryname","logoid","base-currency-logoid","currency-logoid","source-logoid","update_mode","update_mode_seconds","pro_perm","source","source2","pricescale","minmov","fractional","visible-plots-set","local_description","language","underlying-symbol"]),n=(0,o.lazyValue)((()=>new i.QuoteSessionSnapshoter({name:"basic-symbol-quotes",fields:[...a]}))),r=new Set(["pro_name"]);async function d(e){return(0,l.isSeparatorItem)(e)?e:n().getSnapshot(e,r).then((e=>"error"===e.status?e.symbolname:e.values.pro_name))}function u(e){return Promise.all(e.map(d))}function c(e){return u(e).then((e=>[...new Set(e)]))}},607546:(e,t,s)=>{"use strict";s.d(t,{getLogoUrlsHook:()=>i.getLogoUrlsHook,removeUsdFromCryptoPairLogos:()=>i.removeUsdFromCryptoPairLogos,resolveLogoUrls:()=>i.resolveLogoUrls});var i=s(526639)},439378:(e,t,s)=>{"use strict";s.d(t,{getBlockStyleClasses:()=>i.getBlockStyleClasses,getLogoStyleClasses:()=>i.getLogoStyleClasses});var i=s(115078)},526639:(e,t,s)=>{"use strict";s.d(t,{getLogoUrlsHook:()=>a,removeUsdFromCryptoPairLogos:()=>n,resolveLogoUrls:()=>l});var i=s(849204);const o=(0,i.getLogoUrlResolver)();function l(e,t=i.LogoSize.Medium){const s=e.logoid,l=e["base-currency-logoid"],a=e["currency-logoid"],n=s&&o.getSymbolLogoUrl(s,t);if(n)return[n];const r=l&&o.getSymbolLogoUrl(l,t),d=a&&o.getSymbolLogoUrl(a,t);return r&&d?[r,d]:r?[r]:d?[d]:[]}function a(e,t){let s=!1;return(i,o,a)=>{const r=i["currency-logoid"]&&i["base-currency-logoid"];if(!s&&(i.logoid||r||a)){s=!0;const o=n(l({logoid:i.logoid,"base-currency-logoid":i["base-currency-logoid"],"currency-logoid":i["currency-logoid"]},t));e(o)}}}function n(e){return 2!==e.length?e:function(e){return e.some((e=>r(e)))}(e)&&!function(e){return e.some((e=>e.includes("country")&&!r(e)))}(e)?e.filter((e=>!r(e))):e}function r(e){return e.includes("country/US")}},495217:(e,t,s)=>{"use strict";s.d(t,{CircleLogo:()=>i.CircleLogo,hiddenCircleLogoClass:()=>i.hiddenCircleLogoClass});var i=s(884566)},783036:(e,t,s)=>{"use strict";s.d(t,{getStyleClasses:()=>i.getStyleClasses});var i=s(842060)},
948019:(e,t,s)=>{"use strict";s.d(t,{ContextMenuContext:()=>i});const i=s(50959).createContext(null)},582997:(e,t,s)=>{"use strict";s.d(t,{Hint:()=>n});var i=s(50959),o=s(497754),l=s.n(o),a=s(447429);function n(e){const{text:t="",className:s}=e;return i.createElement("span",{className:l()(a.shortcut,s)},t)}},886004:(e,t,s)=>{"use strict";s.d(t,{ContextMenuItem:()=>_});var i=s(50959),o=s(497754),l=s.n(o),a=s(79205),n=s(265005),r=s(302478),d=s(582997),u=s(339750),c=s(379978),h=s(460925),p=s(405264);function _(e){const{className:t,isTitle:s,isLoading:o,isHovered:_,active:m,checkable:g,disabled:b,checked:v,icon:w,iconChecked:S,hint:y,subItems:f,label:C,styledLabel:E,onClick:M,children:x,toolbox:k,jsxLabel:V,size:L="normal"}=e,A=(0,i.useContext)(r.EmptyIconsContext),W=!!f.length;return o?i.createElement("li",{className:l()(t,p.item,p.loading,p[L])},i.createElement(n.Loader,null)):i.createElement("li",{className:l()(t,p.item,p.interactive,s&&p.title,b&&p.disabled,_&&p.hovered,m&&p.active,A&&p.emptyIcons,p[L]),onClick:M},i.createElement(a.Icon,{className:l()(p.icon),icon:function(){if(g&&v)return S||w||u;return w}()}),i.createElement("span",{className:l()(p.label)},!V&&E?E.map((({text:e,...t},s)=>i.createElement("span",{key:s,style:t},e))):V??C),!!k&&i.createElement(a.Icon,{onClick:function(){k&&k.action()},className:p.remove,icon:h}),!W&&y&&i.createElement(d.Hint,{className:p.shortcut,text:y}),W&&i.createElement(a.Icon,{className:p.nested,icon:c}),x)}},67812:(e,t,s)=>{"use strict";s.d(t,{ContextMenuList:()=>_});var i=s(50959),o=s(868745);function l(e){return i.createElement("li",{className:o.separator})}var a=s(886004),n=s(125226),r=s(762852),d=s(224743);const u=(0,n.isFeatureEnabled)("force_disable_jsx_menu_items_rendering");function c(e){const t=u?e.action:e.action.custom()??e.action,[s,o]=(0,i.useState)((()=>t.getState())),[l,n]=(0,i.useState)(!1),c=!!s.subItems.length,h=c&&l;return(0,i.useEffect)((()=>{const e=()=>o(t.getState());return t.onUpdate().subscribe(null,e),()=>{t.onUpdate().unsubscribe(null,e)}}),[]),i.createElement(a.ContextMenuItem,{...s,onClick:function(e){if(s.disabled||e.defaultPrevented)return;if(c)return void n(!0);s.doNotCloseOnClick||(0,d.globalCloseMenu)();t.execute()},isLoading:s.loading,isHovered:h},h&&i.createElement(r.Drawer,{onClose:p},i.createElement(_,{items:s.subItems,parentAction:t,closeNested:p})));function p(e){e&&e.preventDefault(),n(!1)}}var h=s(302478),p=s(366493);function _(e){const{items:t,parentAction:s,closeNested:o}=e,n=!Boolean(s)&&t.every((e=>!Boolean("separator"!==e.type&&(e.getState().icon||e.getState().checkable))));return i.createElement(h.EmptyIconsContext.Provider,{value:n},i.createElement("ul",null,s&&i.createElement(i.Fragment,null,i.createElement(a.ContextMenuItem,{label:s.getState().label,isTitle:!0,active:!1,disabled:!1,subItems:[],checkable:!1,checked:!1,doNotCloseOnClick:!1,icon:p,onClick:o}),i.createElement(l,null)),t.map((e=>{switch(e.type){case"action":return i.createElement(c,{key:e.id,action:e});case"separator":return i.createElement(l,{key:e.id})}}))))}},
302478:(e,t,s)=>{"use strict";s.d(t,{EmptyIconsContext:()=>i});const i=s(50959).createContext(!1)},332585:(e,t,s)=>{"use strict";s.d(t,{DrawerContext:()=>a,DrawerManager:()=>l});var i=s(50959),o=s(575658);class l extends i.PureComponent{constructor(e){super(e),this._isBodyFixed=!1,this._addDrawer=e=>{this.setState((t=>({stack:[...t.stack,e]})))},this._removeDrawer=e=>{this.setState((t=>({stack:t.stack.filter((t=>t!==e))})))},this.state={stack:[]}}componentDidUpdate(e,t){!t.stack.length&&this.state.stack.length&&((0,o.setFixedBodyState)(!0),this._isBodyFixed=!0),t.stack.length&&!this.state.stack.length&&this._isBodyFixed&&((0,o.setFixedBodyState)(!1),this._isBodyFixed=!1)}componentWillUnmount(){this.state.stack.length&&this._isBodyFixed&&(0,o.setFixedBodyState)(!1)}render(){return i.createElement(a.Provider,{value:{addDrawer:this._addDrawer,removeDrawer:this._removeDrawer,currentDrawer:this.state.stack.length?this.state.stack[this.state.stack.length-1]:null}},this.props.children)}}const a=i.createContext(null)},762852:(e,t,s)=>{"use strict";s.d(t,{Drawer:()=>h});var i=s(50959),o=s(650151),l=s(497754),a=s(623213),n=s(707533),r=s(332585),d=s(320116),u=s(150881),c=s(276773);function h(e){const{position:t="Bottom",onClose:s,children:u,reference:h,className:_,theme:m=c}=e,g=(0,o.ensureNotNull)((0,i.useContext)(r.DrawerContext)),[b]=(0,i.useState)((()=>(0,a.randomHash)())),v=(0,i.useRef)(null),w=(0,i.useContext)(d.CloseDelegateContext);return(0,i.useLayoutEffect)((()=>((0,o.ensureNotNull)(v.current).focus({preventScroll:!0}),w.subscribe(g,s),g.addDrawer(b),()=>{g.removeDrawer(b),w.unsubscribe(g,s)})),[]),i.createElement(n.Portal,null,i.createElement("div",{ref:h,className:l(c.wrap,c[`position${t}`])},b===g.currentDrawer&&i.createElement("div",{className:c.backdrop,onClick:s}),i.createElement(p,{className:l(m.drawer,c[`position${t}`],_),ref:v,"data-name":e["data-name"],"data-qa-id":e["data-qa-id"]},u)))}const p=(0,i.forwardRef)(((e,t)=>{const{className:s,...o}=e;return i.createElement(u.TouchScrollContainer,{className:l(c.drawer,s),tabIndex:-1,ref:t,...o})}))},368337:(e,t,s)=>{"use strict";s.d(t,{makeOverlapable:()=>l});var i=s(50959),o=s(707533);function l(e,t){return class extends i.PureComponent{render(){const{isOpened:s,root:l}=this.props;if(!s)return null;const a=i.createElement(e,{...this.props,ref:this.props.componentRef,zIndex:150});return"parent"===l?a:i.createElement(o.Portal,{shouldTrapFocus:t},a)}}}},320116:(e,t,s)=>{"use strict";s.d(t,{CloseDelegateContext:()=>l});var i=s(50959),o=s(224743);const l=i.createContext(o.globalCloseDelegate)},707533:(e,t,s)=>{"use strict";s.d(t,{Portal:()=>i.Portal,PortalContext:()=>i.PortalContext});var i=s(910958)},670797:(e,t,s)=>{"use strict";s.d(t,{Slot:()=>i.Slot,SlotContext:()=>i.SlotContext});var i=s(474647)},12173:(e,t,s)=>{"use strict";s.d(t,{TooltipWidget:()=>u,TooltipWizard:()=>d});var i=s(50959),o=s(497754),l=s(79205),a=s(707533),n=s(333765),r=s(743970);class d extends i.PureComponent{render(){
const{children:e,popperChildrenProps:t,onClose:s,reference:l,containerClassName:n,arrowClassName:d,role:c}=this.props;return i.createElement(a.Portal,null,i.createElement("div",{ref:l},i.createElement(u,{reference:t.ref,style:t.style,arrowClassName:o(r.arrowHolder,this._getArrowDirectionClass(),d),arrowReference:t.arrowProps.ref,arrowStyle:t.arrowProps.style,"data-placement":t.placement,onClose:s,containerClassName:n,role:c},e)))}_getArrowDirectionClass(){const{popperChildrenProps:e}=this.props;switch(e.placement){case"left":case"left-start":return o(r["arrowHolder--after"],r["arrowHolder--after-ltr-fix"]);case"top":return o(r["arrowHolder--above"],r["arrowHolder--above-fix"]);case"bottom":case"bottom-start":case"bottom-end":return r["arrowHolder--below"];default:return o(r["arrowHolder--before"],r["arrowHolder--before-rtl-fix"])}}}function u(e){const{className:t,containerClassName:s,contentClassName:a,reference:d,style:u,arrow:c=!0,arrowClassName:h,arrowReference:p,onClose:_,arrowStyle:m,children:g,role:b,...v}=e;return i.createElement("div",{...v,className:t,ref:d,style:u,"data-role":b},c&&i.createElement("div",{className:h,ref:p,style:m}),i.createElement("div",{className:o(r.container,s)},i.createElement("div",{className:o(r.content,a)},g),_&&i.createElement(l.Icon,{className:r.closeButton,icon:n,onClick:_})))}},934359:e=>{e.exports={}},333898:e=>{e.exports={legendActionButton:"legendActionButton-ZR5j_8g1"}},872206:e=>{e.exports={marginlegendhoriz:"4px",legend:"legend-l31H9iuA",legend_withHiddenActions:"legend_withHiddenActions-l31H9iuA",item:"item-l31H9iuA",hideInvisibleHover:"hideInvisibleHover-l31H9iuA",button:"button-l31H9iuA",buttons:"buttons-l31H9iuA",withAction:"withAction-l31H9iuA",selected:"selected-l31H9iuA",last:"last-l31H9iuA",statusesWrapper:"statusesWrapper-l31H9iuA",statusesWrapper__statuses:"statusesWrapper__statuses-l31H9iuA",text:"text-l31H9iuA",noWrapWrapper:"noWrapWrapper-l31H9iuA",noWrap:"noWrap-l31H9iuA",series:"series-l31H9iuA",valuesAdditionalWrapper:"valuesAdditionalWrapper-l31H9iuA",valueItem:"valueItem-l31H9iuA",valueTitle:"valueTitle-l31H9iuA",valueValue:"valueValue-l31H9iuA",hideUniportantValueItems:"hideUniportantValueItems-l31H9iuA",unimportant:"unimportant-l31H9iuA",valuesWrapper:"valuesWrapper-l31H9iuA",wrappable:"wrappable-l31H9iuA",directionColumn:"directionColumn-l31H9iuA",titlesWrapper:"titlesWrapper-l31H9iuA",logoWrapper:"logoWrapper-l31H9iuA",buttonsWrapper:"buttonsWrapper-l31H9iuA",pairContainer:"pairContainer-l31H9iuA",logo:"logo-l31H9iuA",hidden:"hidden-l31H9iuA",noActions:"noActions-l31H9iuA",titlesGroupWrapper:"titlesGroupWrapper-l31H9iuA",titleWrapper:"titleWrapper-l31H9iuA",title:"title-l31H9iuA",withDot:"withDot-l31H9iuA",accessible:"accessible-l31H9iuA",disabled:"disabled-l31H9iuA",disabledOnInterval:"disabledOnInterval-l31H9iuA",withCustomTextColor:"withCustomTextColor-l31H9iuA",study:"study-l31H9iuA",mainTitle:"mainTitle-l31H9iuA",inputTitle:"inputTitle-l31H9iuA",hideValues:"hideValues-l31H9iuA",has5Buttons:"has5Buttons-l31H9iuA",
stayInHoveredMode:"stayInHoveredMode-l31H9iuA",withTail:"withTail-l31H9iuA",loader:"loader-l31H9iuA",descTitle:"descTitle-l31H9iuA",intervalTitle:"intervalTitle-l31H9iuA",providerTitle:"providerTitle-l31H9iuA",exchangeTitle:"exchangeTitle-l31H9iuA",styleTitle:"styleTitle-l31H9iuA",priceSourceTitle:"priceSourceTitle-l31H9iuA",flagged:"flagged-l31H9iuA",medium:"medium-l31H9iuA",minimized:"minimized-l31H9iuA",micro:"micro-l31H9iuA",linked:"linked-l31H9iuA",onlyOneButtonCanBeStick:"onlyOneButtonCanBeStick-l31H9iuA",touchMode:"touchMode-l31H9iuA",buttonIcon:"buttonIcon-l31H9iuA",flag:"flag-l31H9iuA",eye:"eye-l31H9iuA",eyeLoading:"eyeLoading-l31H9iuA","eye-animation":"eye-animation-l31H9iuA",linking:"linking-l31H9iuA",intervalEye:"intervalEye-l31H9iuA",markerContainer:"markerContainer-l31H9iuA",flagWrapper:"flagWrapper-l31H9iuA",sourcesWrapper:"sourcesWrapper-l31H9iuA",legendMainSourceWrapper:"legendMainSourceWrapper-l31H9iuA",sources:"sources-l31H9iuA",togglerWrapper:"togglerWrapper-l31H9iuA",toggler:"toggler-l31H9iuA pane-button-e6PF69Df",onlyOneSourceShown:"onlyOneSourceShown-l31H9iuA",counter:"counter-l31H9iuA",iconArrow:"iconArrow-l31H9iuA",objectTree:"objectTree-l31H9iuA",closed:"closed-l31H9iuA",saveArrowWidth:"saveArrowWidth-l31H9iuA",objectsTreeCanBeShown:"objectsTreeCanBeShown-l31H9iuA"}},244784:e=>{e.exports={"css-value-pane-controls-padding":"4px",css_value_pane_controls_margin_top:"4",css_value_pane_controls_button_size:"22",css_value_pane_controls_button_touch_size:"22",paneControls:"paneControls-JQv8nO8e",paneControls_hidden:"paneControls_hidden-JQv8nO8e",paneControls_forceHidden:"paneControls_forceHidden-JQv8nO8e",buttons:"buttons-JQv8nO8e",button:"button-JQv8nO8e",button_activated:"button_activated-JQv8nO8e",touchMode:"touchMode-JQv8nO8e",maximize:"maximize-JQv8nO8e",collapse:"collapse-JQv8nO8e","maximize-animation-up-bracket":"maximize-animation-up-bracket-JQv8nO8e","maximize-animation-down-bracket":"maximize-animation-down-bracket-JQv8nO8e",minimize:"minimize-JQv8nO8e",restore:"restore-JQv8nO8e","minimize-animation-up-bracket":"minimize-animation-up-bracket-JQv8nO8e","minimize-animation-down-bracket":"minimize-animation-down-bracket-JQv8nO8e",up:"up-JQv8nO8e",buttonIcon:"buttonIcon-JQv8nO8e","up-animation":"up-animation-JQv8nO8e",down:"down-JQv8nO8e","down-animation":"down-animation-JQv8nO8e"}},233465:e=>{e.exports={blockHidden:"blockHidden-e6PF69Df","pane-button":"pane-button-e6PF69Df"}},559418:e=>{e.exports={wrapper:"wrapper-ErqpypKO",wrapError:"wrapError-ErqpypKO",clickedAnim:"clickedAnim-ErqpypKO",errorText:"errorText-ErqpypKO",wrapStackTrace:"wrapStackTrace-ErqpypKO",editorButton:"editorButton-ErqpypKO"}},46362:e=>{e.exports={toolbar:"toolbar-VQ6OX8yq",link:"link-VQ6OX8yq"}},366669:e=>{e.exports={defaultedStatus:"defaultedStatus-HvaSCdHf"}},435585:e=>{e.exports={halalStatus:"halalStatus-GdQ2KW8H"}},878764:e=>{e.exports={hkexComment:"hkexComment-BzC4QhWx"}},502661:e=>{e.exports={letItSnowStatus:"letItSnowStatus-cDgoKejf"}},554103:e=>{e.exports={tvCalculatedPair:"tvCalculatedPair-PeUawjal"}},
862170:(e,t,s)=>{"use strict";s.d(t,{QuoteSessionSnapshoter:()=>u});var i=s(547465),o=s(904653),l=s(623213),a=s(778003),n=s(235267),r=s(207815);const d=new Map([["change","ch"],["last_price","lp"],["change_percent","chp"],["update_mode_seconds",null]]);new Map([["ch","change"],["lp","last_price"],["chp","change_percent"]]);class u{constructor(e){if(this._onSymbolData=new i.Delegate,this._incomplete=new Set,this._connected=!1,this._batcher=null,this._handler=e=>{switch(e.method){case"connected":this._connected||(this._connected=!0,this._handleConnected());break;case"quote_symbol_data":this._connected&&this._handleSymbolData(e.params[0]);break;case"quote_completed":this._connected&&this._handleCompleteData(e.params[0]);break;case"disconnected":this._connected&&(this._connected=!1,this._batcher=null)}},0===e.fields.length)throw new Error('Support for empty "fields" array is not implemented');const{provider:t=n.QuoteSession}=e;this._fields=new Set(e.fields),this._session=new t(window.ChartApiInstance,["snapshoter",e.name,(0,l.randomHash)()].filter(Boolean).join("_")),this._session.connect(this._handler)}getSnapshotSync(e,t){const s=u.cache.get(e);return s&&this._isSnapshotReady(s,t)?s:null}getSnapshotsForAllSync(e,t){return e.map((e=>this.getSnapshotSync(e,t)))}getSnapshot(e,t,s){const i=s?.signal??null;return new Promise(((s,l)=>{if(i&&i.aborted)throw(0,o.createAbortError)();const a=()=>{this._onSymbolData.unsubscribe(this,n),l((0,o.createAbortError)())},n=(o=e)=>{if(o!==e)return!1;const l=u.cache.get(e);return!(!l||!this._isSnapshotReady(l,t))&&(this._onSymbolData.unsubscribe(this,n),i?.removeEventListener("abort",a),s(l),!0)};if(!n()&&(i?.addEventListener("abort",a,{once:!0}),this._onSymbolData.subscribe(this,n),!this._incomplete.has(e))){if(this._incomplete.add(e),!this._connected)return;if(null===this._batcher){const t=this._batcher={symbols:new Set([e]),promise:Promise.resolve().then((()=>{this._batcher===t&&(this._session.quoteAddSymbols([...t.symbols]),this._batcher=null)}))}}else this._batcher.symbols.add(e)}}))}getSnapshotsForAll(e,t,s){return Promise.all(e.map((e=>this.getSnapshot(e,t,s))))}static relax(e){return e}static isSuccess(e){return"error"!==e.status}static hasAllFields(e,t){for(const s of Array.from(t))if(!e.hasOwnProperty(s))return!1;return!0}_isSnapshotReady(e,t){return"error"===e.status||this._hasAllFields(e,t)}_hasAllFields(e,t){return u.hasAllFields(e.values,Array.from(t))}_handleConnected(){if(this._fields.size>0){const e=[...this._fields].flatMap((e=>{const t=d.get(e);return null!==t?t??e:[]}));this._session.quoteSetFields(e)}this._incomplete.size>0&&this._session.quoteAddSymbols([...this._incomplete])}_handleCompleteData(e){const t=u.cache.get(e)??{symbolname:e,status:"ok",values:{}};u.cache.update(t,this._fields,!0),this._session.quoteRemoveSymbols([e]),this._incomplete.delete(e),this._onSymbolData.fire(e)}_handleSymbolData(e){(0,a.normalizeUpdateMode)(e.values);const t=e.symbolname;u.cache.update(e,this._fields,!1),"error"===e.status?this._handleCompleteData(t):this._onSymbolData.fire(t)}}
u.cache=r.QUOTE_FIELDS_CACHE},438768:(e,t,s)=>{"use strict";s.d(t,{getImage:()=>l});const i=new Map;function o(e){e.crossOrigin="anonymous"}function l(e,t,s=o){let l=i.get(e);return void 0===l&&(l=new Promise(((e,i)=>{const o=new Image;o.onload=()=>{e(o),o.onload=null,o.onerror=null},o.onerror=()=>{i(),o.onload=null,o.onerror=null},s(o),o.src=t})),i.set(e,l)),l}},432438:(e,t,s)=>{"use strict";function i(e){e.dispatchEvent(new CustomEvent("roving-tabindex:main-element"))}function o(e){e.dispatchEvent(new CustomEvent("roving-tabindex:secondary-element"))}s.d(t,{becomeMainElement:()=>i,becomeSecondaryElement:()=>o})},887208:(e,t,s)=>{"use strict";s.d(t,{mapKeyCodeToDirection:()=>d,navigationOrderComparator:()=>l,queryFocusableElements:()=>n,queryTabbableElements:()=>a,updateTabIndexes:()=>r});var i=s(969680),o=s(355734);function l(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}function a(e){return Array.from(e.querySelectorAll('button:not([disabled]):not([aria-disabled]):not([tabindex="-1"]), [tabindex]:not([disabled]):not([aria-disabled]):not([tabindex="-1"])')).filter((0,o.createScopedVisibleElementFilter)(e))}function n(e){return Array.from(e.querySelectorAll('button:not([disabled]):not([aria-disabled="true"]):not([aria-disabled=""]), [tabindex]:not([disabled]):not([aria-disabled="true"]):not([aria-disabled=""])')).filter((0,o.createScopedVisibleElementFilter)(e))}function r(){window.dispatchEvent(new CustomEvent("keyboard-navigation-activation",{bubbles:!0}))}function d(e){const t=(0,i.isRtl)();switch(e){case 38:return"blockPrev";case 40:return"blockNext";case 37:return t?"inlineNext":"inlinePrev";case 39:return t?"inlinePrev":"inlineNext";default:return null}}},800587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ControlBarNavigation:()=>J});var i=s(650151),o=s(444372),l=s(778785),a=s(931924),n=s(68777),r=s(941376),d=s(969680),u=s(760863),c=s(626185),h=s(604286),p=s(638456),_=s(470316),m=s(388741),g=s(345848),b=s(850775),v=s(23317),w=s(689612),S=s(577576),y=s(593724),f=s(964146),C=s(776996),E=s(678529),M=s(50119),x=s(362884),k=s(250662),V=s(542205);s(934359);const L=(0,_.humanReadableModifiers)(_.Modifiers.Alt,!1),A=(0,_.humanReadableModifiers)(_.Modifiers.Shift,!1),W=(0,_.humanReadableModifiers)(_.Modifiers.Mod,!1),T=(0,h.hotKeySerialize)({keys:[L,"R"],text:"{0} + {1}"}),B=(0,h.hotKeySerialize)({keys:[L,"Click",L,"Enter"],text:"{0} + {1}, {2} + {3}"}),H=(0,h.hotKeySerialize)({keys:[M],text:"{0}"}),D=(0,h.hotKeySerialize)({keys:[x],text:"{0}"}),I=(0,h.hotKeySerialize)({keys:[W,k],text:"{0} + {1}"}),P=(0,h.hotKeySerialize)({keys:[W,V],text:"{0} + {1}"}),N=(0,h.hotKeySerialize)({keys:[L,A,x],text:"{0} + {1} + {2}"
}),R=o.t(null,void 0,s(188710)),O=o.t(null,void 0,s(297038)),z=o.t(null,void 0,s(461206)),F=o.t(null,void 0,s(631142)),U=o.t(null,void 0,s(590761)),G=o.t(null,void 0,s(825131)),Z=o.t(null,void 0,s(575246)),q=o.t(null,void 0,s(983040)),j=`<div class="control-bar-wrapper">\n\t<div class="control-bar control-bar--hidden">\n\t\t<div class="control-bar__group js-btn-group js-btn-group-zoom">\n\t\t\t<div class="control-bar__btn control-bar__btn--zoom-out apply-common-tooltip" title="${R}" data-tooltip-hotkey="${P}">\n\t\t\t\t${v}\n\t\t\t</div>\n\t\t\t<div class="control-bar__btn control-bar__btn--zoom-in apply-common-tooltip" title="${O}" data-tooltip-hotkey="${I}">\n\t\t\t\t${S}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="control-bar__group js-btn-group js-btn-group-maximize">\n\t\t\t<div class="control-bar__btn control-bar__btn--maximize apply-common-tooltip" title="${z}" data-tooltip-hotkey="${B}">\n\t\t\t\t${f}\n\t\t\t</div>\n\t\t\t<div class="control-bar__btn control-bar__btn--minimize js-hidden apply-common-tooltip" title="${F}" data-tooltip-hotkey="${B}">\n\t\t\t\t${C}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="control-bar__group js-btn-group js-btn-group-scroll">\n\t\t\t<div class="control-bar__btn control-bar__btn--move-left apply-common-tooltip" title="${U}" data-tooltip-hotkey="${H}">\n\t\t\t\t${w}\n\t\t\t</div>\n\t\t\t<div class="control-bar__btn control-bar__btn--move-right apply-common-tooltip" title="${G}" data-tooltip-hotkey="${D}">\n\t\t\t\t${w}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="control-bar__group js-btn-group js-btn-group-reset-scale">\n\t\t\t<div class="control-bar__btn control-bar__btn--turn-button control-bar__btn--btn-hidden apply-common-tooltip js-btn-reset" title="${Z}" data-tooltip-hotkey="${T}">\n\t\t\t\t${y}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>`,X=`<div class="control-bar-wrapper control-bar-wrapper--back-present">\n\t<div class="control-bar control-bar__btn control-bar__btn--btn-hidden apply-common-tooltip" title="${q}" data-tooltip-hotkey="${N}">\n\t\t${E}\n\t</div>\n</div>`,Q=p.CheckMobile.any(),K="control-bar__btn--btn-hidden",$={zoomInOut:!0,maximize:!0,scrollLeftRight:!0,resetScale:!0,goToRealtime:!0};class J{constructor(e,t,s){this._widget=(0,i.ensureNotNull)((0,u.parseHtml)(j).querySelector(".control-bar-wrapper")),this._controlBar=(0,i.ensureNotNull)(this._widget.querySelector(".control-bar")),this._back=(0,i.ensureNotNull)((0,u.parseHtml)(X).querySelector(".control-bar-wrapper")),this._btnGroups=Array.from(this._controlBar.querySelectorAll(".js-btn-group")),this._targetPaneWidget=null,this._backButtonVisible=!1,this._backButtonCanBeVisible=!1,this._boundMouseHandler=null,this._chartModel=null,this._controlBarVisible=!1,this._priceAxisChanged=null,this._resetScalesAvailable=null,this._priceAxisName="right",this._rafId=null,this._visibilityTypeProperty=null,this._boundUpdateMaximizeButtonsVisibility=this._updateMaximizeButtonsVisibility.bind(this),this._boundToggleFullscreenButtons=this._toggleFullscreenButtons.bind(this),this._paneWidth=0,this._leftPriceScaleWidth=0,
this._rightPriceScaleWidth=0,this._onVisibilityTypeChange=e=>{"alwaysOn"===e||"alwaysOff"===e?(this._controlBarVisible="alwaysOn"===e,this._parent.removeEventListener("mousemove",this._controlsBarVisibilityHandler,!1),this._parent.removeEventListener("mouseleave",this._controlsBarVisibilityHandler,!1)):(this._controlBarVisible=!1,this._parent.addEventListener("mousemove",this._controlsBarVisibilityHandler),this._parent.addEventListener("mouseleave",this._controlsBarVisibilityHandler)),this._configureBackButtonVisibility(e),this._updateControlBarVisibility()},this._visibilityBackButtonHandler=e=>{const t=this._checkIsPointerNearBox(e,this._back.getBoundingClientRect());void 0!==t&&this._backButtonCanBeVisible!==t&&(this._backButtonCanBeVisible=t,this._setRAF())},this._controlsBarVisibilityHandler=e=>{const t=this._checkIsPointerNearBox(e,this._controlBar.getBoundingClientRect());void 0!==t&&this._controlBarVisible!==t&&(this._controlBarVisible=t,this._setRAF())},this._updateControlBarVisibility=()=>{this._controlBar.classList.toggle("control-bar--hidden",!this._controlBarVisible)},this._chart=e,this._parent=t,this._options=Object.assign({},$,s),this._visibilityPrioritizedGroups=this._initGroupDescriptions(),this._init(),this._initHandlers(),this.updatePosition()}destroy(){null!==this._visibilityTypeProperty&&(this._visibilityTypeProperty.destroy(),this._visibilityTypeProperty=null),null!==this._boundMouseHandler&&(this._parent.removeEventListener("mousemove",this._boundMouseHandler,!1),this._parent.removeEventListener("mouseleave",this._boundMouseHandler,!1),this._boundMouseHandler=null),null!==this._priceAxisChanged&&(this._priceAxisChanged.unsubscribe(this,this._updateBackBtnPosition),this._priceAxisChanged=null),clearInterval(this._checkIntervalId),this._resetScalesAvailable?.destroy();const e=this._chart.getResizerDetacher();e.fullscreenable.unsubscribe(this._boundUpdateMaximizeButtonsVisibility),e.fullscreen.unsubscribe(this._boundToggleFullscreenButtons),this._chart=null}updatePosition(){const e=this._targetPaneWidget=this._getTargetPaneWidget();if(null===e)return;const t=e.getElement().querySelector(".chart-markup-table .pane");if(null===t)return;this._paneWidth=e.width(),this._leftPriceScaleWidth=this._chart.getPriceAxisMaxWidthByName("left"),this._rightPriceScaleWidth=this._chart.getPriceAxisMaxWidthByName("right");const s=this._parent.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom+this._bottomMargin(e);this._widget.style.bottom=`${s}px`,this._back.style.bottom=`${s}px`,this._updateBtnGroupVisibility()}_getTargetPaneWidget(){const e=this._chart.maximizedPaneWidget();if(e)return e;const t=[...this._chart.paneWidgets()].reverse();for(const e of t)if(e.height()>=this._widget.clientHeight+28+this._bottomMargin(e))return e;return null}_bottomMargin(e){return e.containsMainSeries()?27:0}_init(){if(p.CheckMobile.any())for(const e of this._btnGroups)e.classList.add("js-hidden");this._buttons={zoomIn:this._widget.querySelector(".control-bar__btn--zoom-in"),
zoomOut:this._widget.querySelector(".control-bar__btn--zoom-out"),moveLeft:this._widget.querySelector(".control-bar__btn--move-left"),moveRight:this._widget.querySelector(".control-bar__btn--move-right"),turn:this._widget.querySelector(".control-bar__btn--turn-button"),maximize:this._widget.querySelector(".control-bar__btn--maximize"),minimize:this._widget.querySelector(".control-bar__btn--minimize")},this._parent.appendChild(this._widget),this._parent.appendChild(this._back),this._priceAxisName=(0,d.isRtl)()?"left":"right",this._chart.withModel(this,(()=>{this._chartModel=this._chart.model(),this._initVisibility(),this._priceAxisChanged=this._chart.getPriceAxisWidthChangedByName(this._priceAxisName),this._priceAxisChanged.subscribe(this,this._updateBackBtnPosition),this._resetScalesAvailable=this._chartModel.model().resetScalesAvailable().spawn(),this._resetScalesAvailable.subscribe(this._updateResetScalesButtonVisibility.bind(this),{callWithLast:!0});const e=this._chart.getResizerDetacher();e.fullscreenable.subscribe(this._boundUpdateMaximizeButtonsVisibility),e.fullscreen.subscribe(this._boundToggleFullscreenButtons),this._updateMaximizeButtonsVisibility(),this._updateBackBtnPosition(),this._back.querySelector(".control-bar__btn")?.addEventListener("click",(()=>{this._chart.scrollHelper().scrollToRealtime(!0,(()=>this._checkBackButtonVisibility()))}))}))}_initHandlers(){const e=l.mobiletouch?"touchstart":"mousedown",t=l.mobiletouch?["touchend"]:["mouseup","mouseout"];this._buttons.moveLeft.addEventListener(e,(e=>{e.preventDefault(),this._chart.scrollHelper().moveByBar(1),this._trackEvent("Move Left")})),this._buttons.moveRight.addEventListener(e,(e=>{e.preventDefault(),this._chart.scrollHelper().moveByBar(-1),this._trackEvent("Move Right")}));for(const e of t)this._buttons.moveLeft.addEventListener(e,(()=>this._chart.scrollHelper().stopMove())),this._buttons.moveRight.addEventListener(e,(()=>this._chart.scrollHelper().stopMove()));this._buttons.turn.addEventListener("click",(e=>{e.preventDefault(),this._chart.GUIResetScales(),this._trackEvent("Reset to Default Settings")})),this._buttons.zoomOut.addEventListener("click",(e=>{e.preventDefault(),null!==this._chartModel&&this._chartModel.zoomOut(),this._trackEvent("Zoom Out")})),this._buttons.zoomIn.addEventListener("click",(e=>{e.preventDefault(),null!==this._chartModel&&this._chartModel.zoomIn(),this._trackEvent("Zoom In")})),this._buttons.maximize.addEventListener("click",(e=>{e.preventDefault(),this._chart.setActive(!0),this._chart.getResizerDetacher().requestFullscreen(),this._trackEvent(" Maximize Chart")})),this._buttons.minimize.addEventListener("click",(e=>{e.preventDefault(),this._chart.getResizerDetacher().exitFullscreen(),this._trackEvent(" Restore Chart")}));const s=e=>e.addEventListener("contextmenu",(e=>e.preventDefault()));s(this._buttons.moveLeft),s(this._buttons.moveRight),s(this._buttons.turn),s(this._buttons.zoomOut),s(this._buttons.zoomIn),s(this._buttons.minimize),s(this._buttons.maximize)}_initGroupDescriptions(){return[{
shouldBeHiddenOnMobile:!1,available:this._isMaximizeButtonAvailable.bind(this),className:"js-btn-group-maximize",element:this._getBtnGroup("js-btn-group-maximize"),totalWidth:50},{shouldBeHiddenOnMobile:!1,available:()=>this._options.resetScale,className:"js-btn-group-reset-scale",element:this._getBtnGroup("js-btn-group-reset-scale"),totalWidth:50},{shouldBeHiddenOnMobile:!a.enabled("show_zoom_and_move_buttons_on_touch"),available:()=>this._options.zoomInOut,className:"js-btn-group-zoom",element:this._getBtnGroup("js-btn-group-zoom"),totalWidth:86},{shouldBeHiddenOnMobile:!a.enabled("show_zoom_and_move_buttons_on_touch"),available:()=>this._options.scrollLeftRight,className:"js-btn-group-scroll",element:this._getBtnGroup("js-btn-group-scroll"),totalWidth:86}]}_checkBackButtonVisibility(){if(null===this._chartModel||!this._options.goToRealtime)return;const e=this._backButtonCanBeVisible&&this._chartModel.timeScale().rightOffset()<0;e!==this._backButtonVisible&&(this._backButtonVisible=e,this._back.querySelector(".control-bar__btn")?.classList.toggle(K,!this._backButtonVisible))}_initVisibility(){this._visibilityTypeProperty=(0,n.combine)(((e,t)=>null!==t?"alwaysOff":e),(0,c.convertPropertyToWatchedValue)((0,r.actualBehavior)()).ownership(),(0,m.getSeriesDisplayErrorWV)((0,i.ensureNotNull)(this._chartModel).mainSeries()).ownership()),this._visibilityTypeProperty.subscribe(this._onVisibilityTypeChange,{callWithLast:!0})}_configureBackButtonVisibility(e){"alwaysOff"===e?(clearInterval(this._checkIntervalId),this._checkIntervalId=void 0):this._checkIntervalId=this._checkIntervalId??setInterval((()=>this._checkBackButtonVisibility()),1e3),p.CheckMobile.any()?this._backButtonCanBeVisible="alwaysOff"!==e:"alwaysOn"===e||"alwaysOff"===e?(this._backButtonCanBeVisible="alwaysOn"===e,this._parent.removeEventListener("mousemove",this._visibilityBackButtonHandler,!1),this._parent.removeEventListener("mouseleave",this._visibilityBackButtonHandler,!1)):(this._backButtonCanBeVisible=!1,this._parent.addEventListener("mousemove",this._visibilityBackButtonHandler),this._parent.addEventListener("mouseleave",this._visibilityBackButtonHandler)),this._checkBackButtonVisibility()}_checkIsPointerNearBox(e,t){if(!(e.buttons||null!==this._chartModel&&this._chartModel.lineBeingCreated())){if("mousemove"===e.type){const s=100-(this._targetPaneWidget?this._bottomMargin(this._targetPaneWidget):0);return e.clientX>=t.left-100&&e.clientX<=t.right+100&&e.clientY>=t.top-s&&e.clientY<=t.bottom+100}return!1}}_setRAF(){null===this._rafId&&(this._rafId=this._widget.ownerDocument.defaultView.requestAnimationFrame((()=>{this._checkBackButtonVisibility(),this._updateControlBarVisibility(),this._rafId=null})))}_updateBackBtnPosition(){if("left"===this._priceAxisName||"right"===this._priceAxisName){const e=this._chart.getPriceAxisMaxWidthByName(this._priceAxisName)+14;e&&(this._back.style.marginRight=`${e}px`)}}_updateBtnGroupVisibility(){const e=this._leftPriceScaleWidth+this._paneWidth,t=(e+this._rightPriceScaleWidth)/2
;let s=2*Math.min(e-t,t-this._leftPriceScaleWidth)-50-50,i=!1;for(const e of this._visibilityPrioritizedGroups){e.enoughSpaceForGroup=!1;e.available()&&(!Q||!e.shouldBeHiddenOnMobile)&&(s-=e.totalWidth,e.enoughSpaceForGroup=s>=0&&!i,i=i||!e.enoughSpaceForGroup),!e.enoughSpaceForGroup!==e.element.classList.contains("js-hidden")&&e.element.classList.toggle("js-hidden",!e.enoughSpaceForGroup)}this._updateControlBarPosition()}_getBtnGroup(e){return(0,i.ensureDefined)(this._btnGroups.find((t=>t.classList.contains(e))))}_updateControlBarPosition(){const e=this._visibilityPrioritizedGroups.reduce(((e,t)=>e+(t.enoughSpaceForGroup?t.totalWidth:0)),0),t=(this._paneWidth+this._leftPriceScaleWidth+this._rightPriceScaleWidth)/2-Math.ceil(e/2);this._widget.style.left=`${t}px`}_updateResetScalesButtonVisibility(){if(null===this._chartModel)return;const e=this._chartModel.model().resetScalesAvailable().value();this._buttons.turn.classList.toggle(K,!e)}_updateMaximizeButtonsVisibility(){this._updateBtnGroupVisibility()}_toggleFullscreenButtons(){const e=this._chart.inFullscreen();this._buttons.maximize.classList.toggle("js-hidden",e),this._buttons.minimize.classList.toggle("js-hidden",!e)}_isMaximizeButtonAvailable(){return!!this._options.maximize&&(!!this._chart.getResizerDetacher().fullscreenable.value()&&!b.mediaState.isPhoneSizeDevice())}_trackEvent(e){this._chart.onWidget()||(0,g.trackEvent)("Navigation button",e)}}},25433:(e,t,s)=>{"use strict";s.d(t,{FullSessionScheduleWidget:()=>a});var i=s(50959),o=s(347733),l=s(256042);class a{constructor(e){this._source=e,this._fullSessionScheduleViewModel=new o.FullSessionScheduleViewModel(e)}destroy(){this._fullSessionScheduleViewModel.destroy()}renderer(e,t){const s=this._source.marketStatusModel()?.status().value();return"expired"===s||"delisted"===s?null:(0,i.createElement)(l.FullSessionScheduleRenderer,{key:e,className:t,showAllDays:void 0,sessionDays:this._fullSessionScheduleViewModel.sessionsDays,now:this._fullSessionScheduleViewModel.currentTimeValue(),timezone:this._fullSessionScheduleViewModel.timezone()})}updateSource(e){this._source=e,this._fullSessionScheduleViewModel.destroy(),this._fullSessionScheduleViewModel=new o.FullSessionScheduleViewModel(e)}}},145889:(e,t,s)=>{"use strict";s.d(t,{icons:()=>o});var i=s(378338);const o=[{icon:"",label:i.t(null,void 0,s(132407))},{icon:"",label:i.t(null,void 0,s(820079))},{icon:"",label:i.t(null,void 0,s(69608))},{icon:"",label:i.t(null,void 0,s(857618))},{icon:"",label:i.t(null,void 0,s(842344))}]},38034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LegendWidget:()=>wn});var i=s(871934),o=s(920057),l=s(650151),a=s(68777),n=s(547465),r=s(820028),d=s(536794),u=s(724377),c=s(591800),h=s(940194),p=s(931924),_=s(638456),m=s(176006),g=s(432438),b=s(887208),v=s(479443),w=s(673747),S=s(312520);const y=v.trackingModeIsAvailable?44:28;var f=s(127785),C=s(196726),E=s(390251),M=s(184277),x=s(130551),k=s(534328),V=s(444372),L=s(418450),A=s(345848);function W(e){(0,A.trackEvent)("GUI","Legend action",e)}var T=s(969680),B=s(816433);function H(e){
return(0,x.isObject)(e)&&"items"in e}function D(e){return void 0!==e?k.resetTransparency(e):e}function I(e){return e.hasOwnProperty("touches")}const P=new L.TranslatedString("show {title}",V.t(null,void 0,s(351382))),N=new L.TranslatedString("hide {title}",V.t(null,void 0,s(713017))),R=V.t(null,void 0,s(698334)),O=V.t(null,void 0,s(327298));class z{constructor(e,t,s,i,o){this._titles=new E.WatchedObject([]),this._values=new r.WatchedValue([]),this._actions=[],this._loading=new r.WatchedValue(!1),this._symbolLogoViewModel=new r.WatchedValue(null),this._destroyed=!1,this._moreActionCM=null,this._updateLoadingStatus=()=>{this._loading.setValue(this._source.isLoading())},this._model=e,this._source=t,this._options=s,this._callbacks=i,this._contextMenuOptions=o,this._disabled=new r.WatchedValue(this._getDisabledState()),this._disabledOnInterval=new r.WatchedValue(this._getDisabledOnIntervalState()),this._selected=new r.WatchedValue(!1),this._isTitleHidden=new r.WatchedValue(this._getTitleHiddenValue()),this._isValuesHidden=new r.WatchedValue(this._getValuesHiddenValue()),this._isRowHidden=new r.WatchedValue(this._getRowHiddenValue()),this._isEditable=new r.WatchedValue(this._getIsEditable()),(0,a.combine)(((e,t,s)=>({})),this._isTitleHidden.weakReference(),this._isValuesHidden.weakReference(),this._disabled.weakReference()).subscribe(this._updateRowVisibilities.bind(this)),this._values.subscribe((()=>{this._isValuesHidden.setValue(this._getValuesHiddenValue())}))}destroy(){this._symbolLogoViewModel.value()?.destroy(),this._destroyed=!0}titles(){return this._titles.readonly()}values(){return this._values.readonly()}actions(){return this._actions}disabled(){return this._disabled.readonly()}disabledOnInterval(){return this._disabledOnInterval.readonly()}selected(){return this._selected.readonly()}loading(){return this._loading.readonly()}isTitleHidden(){return this._isTitleHidden.readonly()}isRowHidden(){return this._isRowHidden.readonly()}isEditable(){return this._isEditable.readonly()}symbolLogoViewModel(){return this._symbolLogoViewModel}update(){this._updateTitles(),this._updateValues(),this._updateStates(),this.symbolLogoViewModel()?.value()?.update()}onToggleDisabled(){const e=this._source.properties().childs().visible,t=!e.value();this._model.setProperty(e,t,(t?P:N).format({title:new L.TranslatedString(this._source.name(),this._source.title(B.TitleDisplayTarget.StatusLine))})),W((t?"Show":"Hide")+" source")}onShowSettings(e){this._source.userEditEnabled()&&(this.setSourceSelected(),this._callbacks.showChartPropertiesForSource(this._source,e),W("Settings for source"))}onShowMoreActions(e){return this._options.readOnlyMode?Promise.resolve(null):(W("Show source context menu"),this._callbacks.showContextMenuForSources([this._source],this._calcNewPosition(e),{...this._contextMenuOptions,isKeyboardEvent:!I(e)&&(0,M.isKeyboardClick)(e)},{origin:"LegendPropertiesContextMenu"}))}setSourceSelected(){this._model.selectionMacro((e=>{e.clearSelection(),e.addSourceToSelection(this._source)}))}_moreActionHandler(e){
e.preventDefault(),null!==this._moreActionCM&&this._moreActionCM.isShown()?this._moreActionCM=null:(this.setSourceSelected(),this.onShowMoreActions(e).then((e=>{this._moreActionCM=e})))}_updateStates(){this._disabled.setValue(this._getDisabledState()),this._disabledOnInterval.setValue(this._getDisabledOnIntervalState()),this._selected.setValue(this._model.selection().isSelected(this._source)),this._isEditable.setValue(this._getIsEditable()),this._updateLoadingStatus()}_hasValues(){return this._values.value().length>0}_getEyeTitle(){return this._disabled.value()?R:O}_getIsEditable(){return this._source.userEditEnabled()}_getDisabledState(){return!this._source.properties().visible.value()}_updateRowVisibilities(){this._isRowHidden.setValue(this._getRowHiddenValue())}_getRowHiddenValue(){return this._options.readOnlyMode&&this._disabled.value()||this._isTitleHidden.value()&&(this._isValuesHidden.value()||this._disabled.value())}_calcNewPosition(e){let t={};if(I(e)&&e.touches.length>0)t={clientX:e.touches[0].clientX,clientY:e.touches[0].clientY};else if(null!==e.target){const s=e.target.getBoundingClientRect();t={clientX:(0,T.isRtl)()?s.right:s.left,clientY:s.top+s.height+3}}else{const s=e;t={clientX:s.clientX,clientY:s.clientY}}return t}}var F=s(265005),U=s(904237),G=s(50959),Z=s(233465);const q=(j=F.Loader,X={staticPosition:!0,size:"small"},(e,t)=>function(e,t,s,i){const o=document.createElement("span"),l=(0,U.createRoot)(o);n(!1);const{className:a}=i??{};return a&&o.classList.add(a),l.render((0,G.createElement)(t,s)),e&&r(e),{toggleVisibility:n,destroy:function(){l.unmount()},mountTo:r};function n(e){o.classList.toggle(Z.blockHidden,!e)}function r(e){e.appendChild(o)}}(e,j,X,t));var j,X,Q=s(650279),K=s(497754),$=s.n(K),J=s(439378),Y=s(783036),ee=s(494966),te=s(438768),se=s(495217),ie=s(872206);class oe{constructor(e){this._lastDrawnLogos=[],this._logoWrapper=null,this._pairContainer=null,this._primaryLogo=null,this._secondaryLogo=null,this._logoContainer=null,this._symbolLetterContainer=null,this._updateLogoVisibility=e=>{this._logoWrapper&&this._logoWrapper.classList.toggle(ie.hidden,!e)},this._updateSymbolLogo=async e=>{if(null===this._logoWrapper&&this._renderSymbolLogo(),0!==this._lastDrawnLogos.length&&0!==e.length&&(0,Q.default)(this._lastDrawnLogos,e))return;const t=await(s=e,Promise.all(s.map((e=>(0,te.getImage)(`symbol_logo_${e}`,e,ae).then((e=>e.cloneNode())))))).catch((()=>[]));var s;switch(t.length){case 0:this._pairContainer?.classList.add(ie.hidden),this._logoContainer?.classList.add(se.hiddenCircleLogoClass),this._updateSymbolLetter(),this._symbolLetterContainer?.classList.remove(se.hiddenCircleLogoClass),this._lastDrawnLogos=e;break;case 1:le(this._logoContainer,t[0]),this._pairContainer?.classList.add(ie.hidden),this._logoContainer?.classList.remove(se.hiddenCircleLogoClass),this._symbolLetterContainer?.classList.add(se.hiddenCircleLogoClass),this._lastDrawnLogos=e;break;case 2:le(this._primaryLogo,t[0]),le(this._secondaryLogo,t[1]),this._pairContainer?.classList.remove(ie.hidden),
this._logoContainer?.classList.add(se.hiddenCircleLogoClass),this._symbolLetterContainer?.classList.add(se.hiddenCircleLogoClass),this._lastDrawnLogos=e}},this._model=e,this._renderSymbolLogo(),this._logoUrls=e.symbolLogoUrls().spawn(),this._logoUrls.subscribe(this._updateSymbolLogo,{callWithLast:!0}),this._isLogoVisible=e.isSymbolLogoVisible().spawn(),this._isLogoVisible.subscribe(this._updateLogoVisibility,{callWithLast:!0})}destroy(){this._logoWrapper?.remove(),this._logoWrapper=null,this._pairContainer=null,this._primaryLogo=null,this._secondaryLogo=null,this._logoContainer=null,this._symbolLetterContainer=null,this._logoUrls.destroy(),this._isLogoVisible.destroy()}getElement(){return this._logoWrapper}_renderSymbolLogo(){if(!this._logoWrapper){const e=this._logoWrapper=document.createElement("div");e.classList.add(ie.logoWrapper);const t=this._pairContainer=e.appendChild(document.createElement("span"));t.classList.add(ie.pairContainer,ie.hidden);const s=t.appendChild(document.createElement("span"));s.className=(0,J.getBlockStyleClasses)("xxxsmall");(this._secondaryLogo=s.appendChild(document.createElement("span"))).className=$()((0,J.getLogoStyleClasses)("xxxsmall"),ie.logo);(this._primaryLogo=s.appendChild(document.createElement("span"))).className=$()((0,J.getLogoStyleClasses)("xxxsmall"),ie.logo);(this._logoContainer=e.appendChild(document.createElement("span"))).className=$()((0,Y.getStyleClasses)("xxxsmall"),ie.logo,se.hiddenCircleLogoClass);(this._symbolLetterContainer=e.appendChild(document.createElement("span"))).className=$()((0,Y.getStyleClasses)("xxxsmall"),ie.logo),this._updateSymbolLetter()}}_updateSymbolLetter(){if(this._symbolLetterContainer){const e=(0,ee.safeShortName)(this._model.symbol()??"")[0];(0,m.updateTextNode)(this._symbolLetterContainer,e)}}}function le(e,t){e&&e.replaceChildren(t)}function ae(e){e.crossOrigin="",e.decoding="async"}const ne=_.CheckMobile.any();function re(e,t){e.dataset.status=t?"loading":void 0}class de{constructor(e,t,s){this._el=null,this._firstBlockWrapper=null,this._titlesWrapperEl=null,this._titleContainers=[],this._titleElements=[],this._valuesElements=[],this._actionsParentEl=null,this._actionAdditionalWrapperEl=null,this._actionElements=[],this._accessibleTitleButtons=[],this._accessibleActionButtons=[],this._rowMode=4,this._titlesMode=3,this._statusesWrapper=null,this._loader=null,this._valuesParentEl=null,this._valuesAdditionalWrapperEl=null,this._symbolLogoRenderer=null,this._resizeObserver=null,this._hideInvisibleHover=null,this._hideValues=null,this._allButtonsWidth=null,this._lastStatusesWrapperWidth=null,this._lastActionsWrapperWidth=null,this._showActionsHandler=null,this._hideActionsHandler=null,this._selectedSourceHandler=null,this._mouseEventHandlers=[],this._disableTimeout=null,this._toggleHiddenActions=null,this._updateDisabledState=(e=this._disabled.value())=>{null!==this._el&&(this._el.classList.toggle(ie.disabled,e),this._updateLoadingState(),this._updateStatusWidgetVisibility(e),this._updateTitleMaxWidth())},
this._updateLoadingState=(e=this._loading.value())=>{if(null!==this._el){this._el.classList.toggle(ie.eyeLoading,e&&!this._disabled.value()),re(this._el,e)}null!==this._loader&&this._loader.toggleVisibility(e),this._updateShowValues()},this._updateSymbolLogoRenderer=e=>{if(this._symbolLogoRenderer?.destroy(),e){this._symbolLogoRenderer=new oe(e);const t=this._titlesStatesSpawn.value().findIndex((e=>this._isTitleWithSymbolLogo(e)));if(-1!==t){const e=this._titleContainers[t];if(e){const t=this._symbolLogoRenderer.getElement();t&&e.insertBefore(t,e.firstChild)}}}else this._symbolLogoRenderer=null},this._model=e,this._parentEl=t,this._disabled=this._model.disabled().spawn(),this._disabled.subscribe(this._updateDisabledState),this._disabledOnInterval=this._model.disabledOnInterval().spawn(),this._disabledOnInterval.subscribe(this._updateDisabledOnIntervalState.bind(this)),this._selected=this._model.selected().spawn(),this._selected.subscribe(this._updateSelectedState.bind(this)),this._loading=this._model.loading().spawn(),this._loading.subscribe(function(e,t){let s=0;return i=>{clearTimeout(s),i?e():s=setTimeout(e,t)}}(this._updateLoadingState,700)),this._isTitleHidden=this._model.isTitleHidden().spawn(),this._isRowHidden=this._model.isRowHidden().spawn(),this._isTitleHidden.subscribe(this._updateShowTitles.bind(this)),this._isRowHidden.subscribe(this._updateShowLine.bind(this)),this._titlesStatesSpawn=this._model.titles().spawn(),this._titlesStatesSpawn.subscribe(this._titlesCollectionChanged.bind(this)),this._values=this._model.values().spawn(),this._values.subscribe(this._updateValues.bind(this)),this._createValuesSpawns(),this._addValuesSpawnsSubscriptions(),e.symbolLogoViewModel().subscribe(this._updateSymbolLogoRenderer),this._updateSymbolLogoRenderer(e.symbolLogoViewModel().value()),this._actionsSpawnArray=this._model.actions().map((e=>({visible:e.visible.spawn(),title:void 0===e.title?null:e.title.spawn()})));for(let e=0;e<this._actionsSpawnArray.length;e++){this._actionsSpawnArray[e].visible.subscribe(this._updateActionVisibilities.bind(this,e));const t=this._actionsSpawnArray[e].title;null!==t&&t.subscribe(this._updateActionTitle.bind(this,e))}this._withActions=s.withActions,this._isMultipleLayout=s.isMultipleLayout.spawn(),this._customTextColor=s.customTextColor.spawn(),this._customTextColor.subscribe(this._updateCustomTextColor.bind(this)),this._render(),this._updateStates(),this._updateShowTitles(),this._updateShowValues(),this._updateShowLine(),this._loader=q((0,l.ensureNotNull)(this._valuesParentEl),{className:ie.loader}),this._withActions&&(this._toggleHiddenActions=s.toggleHiddenActions,this._showActionsHandler=(0,C.wrapHandlerWithPreventEvent)(this._showActions.bind(this)),this._hideActionsHandler=(0,C.wrapHandlerWithPreventEvent)(this._hideActions.bind(this)),this._selectedSourceHandler=(0,S.defaultPreventedHandler)(this._model.setSourceSelected.bind(this._model)),null!==this._titlesWrapperEl&&(ne||(this._titlesWrapperEl.addEventListener("mouseenter",this._showActionsHandler),
this._titlesWrapperEl.addEventListener("mouseleave",this._hideActionsHandler)),this._mouseEventHandlers.push(new S.MouseEventHandler(this._titlesWrapperEl,{mouseDoubleClickEvent:this._model.onShowSettings.bind(this._model),doubleTapEvent:this._model.onShowSettings.bind(this._model),mouseClickEvent:this._selectedSourceHandler,tapEvent:this._selectedSourceHandler}))),null===this._actionAdditionalWrapperEl||null===this._actionsParentEl||ne||(this._actionAdditionalWrapperEl.addEventListener("mouseenter",this._showActionsHandler),this._actionAdditionalWrapperEl.addEventListener("mouseleave",this._hideActionsHandler),this._actionsParentEl.addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation()}))))}destroy(){if(this._toggleHiddenActions=null,this._disabled.destroy(),this._disabledOnInterval.destroy(),this._selected.destroy(),this._loading.destroy(),this._isTitleHidden.destroy(),this._isRowHidden.destroy(),this._customTextColor.destroy(),this._loader?.destroy(),this._isMultipleLayout.destroy(),this._model.symbolLogoViewModel().unsubscribe(this._updateSymbolLogoRenderer),this._symbolLogoRenderer?.destroy(),null!==this._disableTimeout&&clearTimeout(this._disableTimeout),this._accessibleTitleButtons=[],this._accessibleActionButtons=[],this._titlesStatesSpawn.destroy(),null!==this._titlesWrapperEl){for(const e of this._mouseEventHandlers)e.destroy();this._titleContainers=[],this._titleElements=[],this._withActions&&null!==this._selectedSourceHandler&&null!==this._showActionsHandler&&null!==this._hideActionsHandler&&(ne||(this._titlesWrapperEl.removeEventListener("mouseenter",this._showActionsHandler),this._titlesWrapperEl.removeEventListener("mouseleave",this._hideActionsHandler))),this._titlesWrapperEl=null}for(const e of this._actionsSpawnArray){e.visible.destroy();const t=e.title;null!==t&&t.destroy()}if(this._actionElements=[],null!==this._actionAdditionalWrapperEl&&(this._withActions&&null!==this._showActionsHandler&&null!==this._hideActionsHandler&&!ne&&(this._actionAdditionalWrapperEl.removeEventListener("mouseenter",this._showActionsHandler),this._actionAdditionalWrapperEl.removeEventListener("mouseleave",this._hideActionsHandler)),this._actionAdditionalWrapperEl=null),this._actionsParentEl=null,this._removeValuesSpawnsSubscriptions(),this._values.destroy(),null!==this._valuesParentEl&&(this._valuesElements=[],this._valuesParentEl=null),this._hideInvisibleHover?.destroy(),this._hideValues?.destroy(),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),null!==this._el){const e=this._el.parentNode;e?.removeChild(this._el),this._el=null}}getElement(){return this._el}getHeight(){return null===this._el?null:24}updateMode(e,t){this._rowMode===e&&this._titlesMode===t&&null!==this._allButtonsWidth||(this._rowMode!==e&&(this._rowMode=e,this._updateActionsVisibilitiesByMode()),this._titlesMode!==t&&(this._titlesMode=t,this._updateTitlesVisibilitiesByMode()),this._updateAllButtonsWidth())}accessibleButtons(){
return this._isRowHidden.value()?[]:[...this._accessibleTitleButtons,...this._accessibleActionButtons].filter((e=>!e.classList.contains(Z.blockHidden)))}showActions(){null===this._el||this._el.classList.contains(ie.withAction)||this._showActions()}hideActions(){null!==this._el&&this._el.classList.contains(ie.withAction)&&this._hideActions()}_updateActionsVisibilitiesByMode(){}_updateTitlesVisibilitiesByMode(){}_render(){this._renderTitles(),this._renderActions(),this._renderValues();const e=this._customTextColor.value()||"";this._el=document.createElement("div"),this._el.classList.toggle(ie.withCustomTextColor,Boolean(e)),re(this._el,this._loading.value()),this._firstBlockWrapper=document.createElement("div"),this._firstBlockWrapper.classList.add(ie.noWrapWrapper),this._firstBlockWrapper.appendChild((0,l.ensureNotNull)(this._titlesWrapperEl)),null!==this._actionsParentEl&&this._firstBlockWrapper.appendChild(this._actionsParentEl),this._el.appendChild(this._firstBlockWrapper),this._el.appendChild((0,l.ensureNotNull)(this._valuesParentEl)),this._parentEl.append(this._el)}_renderTitles(){null===this._titlesWrapperEl&&(this._titlesWrapperEl=document.createElement("div"),this._titlesWrapperEl.classList.add(ie.titlesWrapper));for(const e of this._titlesStatesSpawn.value())H(e)?this._renderTitlesGroup(e):this._renderSimpleTitle(e)}_renderTitlesGroup(e){const t=document.createElement("div");t.classList.add(ie.titlesGroupWrapper),e.items.forEach((e=>this._renderSimpleTitle(e,t))),(0,l.ensureNotNull)(this._titlesWrapperEl).appendChild(t)}_renderSimpleTitle(e,t){const{title:s,tooltip:i,onClick:o}=e,a=o,n=this._getAttributesForTitleState(e),r=s??"",d=this._customTextColor.value()||"",u=document.createElement("div");u.classList.add(ie.titleWrapper,ie.withDot),u.style.color=d,n?.className&&u.classList.add(n.className),n?.titleId&&(u.dataset.name=n.titleId),void 0!==i&&(u.classList.add("apply-common-tooltip"),u.setAttribute("title",i));const c=document.createElement(a?"button":"div");if(c.classList.add(ie.title),void 0!==o){u.classList.add(ie.withAction);const e=e=>{this._selectedSourceHandler?.(e),o(),a&&c.blur()};this._mouseEventHandlers.push(new S.MouseEventHandler(u,{mouseClickEvent:e,tapEvent:_.CheckMobile.any()?void 0:e},{ignoreClickAndTapOnDblClickOrDblTap:!0}))}if(a){const e=c;this._makeItemAccessible(e,o,i??""),this._accessibleTitleButtons.push(e)}if(r.length>0?c.appendChild(document.createTextNode(r)):(u.classList.add(Z.blockHidden),c.classList.add(Z.blockHidden)),u.appendChild(c),this._isTitleWithSymbolLogo(e)){const e=this._symbolLogoRenderer?.getElement();e&&u.insertBefore(e,u.firstChild)}(t??(0,l.ensureNotNull)(this._titlesWrapperEl)).appendChild(u),this._titleContainers.push(u),this._titleElements.push(c)}_makeItemAccessible(e,t,s){""!==s&&e.setAttribute("aria-label",s),e.type="button",e.classList.add(ie.accessible),e.tabIndex=-1;const i=t=>{switch(t.type){case"roving-tabindex:main-element":e.tabIndex=0;break;case"roving-tabindex:secondary-element":e.tabIndex=-1}};e.addEventListener("roving-tabindex:main-element",i),
e.addEventListener("roving-tabindex:secondary-element",i),e.addEventListener("keydown",(e=>{const s=(0,c.hashFromEvent)(e);13!==s&&32!==s||(e.preventDefault(),t(e))}))}_renderActions(){if(!this._withActions)return;null===this._actionsParentEl&&(this._actionsParentEl=document.createElement("div"),this._actionsParentEl.classList.add(ie.buttonsWrapper),this._actionsParentEl.dataset.name="actions",this._parentEl.append(this._actionsParentEl),this._actionAdditionalWrapperEl=document.createElement("div"),this._actionAdditionalWrapperEl.classList.add(ie.buttons),this._actionsParentEl.appendChild(this._actionAdditionalWrapperEl));const e=(0,l.ensureNotNull)(this._actionAdditionalWrapperEl);this._model.actions().forEach((t=>{const s=void 0===t.disableAccessibility,i={iconSize:v.trackingModeIsAvailable?"large":"small",tag:s?"button":"div",buttonClassName:ie.button,wrapIconClassName:ie.buttonIcon,hiddenClassName:Z.blockHidden,blurOnClick:!!s||void 0},o=(0,f.createActionElement)(t,i);if(s){const e=o;this._makeItemAccessible(e,(e=>{t.action(e)}),t.title?.value()??""),this._accessibleActionButtons.push(e)}this._actionElements.push(o),e.appendChild(o)}))}_initWrappersIfNotInitialized(){return null===this._valuesParentEl&&(this._valuesParentEl=document.createElement("div"),this._valuesParentEl.classList.add(ie.valuesWrapper),this._valuesAdditionalWrapperEl=document.createElement("div"),this._valuesAdditionalWrapperEl.classList.add(ie.valuesAdditionalWrapper),this._valuesParentEl.appendChild(this._valuesAdditionalWrapperEl)),(0,l.ensureNotNull)(this._valuesAdditionalWrapperEl)}_isWidthButtonsMode(){return null!==this._el&&(this._el.classList.contains(ie.withAction)||this._disabled.value()||this._selected.value())}_isTitleHiddenByMode(e){return!1}_updateStates(e){this._updateDisabledState(),this._updateDisabledOnIntervalState(),this._updateSelectedState(),this._updateLoadingState(),e&&this._clearDisableState()}_updateValuesHTMLElHandler(e,t){const s=(0,l.ensure)(this._valuesElements[e].value);(0,m.updateTextNode)(s,t),this._updateShowValues()}_updateValueColorHandler(e,t=""){(0,l.ensure)(this._valuesElements[e].value).style.color=t}_updateValueVisibleHandler(e,t){const s=(0,l.ensure)(this._valuesElements[e].value).closest(`.${ie.valueItem}`);null!==s&&s.classList.toggle(Z.blockHidden,!t),this._updateShowValues()}_updateShowLine(){null!==this._el&&this._el.classList.toggle(Z.blockHidden,this._isRowHidden.value())}_titlesCollectionChanged(){null!==this._titlesWrapperEl&&(this._titlesWrapperEl.innerHTML=""),this._accessibleTitleButtons=[],this._titleContainers=[],this._titleElements=[],this._renderTitles(),this._updateTitlesVisibilitiesByMode()}_createValuesSpawns(){this._valuesSpawnArray=this._values.value().map((e=>({value:e.value.spawn(),color:e.color.spawn(),visible:e.visible.spawn(),title:e.title.spawn()})))}_removeValuesSpawnsSubscriptions(){for(const e of this._valuesSpawnArray)e.value.destroy(),e.color.destroy(),e.visible.destroy(),e.title.destroy();this._valuesSpawnArray=[]}_addValuesSpawnsSubscriptions(){
for(let e=0;e<this._valuesSpawnArray.length;e++){const t=this._valuesSpawnArray[e];t.value.subscribe(this._updateValuesHTMLElHandler.bind(this,e)),t.color.subscribe(this._updateValueColorHandler.bind(this,e)),t.visible.subscribe(this._updateValueVisibleHandler.bind(this,e)),t.title.subscribe(this._updateValuesTitleHTMLElHandler.bind(this,e))}}_updateShowValues(){function e(e){if(!e)return;const t=Array.from(e.children).every((e=>e.classList.contains(Z.blockHidden)));e.classList.toggle(Z.blockHidden,t)}e(this._valuesAdditionalWrapperEl),e(this._valuesParentEl)}_addStatusesWidget(e,t,s){this._statusesWrapper=document.createElement("div"),this._statusesWrapper.classList.add(ie.statusesWrapper),e.classList.add(ie.statusesWrapper__statuses),this._statusesWrapper.appendChild(e),(0,l.ensureNotNull)(this._firstBlockWrapper).appendChild(this._statusesWrapper),this._hideInvisibleHover=t,this._hideInvisibleHover.subscribe(this._updateHideInvisibleHoverMode.bind(this),{callWithLast:!0}),this._hideValues=s,this._hideValues.subscribe(this._updateHideValuesMode.bind(this),{callWithLast:!0}),this._updateStatusWidgetVisibility(this._disabled.value()),this._resizeObserver=new ResizeObserver(this._handlerRestrictTitleWidth.bind(this)),null!==this._actionsParentEl&&this._resizeObserver.observe(this._actionsParentEl),this._resizeObserver.observe(this._statusesWrapper)}_updateTitleMaxWidth(){if(null===this._firstBlockWrapper)return;const e=this._allButtonsWidth||0,t=(this._lastActionsWrapperWidth||0)+(this._lastStatusesWrapperWidth||0);this._isWidthButtonsMode()?this._firstBlockWrapper.style.maxWidth=`calc(100% - ${Math.max(e,t)}px)`:this._firstBlockWrapper.style.maxWidth=t>0?`calc(100% - ${t}px)`:""}_updateAllButtonsWidth(){this._allButtonsWidth=this._getButtonsCount()*y+1,this._updateTitleMaxWidth()}_updateHideInvisibleHoverMode(e){null!==this._el&&this._el.classList.toggle(ie.hideInvisibleHover,e)}_updateHideValuesMode(e){null!==this._el&&this._el.classList.toggle(ie.hideValues,e)}_showActions(){if(null===this._el||!this._withActions)return;this._el.classList.add(ie.withAction),this._toggleHiddenActions?.(!0);const e=this._valuesParentEl?.offsetTop===this._titlesWrapperEl?.offsetTop;this._el.classList.toggle(ie.withTail,e),this._updateTitleMaxWidth()}_hideActions(){null!==this._el&&this._withActions&&(this._el.classList.remove(ie.withAction),this._toggleHiddenActions?.(!1),null!==this._valuesParentEl&&this._valuesParentEl.classList.remove(ie.withTail),this._updateTitleMaxWidth())}_handlerRestrictTitleWidth(e){if(null===this._actionsParentEl||null===this._firstBlockWrapper)return;let t=null,s=null;for(const i of e)i.target===this._statusesWrapper&&(t=i.contentRect.width),i.target===this._actionsParentEl&&(s=i.contentRect.width);t===this._lastStatusesWrapperWidth&&s===this._lastActionsWrapperWidth||(null!==t&&(this._lastStatusesWrapperWidth=t),null!==s&&(this._lastActionsWrapperWidth=s),this._updateTitleMaxWidth())}_clearDisableState(){null!==this._el&&(this._el.classList.remove(ie.eyeLoading),this._el.classList.remove(ie.disabled),
this._updateStatusWidgetVisibility(this._disabled.value()),this._updateTitleMaxWidth())}_updateDisabledOnIntervalState(){this._el?.classList.toggle(ie.disabledOnInterval,this._disabledOnInterval.value())}_updateSelectedState(){null!==this._el&&this._withActions&&this._el.classList.toggle(ie.selected,this._selected.value())}_updateShowTitles(){null!==this._titlesWrapperEl&&(this._titlesWrapperEl.classList.toggle(Z.blockHidden,this._isTitleHidden.value()),null!==this._actionsParentEl&&this._actionsParentEl.classList.toggle(Z.blockHidden,this._isTitleHidden.value()))}_updateValues(){this._removeValuesSpawnsSubscriptions(),this._createValuesSpawns(),null!==this._valuesParentEl&&null!==this._valuesAdditionalWrapperEl&&(this._valuesElements=[],this._valuesAdditionalWrapperEl.innerHTML=""),this._renderValues(),this._addValuesSpawnsSubscriptions(),this._updateShowValues()}_updateActionVisibilities(e){null!==this._actionsParentEl&&this._actionsParentEl.querySelectorAll(`.${ie.button}`)[e].classList.toggle(Z.blockHidden,!this._actionsSpawnArray[e].visible.value())}_updateActionTitle(e){const t=this._actionsSpawnArray[e].title;if(null===this._actionsParentEl||null===t)return;const s=this._actionsParentEl.querySelectorAll(`.${ie.button}`)[e];s.setAttribute("title",t.value()),s.hasAttribute("aria-label")&&s.setAttribute("aria-label",t.value()),s.dispatchEvent(new CustomEvent("common-tooltip-update"))}_updateCustomTextColor(){const e=this._customTextColor.value()||"";for(const t of this._titleContainers)null!==t&&(t.style.color=e);const t=(0,l.ensureNotNull)(this._valuesParentEl).querySelectorAll(`.${ie.valueTitle}`);for(let s=0;s<t.length;s++)t[s].style.color=e;(0,l.ensureNotNull)(this._el).classList.toggle(ie.withCustomTextColor,Boolean(e))}_updateStatusWidgetVisibility(e){null!==this._statusesWrapper&&this._statusesWrapper.classList.toggle(Z.blockHidden,e)}_isTitleWithSymbolLogo(e){return 8===e.id||0===e.id}}const ue=_.isSafari?"click":"auxclick";class ce extends de{constructor(e,t,s){super(e,t,s),this._wheelClickHandler=null,this._canUpdateRowVisibility=!0,this._globalRowVisibility=this._model.globalVisibility().spawn(),this._globalRowVisibility.subscribe(this._updateShowLine.bind(this),{callWithLast:!0}),this._has5Buttons=this._model.isAbleShowSourceCode().spawn(),this._has5Buttons.subscribe(this._update5ButtonsStyles.bind(this),{callWithLast:!0}),this._updateStates(!this._disabled.value()),s.statusWidgetEl&&this._addStatusesWidget(s.statusWidgetEl,s.hideInvisibleHover,s.hideValues),this._selected.subscribe(this._updateTitleMaxWidth.bind(this)),s.withActions&&(this._wheelClickHandler=this._onWheelClicked.bind(this),null!==this._titlesWrapperEl&&this._titlesWrapperEl.addEventListener(ue,this._wheelClickHandler))}destroy(){this._has5Buttons.destroy(),this._globalRowVisibility&&this._globalRowVisibility.destroy(),null!==this._wheelClickHandler&&null!==this._titlesWrapperEl&&this._titlesWrapperEl.removeEventListener(ue,this._wheelClickHandler),super.destroy()}accessibleButtons(){
return this._globalRowVisibility.value()?super.accessibleButtons():[]}_updateActionsVisibilitiesByMode(){if(!this._withActions)return;const e=this._model.actions(),t=[];let s=[];if(2===this._rowMode||1===this._rowMode)e[0].visible.value()&&t.push(this._actionElements[0]),e[this._actionElements.length-1].visible.value()&&t.push(this._actionElements[this._actionElements.length-1]),s=this._actionElements.slice(1,this._actionElements.length-1);else for(let s=0;s<this._actionElements.length-1;s++)e[s].visible.value()&&t.push(this._actionElements[s]);s.forEach((e=>e.classList.toggle(Z.blockHidden,!0))),t.forEach((e=>e.classList.toggle(Z.blockHidden,!1)))}_updateShowLine(){if(null===this._el||!this._canUpdateRowVisibility)return;const e=!this._globalRowVisibility.value();e?this._el.classList.toggle(Z.blockHidden,e):super._updateShowLine()}_getButtonsCount(){switch(this._rowMode){case 4:return this._has5Buttons.value()?5:4;case 3:return 3;default:return 2}}_render(){super._render();const e=(0,l.ensureNotNull)(this._el);e.classList.add(ie.item,ie.study),e.dataset.name="legend-source-item",e.dataset.entityId=this._model.getSource().id(),e.setAttribute("role","toolbar")}_getAttributesForTitleState(e){return 7===e.id||8===e.id?{titleId:"legend-source-title",className:ie.mainTitle}:9===e.id?{titleId:"legend-source-description",className:ie.inputTitle}:null}_renderValues(){const e=this._initWrappersIfNotInitialized(),t=this._values.value();for(const s of t){const t=document.createElement("div");t.dataset.testIdValueTitle=s.title.value(),t.classList.add(ie.valueItem),t.classList.toggle(Z.blockHidden,!s.visible.value());const i=document.createElement("div");i.classList.add(ie.valueValue),i.style.color=s.color.value()||"",i.appendChild(document.createTextNode(s.value.value()));const o=s.title.value();void 0!==o&&(i.classList.add("apply-common-tooltip"),i.title=o),t.appendChild(i),this._valuesElements.push({value:i}),e.appendChild(t)}}_updateValuesTitleHTMLElHandler(e,t=""){const s=(0,l.ensure)(this._valuesElements[e].value);s.classList.toggle("apply-common-tooltip",0!==t.length),s.title=t}_update5ButtonsStyles(e){null!==this._el&&(this._el.classList.toggle(ie.has5Buttons,e),this._updateAllButtonsWidth())}_onWheelClicked(e){1===e.button&&this._model.onRemoveSource()}}class he extends de{constructor(e,t,s){super(e,t,s),this._clientHeight=null,this._updateLinkedState=()=>{(0,l.ensureNotNull)(this._el).classList.toggle(ie.linked,Boolean(this._linked?.value())),this._updateTitleMaxWidth()},this._flagged=this._model.flagged().spawn(),this._flagged.subscribe(this._updateFlaggedState.bind(this)),this._linked=this._model.linked().spawn(),this._updateLinkedState&&this._linked.subscribe(this._updateLinkedState.bind(this),{callWithLast:!0}),this._updateStates(),s.statusWidgetEl&&this._addStatusesWidget(s.statusWidgetEl,s.hideInvisibleHover,s.hideValues),this._selected.subscribe(this._updateTitleMaxWidth.bind(this))}destroy(){super.destroy(),this._flagged?.destroy(),this._linked?.destroy()}getHeight(){
return null===this._el?null:(null===this._clientHeight&&(this._clientHeight=this._el.clientHeight,0===this._clientHeight&&(this._clientHeight=null)),this._clientHeight)}_updateActionsVisibilitiesByMode(){if(!this._withActions)return;const e=[];let t=[];const s=this._model.actions();if(1===this._rowMode)s[this._actionElements.length-1].visible.value()&&e.push(this._actionElements[this._actionElements.length-1]),t=this._actionElements.slice(0,this._actionElements.length-1);else for(let t=0;t<this._actionElements.length;t++)s[t].visible.value()&&e.push(this._actionElements[t]);t.forEach((e=>e.classList.toggle(Z.blockHidden,!0))),e.forEach((e=>e.classList.toggle(Z.blockHidden,!1)))}_updateTitlesVisibilitiesByMode(){this._hideTitleAndItsContainerIfRequired(3),this._hideTitleAndItsContainerIfRequired(4),this._hideTitleAndItsContainerIfRequired(2)}_isTitleHiddenByMode(e){const t=e.id;return 2!==t&&3!==t&&4!==t?super._isTitleHiddenByMode(e):2===t&&this._isMultipleLayout.value()?1===this._titlesMode:3!==this._titlesMode}_hideTitleAndItsContainerIfRequired(e){const t=this._getTitleIndexByDataName(e);if(-1===t)return;const s=this._titlesStatesSpawn.value()[t],i=this._titleContainers[t],o=this._titleElements[t],l=this._isTitleHiddenByMode(s);i?.classList.toggle(Z.blockHidden,l),o?.classList.toggle(Z.blockHidden,l)}_getButtonsCount(){return 1===this._rowMode?1:4}_render(){super._render();const e=(0,l.ensureNotNull)(this._el);e.classList.add(ie.item,ie.series),e.classList.toggle(ie.onlyOneButtonCanBeStick,this._model.isOneButtonCanBeStick()),e.dataset.name="legend-series-item",e.setAttribute("role","toolbar")}_updateStates(){super._updateStates(),this._updateFlaggedState(),this._updateLinkedState?.()}_renderValues(){const e=this._initWrappersIfNotInitialized(),t=this._values.value();for(const s of t){const t=document.createElement("div");t.dataset.testIdValueTitle=s.title.value(),t.classList.add(ie.valueItem),t.classList.toggle(Z.blockHidden,!s.visible.value()),t.classList.toggle(ie.unimportant,s.unimportant.value());const i=document.createElement("div"),o=s.title.value()||"",l=this._customTextColor.value()||"";i.classList.add(ie.valueTitle),i.classList.toggle(Z.blockHidden,0===o.length),i.appendChild(document.createTextNode(o)),i.style.color=l,t.appendChild(i);const a=document.createElement("div");a.classList.add(ie.valueValue),a.style.color=s.color.value()||"",a.appendChild(document.createTextNode(s.value.value())),t.appendChild(a),this._valuesElements.push({title:i,value:a}),e.appendChild(t)}}_getAttributesForTitleState(e){switch(e.id){case 0:return{titleId:"legend-source-title",className:ie.mainTitle};case 1:return{titleId:"legend-source-description",className:ie.descTitle};case 2:return{titleId:"legend-source-interval",className:ie.intervalTitle};case 3:return{titleId:"legend-source-provider",className:ie.providerTitle};case 4:return{titleId:"legend-source-exchange",className:ie.exchangeTitle};case 5:return{titleId:"legend-source-style",className:ie.styleTitle};case 6:return{titleId:"legend-source-price-source",
className:ie.priceSourceTitle}}return null}_updateValuesTitleHTMLElHandler(e,t=""){const s=(0,l.ensure)(this._valuesElements[e].title);(0,m.updateTextNode)(s,t),s.classList.toggle(Z.blockHidden,0===t.length),this._updateShowValues()}_isWidthButtonsMode(){return null!==this._el&&(void 0!==this._flagged&&Boolean(this._flagged.value())||this._linked?.value()||super._isWidthButtonsMode())}_updateFlaggedState(){if(void 0===this._flagged)return;(0,l.ensureNotNull)(this._el).classList.toggle(ie.flagged,Boolean(this._flagged.value())),this._updateTitleMaxWidth()}_getTitleIndexByDataName(e){return this._titlesStatesSpawn.value().findIndex((t=>t.id===e))}}var pe=s(947036),_e=s(662920),me=s(65300),ge=s(736885);class be{constructor(e,t,s){this._wrapperTogger=null,this._el=null,this._counterEl=null,this._arrowIconEL=null,this._objectTreeEl=null,this._loader=q(null),this._mode=0,this._accessibleButtons=[],this._parentEl=e,this._themedColor=t.spawn(),this._themedColor.subscribe(this._updateThemedColor.bind(this)),this._showCollapserWithOneIndicator=s.showCollapserWithOneIndicator.spawn(),this._showCollapserWithOneIndicator.subscribe(this._updateVisibility.bind(this)),this._sourceCount=s.visibleDataSourceCount.spawn(),this._sourceCount.subscribe((()=>{this._updateSourceCount(),this._updateVisibility()})),this._isStateOpen=s.isDataSourcesCollapsed.spawn(),this._isStateOpen.subscribe((()=>{this._updateState(),this._updateVisibility()})),this._isMainPane=s.isMainPane.spawn(),this._isMainPane.subscribe(this._updateObjectTreeVisibility.bind(this)),this._isPaneCollapsed=s.isPaneCollapsed.spawn(),this._isPaneCollapsed.subscribe(this._updateVisibility.bind(this)),this._combinedStatusWidgetEl=s.combinedStatusWidget.getElement(),this._combinedStatusWidgetVisibility=s.combinedStatusWidget.visibility().spawn(),this._combinedStatusWidgetVisibility.subscribe(this._updateVisibility.bind(this)),this._render(),this._updateState(),this._updateVisibility(),this._updateThemedColor(this._themedColor.value()),this._updateObjectTreeVisibility(this._isMainPane.value()),this._isLoaderVisible=(0,a.combine)(((e,t)=>!e&&t[0]),this._isStateOpen.weakReference(),s.hasLoadingDataSources.weakReference()),this._isLoaderVisible.subscribe(this._loader.toggleVisibility,{callWithLast:!0}),this._toggleStateHandler=e=>{null!==this._el&&(e.cancelable&&e.preventDefault(),e instanceof KeyboardEvent||this._el?.blur(),1!==this._mode?s.onCollapseDataSources():s.onShowObjectsTreeDialog())},null!==this._el&&(this._el.addEventListener("touchend",this._toggleStateHandler),this._el.addEventListener("click",this._toggleStateHandler),this._el.addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation()}))),this._updateSourceCount()}destroy(){this._isLoaderVisible.destroy(),this._loader.destroy(),this._isPaneCollapsed.destroy(),this._sourceCount.destroy(),this._isStateOpen.destroy(),this._showCollapserWithOneIndicator.destroy(),this._combinedStatusWidgetVisibility.destroy(),null!==this._objectTreeEl&&(this._objectTreeEl=null),this._arrowIconEL=null,this._counterEl=null,
null!==this._el&&(this._el.removeEventListener("touchend",this._toggleStateHandler),this._el.removeEventListener("click",this._toggleStateHandler),this._el.innerHTML="",this._el=null)}accessibleButtons(){return null===this._el||this._el.classList.contains(ie.onlyOneSourceShown)&&1!==this._mode?[]:this._accessibleButtons}setMode(e){this._mode=e?1:0,this._updateTooltip()}_render(){this._wrapperTogger=document.createElement("div"),this._wrapperTogger.classList.add(ie.togglerWrapper),this._el=document.createElement("button"),this._el.className=`${ie.toggler} apply-common-tooltip`;const e=this._el;e.type="button",e.classList.add(ie.accessible),e.tabIndex=-1;const t=t=>{if(null!==e)switch(t.type){case"roving-tabindex:main-element":e.tabIndex=0;break;case"roving-tabindex:secondary-element":e.tabIndex=-1}};e.addEventListener("roving-tabindex:main-element",t),e.addEventListener("roving-tabindex:secondary-element",t),e.addEventListener("keydown",(e=>{const t=(0,c.hashFromEvent)(e);13!==t&&32!==t||(e.preventDefault(),this._toggleStateHandler(e))})),this._accessibleButtons.push(e),this._arrowIconEL=document.createElement("div"),this._arrowIconEL.classList.add(ie.iconArrow),this._arrowIconEL.innerHTML=v.trackingModeIsAvailable?_e:pe,this._el.appendChild(this._arrowIconEL),this._objectTreeEl=document.createElement("div"),this._objectTreeEl.classList.add(ie.objectTree),this._objectTreeEl.innerHTML=v.trackingModeIsAvailable?ge:me,this._el.appendChild(this._objectTreeEl),this._counterEl=document.createElement("div"),this._counterEl.classList.add(ie.counter),this._counterEl.appendChild(document.createTextNode(String(this._sourceCount.value()))),this._el.appendChild(this._counterEl),this._wrapperTogger.appendChild(this._el);const s=document.createElement("div");s.classList.add(ie.statusesWrapper),s.appendChild(this._combinedStatusWidgetEl),this._wrapperTogger.appendChild(s),this._parentEl.appendChild(this._wrapperTogger),this._loader.mountTo(this._wrapperTogger)}_updateThemedColor(e){if(null!==this._el)if(e.length>0){const[t,s,i]=(0,u.parseRgb)(e);this._el.style.backgroundColor=(0,u.rgbaToString)([t,s,i,(0,u.normalizeAlphaComponent)(.8)])}else this._el.style.removeProperty("background-color")}_updateSourceCount(){const e=this._sourceCount.value(),t=(0,l.ensureNotNull)(this._counterEl);(0,m.updateTextNode)(t,String(e)),t.classList.toggle(Z.blockHidden,e<=1),this._parentEl.classList.toggle(ie.saveArrowWidth,e<=1)}_updateVisibility(){const e=this._sourceCount.value(),t=(0,l.ensureNotNull)(this._el),s=1===e&&!this._showCollapserWithOneIndicator.value()&&(this._isStateOpen.value()||!this._combinedStatusWidgetVisibility.value()),i=e<1||this._isPaneCollapsed.value()&&(this._isMainPane.value()||this._isStateOpen.value());t.classList.toggle(Z.blockHidden,!!i),t.classList.toggle(ie.onlyOneSourceShown,s),(0,l.ensureNotNull)(this._wrapperTogger).classList.toggle(Z.blockHidden,s),(0,l.ensureNotNull)(this._combinedStatusWidgetEl).classList.toggle(Z.blockHidden,this._isStateOpen.value())}_updateState(){const e=!this._isStateOpen.value()
;this._parentEl.classList.toggle(ie.closed,e),this._updateTooltip(),W((e?"Hide":"Show")+" not main sources")}_tooltip(){if(1===this._mode)return V.t(null,void 0,s(685786));const e=this._sourceCount.value(),t=V.t(null,{plural:"Hide indicators legend",count:e},s(946960)),i=V.t(null,{plural:"Show indicators legend",count:e},s(436553));return this._isStateOpen.value()?t:i}_updateTooltip(){if(null!==this._el){const e=this._tooltip();this._el.setAttribute("title",e),this._el.setAttribute("aria-label",e),this._el.dispatchEvent(new CustomEvent("common-tooltip-update"))}}_updateObjectTreeVisibility(e){(0,l.ensureNotNull)(this._el).classList.toggle(ie.objectsTreeCanBeShown,e)}}const ve=p.enabled("object_tree_legend_mode"),we=[27,9,37,39,38,40];class Se{constructor(e,t){this._mode=4,this._renderToggler=null,this._mainDataSourceRenderer=null,this._dataSourceRenderers=[],this._parentEl=document.createElement("div"),this._mainDataSourceEl=null,this._dataSourcesEl=null,this._dataSourcesAdditionalWrapperEl=null,this._collapsedDataSourcesWrapperEl=null,this._collapsedDataSourcesEl=null,this._outsideEventForCollapsedTooltip=null,this._onKeyboardNavigationActivationBound=this._onKeyboardNavigationActivation.bind(this),this._onIsDataSourcesCollapsedBound=this._onIsDataSourcesCollapsed.bind(this),this._focusEventAbortController=null,this._toggleHiddenActionsTimoutID=null,this._loader=q(null),this._toggleHiddenActions=e=>{this._toggleHiddenActionsTimoutID&&(clearTimeout(this._toggleHiddenActionsTimoutID),this._toggleHiddenActionsTimoutID=null),e?this._parentEl.classList.toggle(ie.legend_withHiddenActions,e):this._toggleHiddenActionsTimoutID=setTimeout((()=>this._parentEl.classList.toggle(ie.legend_withHiddenActions,e)),100)},this._options=e,this._togglerOptions=t,this._isStudiesLegendHidden=e.isStudiesLegendHidden.spawn(),this._isStudiesLegendHidden.subscribe(this._updateLegendVisibility.bind(this)),this._isAllLegendHidden=e.isAllLegendHidden.spawn(),this._isAllLegendHidden.subscribe(this._updateLegendVisibility.bind(this)),this._updateLegendVisibility(),this._hideAllExceptFirstLine=e.hideAllExceptFirstLine.spawn(),this._hideAllExceptFirstLine.subscribe(this._updateAllHiddenExeptFirstLine.bind(this)),this._themedColor=e.themedColor.spawn(),this._themedColor.subscribe(this._setCustomBg.bind(this)),this._showBackground=e.showBackground.spawn(),this._showBackground.subscribe(this._setCustomBg.bind(this)),this._backgroundTransparency=e.backgroundTransparency.spawn(),this._backgroundTransparency.subscribe(this._setCustomBg.bind(this)),this._collapsedDataSourcesCountSpawn=e.collapsedDataSourcesCount.spawn(),this._collapsedDataSourcesCountSpawn.subscribe(this._updateCollapsedSourcesCount.bind(this)),this._collapsedDataSourcesStatusWidgetElement=e.combinedStatusWidget.getElement(),this._showCollapsedDataSourcesTooltipHandler=this._showCollapsedDataSourcesTooltip.bind(this),this._parentEl.classList.add(ie.legend),this._parentEl.classList.toggle(ie.noWrap,!v.trackingModeIsAvailable),
this._parentEl.classList.toggle(ie.noActions,!this._options.withActions),this._parentEl.classList.toggle(ie.touchMode,v.trackingModeIsAvailable),this._parentEl.classList.toggle(ie.wrappable,!this._hideAllExceptFirstLine.value()),this._parentEl.dataset.name="legend",this._parentEl.setAttribute("data-tooltip-show-on-focus","true"),this._parentEl.style.setProperty("--legend-source-item-button-width",`${y}px`);const s=t=>{t.preventDefault(),e.showLegendWidgetContextMenu(t)};this._mouseEventHandler=new S.MouseEventHandler(this._parentEl,{contextMenuEvent:s,touchContextMenuEvent:s}),window.addEventListener("keyboard-navigation-activation",this._onKeyboardNavigationActivationBound),this._parentEl.addEventListener("keydown",this._handleKeyDown.bind(this)),this._options.onLayoutChanged.subscribe(this,this._onLayoutChanged),this._isLoaderVisible=(0,a.combine)((e=>e[1]),e.hasLoadingDataSources.weakReference()),this._isLoaderVisible.subscribe(this._loader.toggleVisibility,{callWithLast:!0})}destroy(){this._isLoaderVisible.destroy(),this._loader.destroy(),this._focusEventAbortController?.abort();const e=document.activeElement;let t=-1;if(Se._wasKeyboardNavigationActivated&&e instanceof HTMLButtonElement){null!==this._getRowRendererByChild(e)&&(t=(0,b.queryTabbableElements)(document.body).indexOf(e))}if(this._isStudiesLegendHidden.destroy(),this._isAllLegendHidden.destroy(),this._hideAllExceptFirstLine.destroy(),this._themedColor.destroy(),this._showBackground.destroy(),this._backgroundTransparency.destroy(),this._collapsedDataSourcesCountSpawn.destroy(),v.trackingModeIsAvailable&&null!==this._collapsedDataSourcesWrapperEl&&this._collapsedDataSourcesWrapperEl.removeEventListener("touchend",this._showCollapsedDataSourcesTooltipHandler),this._outsideEventForCollapsedTooltip&&this._outsideEventForCollapsedTooltip(),null!==this._dataSourcesAdditionalWrapperEl&&(this._dataSourcesAdditionalWrapperEl.innerHTML="",this._dataSourcesAdditionalWrapperEl=null),null!==this._dataSourcesEl&&(this._dataSourcesEl.innerHTML="",this._dataSourcesEl=null),this._togglerOptions.isDataSourcesCollapsed.unsubscribe(this._onIsDataSourcesCollapsedBound),null!==this._renderToggler&&(this._renderToggler.destroy(),this._renderToggler=null),null!==this._mainDataSourceRenderer&&(this._mainDataSourceRenderer.destroy(),this._mainDataSourceRenderer=null),0!==this._dataSourceRenderers.length){for(const e of this._dataSourceRenderers)e.destroy();this._dataSourceRenderers=[]}if(this._mouseEventHandler.destroy(),this._parentEl.innerHTML="",delete this._parentEl,window.removeEventListener("keyboard-navigation-activation",this._onKeyboardNavigationActivationBound),-1!==t){let e;window.dispatchEvent(new CustomEvent("keyboard-navigation-activation",{bubbles:!0}));const s=(0,b.queryTabbableElements)(document.body);e=t===s.length?s[0]:s[t],e&&e.focus()}}addCustomWidget(e,t){if(0===t.block){this._renderMainDataSourceEl();const s=(0,l.ensureNotNull)(this._mainDataSourceEl);1===t.position&&e.renderTo(s,s.firstChild),0===t.position&&e.renderTo(s)}if(1===t.block){
this._renderDataSourcesEl();const s=(0,l.ensureNotNull)(this._dataSourcesAdditionalWrapperEl);1===t.position&&e.renderTo(s,s.firstChild),0===t.position&&e.renderTo(s)}}firstTitle(){return this._parentEl.firstElementChild}getElement(){return this._parentEl}updateMode(e){const t=ve&&e<133?1:e<205?2:e<222?3:4,s=e<192?1:e<442?2:3;this._mode=t,null!==this._mainDataSourceRenderer&&this._mainDataSourceRenderer.updateMode(t,s);for(const e of this._dataSourceRenderers)e.updateMode(t,s);this._parentEl.classList.toggle(ie.medium,3===t),this._parentEl.classList.toggle(ie.minimized,2===t),this._parentEl.classList.toggle(ie.micro,1===t),null!==this._renderToggler&&this._renderToggler.setMode(1===t);const i=!this._hideAllExceptFirstLine.value()&&(v.trackingModeIsAvailable||e<542);this._parentEl.classList.toggle(ie.directionColumn,i),this._parentEl.classList.toggle(ie.hideUniportantValueItems,!_.CheckMobile.any()&&e<=272)}getMainSourceHeight(){return null===this._mainDataSourceRenderer?0:this._mainDataSourceRenderer.getHeight()}getDataSourceHeight(){return 0===this._dataSourceRenderers.length?0:this._dataSourceRenderers[0].getHeight()}_renderMainDataSourceEl(){null===this._mainDataSourceEl&&(this._mainDataSourceEl=document.createElement("div"),this._mainDataSourceEl.classList.add(ie.legendMainSourceWrapper),this._parentEl.insertBefore(this._mainDataSourceEl,this._dataSourcesEl))}_renderDataSourcesEl(){null===this._dataSourcesEl&&(this._dataSourcesEl=document.createElement("div"),this._dataSourcesEl.classList.add(ie.sourcesWrapper),this._renderToggle(this._dataSourcesEl),this._dataSourcesAdditionalWrapperEl=document.createElement("div"),this._dataSourcesAdditionalWrapperEl.classList.add(ie.sources),this._dataSourcesEl.appendChild(this._dataSourcesAdditionalWrapperEl),this._renderCollapsedCounter(this._dataSourcesAdditionalWrapperEl),this._parentEl.appendChild(this._dataSourcesEl))}_renderToggle(e){this._options.showToggleButton&&(this._renderToggler=new be(e,this._options.themedColor,this._togglerOptions))}_onIsDataSourcesCollapsed(e){if(e){const e=this._getAllAccessibleButtons();if(0===e.filter((e=>e.tabIndex>=0)).length){const t=this._getRowRendererByChild(e[0]);t&&this._makeRowElementTheMainOne(e[0],t)}return}if(0!==(this._mainDataSourceRenderer?.accessibleButtons()||[]).filter((e=>e.tabIndex>=0)).length)return;const t=[];this._dataSourceRenderers.forEach((e=>t.push(...e.accessibleButtons())));const s=t.filter((e=>e.tabIndex>=0));if(0!==s.length){this._focusEventAbortController&&this._focusEventAbortController.abort(),s.forEach((e=>(0,g.becomeSecondaryElement)(e)));let e=null,t=null;if(this._mainDataSourceRenderer){const s=this._mainDataSourceRenderer.accessibleButtons();s.length>0&&(e=s[0],t=this._mainDataSourceRenderer)}null===e&&this._renderToggler&&(e=this._renderToggler.accessibleButtons()[0],t=this._renderToggler),e&&t&&this._makeRowElementTheMainOne(e,t)}}_renderCollapsedCounter(e){this._collapsedDataSourcesWrapperEl=document.createElement("div"),this._collapsedDataSourcesWrapperEl.className=`${ie.item} ${ie.last}`,
this._collapsedDataSourcesEl=document.createElement("span"),this._collapsedDataSourcesEl.className=`${ie.text} apply-common-tooltip`,this._collapsedDataSourcesWrapperEl.append(this._collapsedDataSourcesEl);const t=document.createElement("div");t.classList.add(ie.statusesWrapper),this._collapsedDataSourcesStatusWidgetElement.classList.add(ie.statusesWrapper__statuses),t.appendChild(this._collapsedDataSourcesStatusWidgetElement),this._collapsedDataSourcesWrapperEl.appendChild(t),e.append(this._collapsedDataSourcesWrapperEl),v.trackingModeIsAvailable&&this._collapsedDataSourcesWrapperEl.addEventListener("touchend",this._showCollapsedDataSourcesTooltipHandler),this._updateCollapsedSourcesCount(this._collapsedDataSourcesCountSpawn.value()),this._loader.mountTo(this._collapsedDataSourcesWrapperEl)}_showCollapsedDataSourcesTooltip(){(0,w.showOnElement)(this._collapsedDataSourcesEl,{text:this._options.collapsedDataSourcesTitle.value()}),this._addOutsideEventForHideTooltip()}_addOutsideEventForHideTooltip(){null!==this._outsideEventForCollapsedTooltip&&this._outsideEventForCollapsedTooltip(),this._outsideEventForCollapsedTooltip=(0,h.addOutsideEventListener)(new CustomEvent("timestamp").timeStamp,this._collapsedDataSourcesWrapperEl,(()=>{null!==this._outsideEventForCollapsedTooltip&&this._outsideEventForCollapsedTooltip(),(0,w.hide)()}),window.document,{touchEnd:!0})}_updateCollapsedSourcesCount(e){if(null===this._collapsedDataSourcesWrapperEl||null===this._collapsedDataSourcesEl)return;const t=0===e;this._collapsedDataSourcesWrapperEl.classList.toggle(Z.blockHidden,t),t||((0,m.updateTextNode)(this._collapsedDataSourcesEl,`+${e}`),this._collapsedDataSourcesEl.setAttribute("title",this._options.collapsedDataSourcesTitle.value()))}_updateLegendVisibility(){let e;const t=Se._wasKeyboardNavigationActivated&&(this._isAllLegendHidden.value()||this._isStudiesLegendHidden.value());if(t){e=this._getAllAccessibleButtons().filter((e=>e.tabIndex>=0))[0]}if(this._parentEl.classList.toggle(Z.blockHidden,this._isAllLegendHidden.value()),null!==this._dataSourcesEl&&this._dataSourcesEl.classList.toggle(Z.blockHidden,this._isStudiesLegendHidden.value()),t){const t=this._getAllAccessibleButtons();if(e&&t.includes(e))return;if(e&&(0,g.becomeSecondaryElement)(e),0!==t.length){const e=this._getRowRendererByChild(t[0]);e&&this._makeRowElementTheMainOne(t[0],e)}}}_updateAllHiddenExeptFirstLine(){this._parentEl.classList.toggle(ie.wrappable,!this._hideAllExceptFirstLine.value())}_setCustomBg(){const e=this._showBackground.value(),t=this._themedColor.value(),s=this._backgroundTransparency.value();let i="";if(e){const[e,o,l]=(0,u.parseRgb)(t);i=(0,u.rgbaToString)([e,o,l,(0,u.normalizeAlphaComponent)(1-s/100)])}this._parentEl.style.color=i}_onLayoutChanged(e){const{newMainSource:t,removedDataSources:s,addedDataSources:i,movedDataSources:o}=e,l=document.activeElement;let a=-1,n=-1;const r=null===this._mainDataSourceRenderer&&0===this._dataSourceRenderers.length;if(Se._wasKeyboardNavigationActivated&&l instanceof HTMLButtonElement){
const e=this._getRowRenderers(),o=e.find((e=>e.accessibleButtons().includes(l)));if(void 0!==o){const r=o===this._mainDataSourceRenderer&&null===t,d=o instanceof ce&&s.includes(this._dataSourceRenderers.indexOf(o));if(r||d){a=e.indexOf(o);const r=(0,b.queryTabbableElements)(document.body).indexOf(l);n=0!==i.length||(void 0!==t||null!==this._mainDataSourceRenderer)&&null!==t||s.length!==this._dataSourceRenderers.length&&0!==this._dataSourceRenderers.length?r+1:r}}}void 0!==t&&(null!==t?this._addMainDataSource(t.model,t.statusWidget):(this._mainDataSourceRenderer?.destroy(),this._mainDataSourceRenderer=null));const d=[];if(o.forEach((e=>{d.push({renderer:this._dataSourceRenderers[e.oldIndex],newIndex:e.newIndex})})),d.sort(((e,t)=>e.newIndex-t.newIndex)),s.forEach((e=>{this._dataSourceRenderers.splice(e,1)[0].destroy()})),0!==i.length&&(this._renderDataSourcesEl(),i.forEach((e=>{this._addDataSource(e.model,e.statusWidget,e.index)}))),0!==d.length&&(this._renderDataSourcesEl(),d.forEach((e=>{this._moveDataSource(e.renderer,e.newIndex)}))),Se._wasKeyboardNavigationActivated&&r&&(null!==this._mainDataSourceRenderer||this._dataSourceRenderers.length)&&window.dispatchEvent(new CustomEvent("keyboard-navigation-activation",{bubbles:!0})),-1!==a){let e,t;const s=this._getRowRenderers();for(;a<s.length;){const i=s[a],o=i.accessibleButtons();if(o.length>0){e=o[0],t=i;break}a++}if(e&&t)this._changeFocusElement(e,t);else if(-1!==n){window.dispatchEvent(new CustomEvent("keyboard-navigation-activation",{bubbles:!0}));const t=(0,b.queryTabbableElements)(document.body);e=n===t.length?t[0]:t[n],e&&(l&&(0,g.becomeSecondaryElement)(l),e.focus())}}}_addMainDataSource(e,t){this._renderMainDataSourceEl(),this._mainDataSourceRenderer=new he(e,(0,l.ensureNotNull)(this._mainDataSourceEl),{withActions:this._options.withActions,customTextColor:this._options.customTextColor,statusWidgetEl:t.getElement(),hideInvisibleHover:t.visibility().spawn(),hideValues:(0,a.combine)(((e,t)=>e||t),t.dataSourceErrorStatusShown.weakReference(),t.isSymbolInvalidStatusShown.weakReference()),isMultipleLayout:this._options.isMultipleLayout,toggleHiddenActions:this._toggleHiddenActions}),this._updateLegendVisibility()}_addDataSource(e,t,s){const i=(0,l.ensureNotNull)(this._dataSourcesAdditionalWrapperEl),o=new ce(e,i,{withActions:this._options.withActions,customTextColor:this._options.customTextColor,statusWidgetEl:t.getElement(),hideInvisibleHover:t.visibility().spawn(),hideValues:(0,a.combine)(((e,t)=>e||t),t.dataSourceErrorStatusShown.weakReference(),t.isSymbolInvalidStatusShown.weakReference()),isMultipleLayout:this._options.isMultipleLayout,toggleHiddenActions:this._toggleHiddenActions}),n=(0,l.ensureNotNull)(o.getElement());if(null!==n){let e=this._dataSourceRenderers[s];void 0!==e?i.insertBefore(n,e.getElement()):(e=this._dataSourceRenderers[s-1],void 0!==e&&i.insertBefore(n,(0,l.ensureNotNull)(e.getElement()).nextSibling))}this._dataSourceRenderers.splice(s,0,o),this._updateLegendVisibility()}_moveDataSource(e,t){const s=this._dataSourceRenderers.indexOf(e)
;if(-1===s||t===s)return;const i=(0,l.ensureNotNull)(this._dataSourcesAdditionalWrapperEl),o=(0,l.ensureNotNull)(e.getElement());let a=this._dataSourceRenderers[t];void 0!==a?i.insertBefore(o,a.getElement()):(a=this._dataSourceRenderers[t-1],void 0!==a&&i.insertBefore(o,(0,l.ensureNotNull)(a.getElement()).nextSibling)),this._dataSourceRenderers.splice(s,1),this._dataSourceRenderers.splice(t,0,e)}_onKeyboardNavigationActivation(){Se._wasKeyboardNavigationActivated=!0,this._togglerOptions.isDataSourcesCollapsed.unsubscribe(this._onIsDataSourcesCollapsedBound),this._togglerOptions.isDataSourcesCollapsed.subscribe(this._onIsDataSourcesCollapsedBound);const e=this._getAllAccessibleButtons(),t=e.filter((e=>e.tabIndex>=0));if(0===t.length){const[t]=e.filter((e=>e.hasAttribute("tabIndex")));if(void 0===t)return;const s=this._getRowRendererByChild(t);if(null===s)return;this._makeRowElementTheMainOne(t,s)}if(t.length>1){const[,...e]=t;for(const t of e)(0,g.becomeSecondaryElement)(t)}}_handleKeyDown(e){if(e.defaultPrevented)return;const t=(0,c.hashFromEvent)(e);if(!we.includes(t))return;const s=document.activeElement;if(!(s instanceof HTMLButtonElement))return;const i=this._getRowRendererByChild(s);if(null===i)return;if(27===t)return void s.blur();const o=i.accessibleButtons(),l=o.indexOf(s);if(0===o.length||-1===l)return;const a=t=>{e.preventDefault();const s=this._getRowRenderers(),o=s.indexOf(i);let l,a,n="blockNext"===t?o+1:o-1;for(;n>=0&&n<s.length;){const e=s[n],i=e.accessibleButtons();if(0!==i.length){l=e,a=i;break}n="blockNext"===t?n+1:n-1}l&&a&&this._changeFocusElement(a[0],l)},n=(0,b.mapKeyCodeToDirection)(t);switch(n){case"inlinePrev":e.preventDefault(),this._changeFocusElement(0!==l?o[l-1]:o[o.length-1],i);break;case"inlineNext":e.preventDefault(),this._changeFocusElement(l!==o.length-1?o[l+1]:o[0],i);break;case"blockPrev":case"blockNext":a(n)}}_subscribeElementToFocusEvents(e,t){this._focusEventAbortController=new AbortController,e.addEventListener("focusin",(()=>{this._focusEventAbortController=new AbortController,e.addEventListener("focusout",(s=>{const i=s.relatedTarget;null!==i&&i instanceof HTMLButtonElement&&t.accessibleButtons().includes(i)||(this._subscribeElementToFocusEvents(e,t),t instanceof be||t.hideActions())}),{once:!0,signal:this._focusEventAbortController.signal}),this._options.onLegendRowFocused(),t instanceof be||t.showActions()}),{once:!0,signal:this._focusEventAbortController.signal})}_makeRowElementTheMainOne(e,t){this._subscribeElementToFocusEvents(e,t),(0,g.becomeMainElement)(e)}_changeFocusElement(e,t){document.activeElement&&(0,g.becomeSecondaryElement)(document.activeElement),this._makeRowElementTheMainOne(e,t),e.focus()}_getRowRenderers(){let e=[];return this._mainDataSourceRenderer&&e.push(this._mainDataSourceRenderer),this._dataSourcesEl&&!this._dataSourcesEl.classList.contains(Z.blockHidden)&&(this._togglerOptions.isDataSourcesCollapsed.value()&&1!==this._mode&&(e=e.concat(this._dataSourceRenderers)),
this._renderToggler&&0!==this._dataSourceRenderers.length&&e.push(this._renderToggler)),e}_getAllAccessibleButtons(){const e=[];return this._getRowRenderers().forEach((t=>{e.push(...t.accessibleButtons())})),e}_getRowRendererByChild(e){return this._getRowRenderers().find((t=>t.accessibleButtons().includes(e)))??null}}Se._wasKeyboardNavigationActivated=!1;var ye=s(242651),fe=s(288789),Ce=s(626185),Ee=s(791613),Me=s(560420),xe=s(993110),ke=s(94196),Ve=s(861814),Le=s(787540),Ae=s(172073),We=s(257381),Te=s(145889),Be=s(333898);class He{constructor({linkingGroupIndex:e,isLinkingAvailable:t,onClickHandler:i,setLinkingGroupIndex:o}){this._actionVisible=new r.WatchedValue(!1),this._menuShown=!1,this._isDestroyed=!1,this._linkingModeSubscription=e=>{if(null===e)return void(this._legendActionButtonElem.innerHTML=ke);const t=document.createElement("img");t.src=(0,Le.getTwemojiUrl)(Te.icons[e].icon,"svg"),t.width=t.height=18,this._legendActionButtonElem.replaceChildren(t)},this._setLinkingGroupIndexImpl=async e=>{this._setLinkingGroupIndex(e===this._linkingGroupIndex.value()?null:e),this._menuShown&&We.ContextMenuManager.hideAll()},this._showContextMenu=async e=>{e.preventDefault();const t=e.currentTarget;if(!(t&&t instanceof HTMLElement))return;if(this._onClickHandler?.(),this._menuShown)return void We.ContextMenuManager.hideAll();const s=await this._getActions();if(0===s.length)return;const{left:i,bottom:o}=t.getBoundingClientRect();await We.ContextMenuManager.showMenu(s,{clientX:i,clientY:o},{returnFocus:!0,takeFocus:!0,isKeyboardEvent:!("touches"in e)&&(0,M.isKeyboardClick)(e)},{menuName:"SymbolIntervalChartSyncingMenu"},(()=>{this._menuShown=!1})),this._menuShown=!0},this._linkingGroupIndex=e.spawn(),this._isLinkingAvailable=t.spawn(),this._onClickHandler=i,this._setLinkingGroupIndex=o;const l=this._legendActionButtonElem=document.createElement("span");l.className=Be.legendActionButton,this._action={icon:l,title:new r.WatchedValue(V.t(null,void 0,s(211831))),action:this._showContextMenu,visible:this._actionVisible.readonly(),className:ie.linking,dataset:{name:"legend-layout-chart-sync-action"}},this._linkingGroupIndex.subscribe(this._linkingModeSubscription,{callWithLast:!0}),this._isLinkingAvailable.subscribe((e=>this._actionVisible.setValue(e)),{callWithLast:!0})}destroy(){this._isDestroyed=!0,this._linkingGroupIndex.destroy(),this._isLinkingAvailable.destroy(),this._menuShown&&We.ContextMenuManager.hideAll()}getAction(){return this._action}async _getActions(){const[e,{LayoutChartsSyncContextMenuTitle:t},{LayoutChartsSyncContextMenuItem:i}]=await Promise.all([Promise.resolve().then(s.t.bind(s,50959,19)),Promise.all([s.e(44032),s.e(39759),s.e(52186),s.e(30158),s.e(14570),s.e(53093),s.e(10184)]).then(s.bind(s,728102)),Promise.all([s.e(44032),s.e(39759),s.e(52186),s.e(30158),s.e(14570),s.e(53093),s.e(10184)]).then(s.bind(s,209886))]);if(this._isDestroyed)return[];const o=Te.icons.map((({icon:e},t)=>new Ae.Action({actionId:"Chart.LinkingGroupSync.ChangeGroup",options:{label:e,checkable:!0,
checked:this._linkingGroupIndex.value()===t,onExecute:()=>this._setLinkingGroupIndexImpl(t)}})));this._linkingGroupIndex.subscribe((e=>{o.forEach(((t,s)=>{t.update({checked:s===e})}))}));return[new Ae.Action({actionId:"Chart.LinkingGroupSync",options:{icon:Ve,label:V.t(null,void 0,s(104086)),subItems:o},customActionOptions:{jsxLabel:e.createElement(e.Fragment,null,e.createElement(t,null),e.createElement(i,{active:this._linkingGroupIndex,icons:Te.icons,onClick:this._setLinkingGroupIndexImpl})),doNotCloseOnClick:!0,noInteractive:!0}})]}}var De=s(182124),Ie=s(218778),Pe=s(533699),Ne=s(607546),Re=s(849204),Oe=s(900210),ze=s(850117);const Fe=new ze.CircularCacheBuffer(100);class Ue{constructor(e,t){this._symbolLogoUrls=new r.WatchedValue([]),this._quoteDataForLogos=null,this._logoDataUpdated=()=>{const e=this.symbol(),t=this._logoData.value();t&&e&&Fe.set(e,t);const s=Fe.get(e);this._quoteDataForLogos=(0,d.merge)(s??{},this._logoData.value()??{}),this._symbolLogoUrls.setValue((0,Ne.removeUsdFromCryptoPairLogos)((0,Ne.resolveLogoUrls)(this._quoteDataForLogos,Re.LogoSize.Medium)))},this._logoModel=e,this._isLogoVisible=(0,Oe.createWVFromGetterAndSubscription)((()=>t.showLogo.value()),t.showLogo),this._logoData=this._logoModel.logoData().spawn(),this._logoData.subscribe(this._logoDataUpdated,{callWithLast:!0})}destroy(){this._isLogoVisible.destroy(),this._logoModel.destroy()}isSymbolLogoVisible(){return this._isLogoVisible}symbolLogoUrls(){return this._symbolLogoUrls}symbol(){return this._logoModel.symbol()}update(){this._logoModel.update()}}function Ge(e,t){return new Ue(e,t)}var Ze=s(395081),qe=s(735566);const je=(0,qe.getLogger)("Chart.LegendWidget");function Xe(e){const t={};for(const s of["logoid","currency-logoid","base-currency-logoid"])if(s in e){const i=s;t[i]=e[i]}return t}class Qe{constructor(e){this._logoData=new r.WatchedValue(null),this._prevSymbol="",this._source=e,this._source.quotesProvider().quotesUpdate().subscribe(this,this._onQuoteSymbolDataUpdated),this.update()}destroy(){this._source.quotesProvider().quotesUpdate().unsubscribeAll(this)}symbol(){return this._source.symbol()}logoData(){return this._logoData}update(){const e=this.symbol();this._prevSymbol!==e&&(this._prevSymbol=e,this._onSourceSymbolChange())}_onQuoteSymbolDataUpdated(e,t){const s=t.values;!this._source.symbolSameAsCurrent(e.values.pro_name)||void 0===s.logoid&&void 0===s["currency-logoid"]&&void 0===s["base-currency-logoid"]||this._logoData.setValue(Xe(s))}async _onSourceSymbolChange(){const e=this.symbol();let t=null;try{this._logoData.setValue(null),t=await this._source.quotesProvider().quotesSnapshot(e)}catch(e){je.logError(`Quote snapshot error: ${e}`)}finally{this.symbol()===e&&(null===t?this._logoData.setValue(null,!0):this._logoData.setValue(Xe(t)))}}_onSourceSymbolResolved(){0}}var Ke=s(754336),$e=s(841674),Je=s(387258),Ye=s(645534)
;const et=V.t(null,void 0,s(437117)),tt=V.t(null,void 0,s(44454)),st=V.t(null,void 0,s(13865)),it=V.t(null,void 0,s(963245)),ot=V.t(null,void 0,s(102569)),lt=p.enabled("legend_inplace_edit"),at=p.enabled("show_hide_button_in_legend"),nt=p.enabled("hide_resolution_in_legend"),rt=p.enabled("marked_symbols"),dt=!_.CheckMobile.any();class ut extends z{constructor(e,t,s,i,o){super(e,t,s,i,o),this._symbolMarker=null,this._symbolMarkerIcon=null,this._flagged=new r.WatchedValue(null),this._symbolAction=null,this._symbolForMarker=null,this._isOneButtonCanBeStick=!1,this._layoutChartSyncLegendRenderer=null,this._isChartLinked=new r.WatchedValue(!1).readonly().spawn(),dt&&(this._isLayoutChartSyncVisible=(0,a.combine)(((e,t,s)=>e&&(t||s)),this._model.isMultipleLayout().weakReference(),this._model.chartWidgetCollectionLock().symbol.weakReference(),this._model.chartWidgetCollectionLock().interval.weakReference()),this._isChartLinked=(0,a.combine)(((e,t)=>t&&null!==e),this._model.model().linkingGroupIndex().weakReference(),(this._isLayoutChartSyncVisible||new r.WatchedValue(!1)).weakReference())),this._createActions(),this._updateSymbolMarker();const l=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs();this._symbolLogoViewModel.setValue(Ge(new Qe(t),l)),l.showSeriesTitle.subscribe(this,(()=>{this._isTitleHidden.setValue(this._getTitleHiddenValue())})),this._isPriceSourceHidden=(0,fe.createWVFromGetterAndSubscription)((()=>!l.showPriceSource.value()),l.showPriceSource),this._valuesVisibleProperty=(0,fe.combineProperty)(((e,t,s,i)=>`${e}:${t}:${s}:${i}`),l.showSeriesOHLC.weakReference(),l.showBarChange.weakReference(),l.showVolume.weakReference(),l.showLastDayChange.weakReference()),this._valuesVisibleProperty.subscribe(null,(()=>{this.update(),this._isValuesHidden.setValue(this._getValuesHiddenValue())})),this.update(),this._source.statusWV().subscribe(this._updateLoadingStatus)}destroy(){dt&&(this._layoutChartSyncLegendRenderer?.destroy(),this._isChartLinked.destroy(),this._isLayoutChartSyncVisible?.destroy()),super.destroy(),this._model.model().properties().childs().paneProperties.childs().legendProperties.childs().showSeriesTitle.unsubscribeAll(this),this._source.statusWV().unsubscribe(this._updateLoadingStatus),this._valuesVisibleProperty.destroy(),this._isPriceSourceHidden.destroy(),this._symbolMarker?.destroy()}flagged(){return this._flagged}linked(){return this._isChartLinked}onShowSettings(){this._source.userEditEnabled()&&this._callbacks.showGeneralChartProperties(Ze.TabNames.symbol)}isOneButtonCanBeStick(){return this._isOneButtonCanBeStick}_updateTitles(){const e=(0,l.ensureNotNull)(this._source.statusView()).getSplitTitle(),t=[],s=this._getChangeSymbolCallback();let i=null;""!==(0,ye.clean)(e.title,!0)&&(i={title:(0,ye.clean)(e.title,!0),id:0,tooltip:s?it:void 0,onClick:s},t.push(i));const o=(0,ye.clean)(e.description,!0);""!==o&&t.push({title:o,id:1,tooltip:s?it:void 0,onClick:s});const a=(0,ye.clean)(e.interval,!0);if(""!==a&&!nt){const e=this._getChangeResolutionCallback()
;t.push({title:a,id:2,tooltip:e?ot:void 0,onClick:e})}const n=(0,ye.clean)(e.provider,!0);""!==n&&t.push({title:n,id:3});const r=(0,ye.clean)(e.exchange,!0),d=(0,Ie.redefineExchangeName)(r);""!==d&&t.push({title:d,id:4});const u=(0,ye.clean)(e.chartStyle,!0);""!==u&&t.push({title:u,id:5});const c=this._isPriceSourceHidden.value()?"":(0,ye.clean)(e.priceSource,!0);""!==c&&t.push({title:c,id:6}),this._titles.setValue(t)}_updateValues(){const e=this._source.legendView(),t=this._values.value(),s=e.marketTitle(),i=e.marketTitle().length>0,o=e.items();if(0===t.length||t.length!==o.length+1){const e={value:new r.WatchedValue(""),color:new r.WatchedValue(""),visible:new r.WatchedValue(i),title:new r.WatchedValue(s),unimportant:new r.WatchedValue(!1)},t=o.map((e=>({value:new r.WatchedValue(e.value()),color:new r.WatchedValue(D(e.color())),visible:new r.WatchedValue(e.visible()),title:new r.WatchedValue(e.title()),unimportant:new r.WatchedValue(e.unimportant())})));this._values.setValue([e].concat(t))}else{t[0].title.setValue(s),t[0].visible.setValue(i);for(let e=0;e<o.length;e++){const s=o[e];t[e+1].value.setValue(s.value()),t[e+1].color.setValue(D(s.color())),t[e+1].visible.setValue(s.visible()),t[e+1].title.setValue(s.title())}}}_updateStates(){super._updateStates(),this._updateSymbolMarker()}_getDisabledOnIntervalState(){return!1}_getTitleHiddenValue(){return!this._model.model().properties().childs().paneProperties.childs().legendProperties.childs().showSeriesTitle.value()}_getValuesHiddenValue(){return!this._hasValues()||!this._valuesVisibleProperty.value().split(":").some((e=>"true"===e))}_getChangeSymbolCallback(){if(lt&&!p.enabled("disable_legend_inplace_symbol_change"))return void 0===this._changeSymbolCallback&&(this._changeSymbolCallback=async()=>{const e=this._model.mainSeries(),t=e.symbol(),s=e.properties().childs().shortName.value(),i="option"===e.symbolInfo()?.type,o=e.symbolInfo()?.pro_name;let l=e.isSpread()?t:s||t||"";if(p.enabled("symbol_search_option_chain_selector")&&i&&o){const e=await(0,De.resolveUnderlyingSymbol)(o);e&&(l={type:"option",value:o,underlying:e})}(0,Me.showDialog)({defaultValue:l,enableOptionsChain:p.enabled("symbol_search_option_chain_selector")})}),this._changeSymbolCallback}_getChangeResolutionCallback(){if(lt)return void 0===this._changeResolutionCallback&&(this._changeResolutionCallback=()=>{(0,Ee.showChangeIntervalDialogAsync)({initVal:this._model.mainSeries().interval(),selectOnInit:!0})}),this._changeResolutionCallback}_createActions(){if(rt&&this._options.symbolMarkerEnabled){const e=document.createElement("div");e.classList.add(ie.markerContainer),this._symbolMarkerIcon=e,this._symbolAction={icon:e,action:this._symbolActionHandler.bind(this),visible:new r.WatchedValue(!0),className:ie.flag,title:new r.WatchedValue(this._getMarkerTitle()),dataset:{name:"legend-flag-action"}},this._actions.push(this._symbolAction)}if(dt&&this._isLayoutChartSyncVisible&&(this._layoutChartSyncLegendRenderer=new He({linkingGroupIndex:this._model.model().linkingGroupIndex().readonly(),
setLinkingGroupIndex:e=>this._model.setLinkingGroupIndex(e),isLinkingAvailable:this._isLayoutChartSyncVisible,onClickHandler:()=>this.setSourceSelected()}),this._actions.push(this._layoutChartSyncLegendRenderer.getAction())),at){const e=(0,Ce.convertPropertyToWatchedValue)((0,fe.combineProperty)((e=>!e),this._source.properties().childs().visible.weakReference())),t={icon:new Map([["large",$e],["small",Ke]]),action:(0,C.wrapHandlerWithPreventEvent)(this.onToggleDisabled.bind(this)),visible:e,className:ie.eye,title:new r.WatchedValue(this._getEyeTitle()),dataset:{name:"legend-show-hide-action"}};this._actions.push(t),this._disabled.subscribe((()=>{t.title?.setValue(this._getEyeTitle())}))}this._actions.push({icon:new Map([["large",Ye],["small",Je]]),action:this._moreActionHandler.bind(this),visible:new r.WatchedValue(!0),title:new r.WatchedValue(et),dataset:{name:"legend-more-action"}})}_getMarkerTitle(){return null!==this._symbolMarker?this._symbolMarker.isMarked()?st:tt:""}_symbolActionHandler(e){(0,C.preventDefault)(e),null!==this._symbolMarker&&(this._updateSymbolMarker(),e instanceof KeyboardEvent&&this._symbolMarker.toggle(e),W("Change flag state"))}_updateSymbolMarker(){if(rt&&this._options.symbolMarkerEnabled){const e=(0,l.ensureNotNull)(this._symbolAction),t=(0,l.ensureNotNull)(this._symbolMarkerIcon),s=this._model.model().mainSeries().symbolInfo()?.pro_name??this._model.model().mainSeries().symbol();this._symbolMarker?this._symbolForMarker!==s&&(this._symbolMarker.bindTo(s,t),this._symbolForMarker=s):(this._symbolMarker=(0,xe.createSymbolMarkerStandalone)({symbol:s,container:t,specialImage:Pe,className:ie.flagWrapper,onMarkedChanged:()=>this._updateSymbolMarker()}),this._symbolForMarker=s),this._flagged.setValue(this._symbolMarker.isMarked());(0,l.ensureDefined)(e.title).setValue(this._getMarkerTitle())}else this._isOneButtonCanBeStick=!0}}var ct=s(128090),ht=s(269794),pt=s(319259),_t=s(678949),mt=s(186335),gt=s(271587),bt=s(251954),vt=s(791488),wt=s(779923),St=s(583637),yt=s(236791),ft=s(34882),Ct=s(337073),Et=s(30556),Mt=s(591104);const xt=(0,qe.getLogger)("Chart.LegendWidget"),kt=V.t(null,void 0,s(232514)),Vt=V.t(null,void 0,s(787142)),Lt=V.t(null,void 0,s(767410)),At=V.t(null,void 0,s(437117)),Wt=V.t(null,void 0,s(974759)),Tt=V.t(null,void 0,s(963245)),Bt=p.enabled("study_buttons_in_legend"),Ht=p.enabled("show_hide_button_in_legend"),Dt=p.enabled("property_pages"),It=p.enabled("format_button_in_legend"),Pt=p.enabled("delete_button_in_legend"),Nt=p.enabled("legend_inplace_edit");class Rt extends z{constructor(e,t,s,i,o){super(e,t,s,i,o),this._error=new r.WatchedValue(!1),this._isAbleShowSourceCode=new r.WatchedValue(!1),this._isAbleShowSourceCodeInner=new r.WatchedValue(!1).spawn(),this._pineAction=null,this._pineActionVisible=null,this._globalVisibility=new r.WatchedValue(!0),this._updateSymbolLogoModel(),this._createActions();const l=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs(),a=[l.showSeriesTitle,l.showStudyTitles];for(const e of a)e.subscribe(this,(()=>{
this._isTitleHidden.setValue(this._getTitleHiddenValue())}));const n=[l.showSeriesOHLC,l.showBarChange,l.showStudyValues,l.showLastDayChange,l.showSeriesLegendCloseOnMobile];for(const e of n)e.subscribe(this,(()=>{this._isValuesHidden.setValue(this._getValuesHiddenValue())}));this.update(),bt.subscribe(vt.TV_SCRIPT_DELETED,this.update,this),this._updateAbleShowSourceCode()}destroy(){super.destroy();const e=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs();e.showSeriesTitle.unsubscribeAll(this),e.showStudyTitles.unsubscribeAll(this),e.showSeriesOHLC.unsubscribeAll(this),e.showBarChange.unsubscribeAll(this),e.showStudyValues.unsubscribeAll(this),e.showLastDayChange.unsubscribeAll(this),e.showSeriesLegendCloseOnMobile.unsubscribeAll(this),this._isAbleShowSourceCodeInner.destroy(),bt.unsubscribe(vt.TV_SCRIPT_DELETED,this.update,this)}error(){return this._error.readonly()}isAbleShowSourceCode(){return this._isAbleShowSourceCode}onRemoveSource(){if(this._source.isUserDeletable()){if((0,ct.isStudy)(this._source)&&this._source.hasChildren()){const e=this._source.getAllChildren().map((e=>e.name(!0)));(0,ht.showDeleteStudyTreeConfirm)(e,this._model.removeSource.bind(this._model,this._source,!1))}else this._model.removeSource(this._source,!1);W("Remove sources")}}async onShowSourceCode(){{const e=this._source.pineSourceCodeModel?.()??Promise.resolve(null);if(e)try{const t=await e;if(this._destroyed)return;t?.isAbleShowSourceCode().value()&&(t.showPineSourceCode(),W("Open source code for pine scripts"))}catch(e){xt.logError(`${e}`),(0,wt.showWarning)({title:V.t(null,void 0,s(212388)),text:V.t(null,void 0,s(327527)),buttonText:V.t(null,void 0,s(515462))})}}}setGlobalVisibility(e){this._globalVisibility.setValue(e)}globalVisibility(){return this._globalVisibility.readonly()}getFullTitle(){return this._titles.value().map((e=>H(e)?e.items.map((e=>e.title)).join(" "):e.title)).join(" ")}getSource(){return this._source}_updateTitles(){const e=(0,l.ensureNotNull)(this._source.statusView()),t=e.getSplitTitle(),s=[],i=(0,ye.clean)(t[0],!0);if(""!==i){const t=this._getChangeSymbolCallback();s.push({title:i,id:t?8:7,tooltip:t?Tt:e.titleTooltip(),onClick:t})}const o=[];(e.getInputsTitles()??[]).forEach((e=>{const t=(0,ye.clean)(e.value,!0);""!==t&&o.push({title:t,tooltip:e.title,id:9})})),0!==o.length&&s.push({id:9,items:o}),this._titles.setValue(s)}_updateValues(){const e=this._source.legendView();if(null===e)return;if(0===e.items().length)return;const t=this._values.value();if(0===t.length){const t=e.items().map((e=>({value:new r.WatchedValue(e.value()),color:new r.WatchedValue(D(e.color())),visible:new r.WatchedValue(e.visible()),unimportant:new r.WatchedValue(e.unimportant()),title:new r.WatchedValue(e.title())})));this._values.setValue(t)}else{const s=e.items();for(let e=0;e<s.length;e++){const i=t[e],o=s[e];i.value.setValue(o.value()),i.color.setValue(D(o.color())),i.visible.setValue(o.visible()),i.title.setValue(o.title())}}}_updateStates(){super._updateStates(),
void 0!==this._error&&this._error.setValue(Boolean(this._source.isFailed()))}_getTitleHiddenValue(){const e=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs();return this._isSymbolLikeStudy()?!e.showSeriesTitle.value():!e.showStudyTitles.value()}_getDisabledOnIntervalState(){return!(!(0,ct.isStudy)(this._source)&&!(0,ct.isStudyStub)(this._source))&&!this._source.isActualInterval()}_getValuesHiddenValue(){if(!this._hasValues())return!0;const e=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs();return this._isSymbolLikeStudy()?!e.showSeriesOHLC.value()&&!e.showBarChange.value()&&!e.showLastDayChange.value():!e.showStudyValues.value()}_isSymbolLikeStudy(){return(0,ct.isCompareOrOverlayStudy)(this._source)}_getChangeSymbolCallback(){const e=this._source;if(Nt&&(0,_t.isSymbolSourceWithQuotesProvider)(e))return void 0===this._changeSymbolCallback&&(this._changeSymbolCallback=()=>{let t=null;const s=t=(0,mt.loadNewSymbolSearch)().then((async i=>{if(s!==t)return;const o=e.symbol(),l=(0,ee.safeShortName)(o),a="spread"===e.symbolInfo()?.type,n="option"===e.symbolInfo()?.type,r=e.symbolInfo()?.pro_name;let d=a?o:l||o||"";if(p.enabled("symbol_search_option_chain_selector")&&n&&r){const e=await(0,De.resolveUnderlyingSymbol)(r);e&&(d={type:"option",value:r,underlying:e})}const u=(0,gt.getSymbolSearchCompleteOverrideFunction)();i.showSymbolSearchItemsDialog({onSearchComplete:t=>{u(t[0].symbol,t[0].result).then((t=>{this._model.setSymbol(e,t.symbol)}))},dialogTitle:Tt,defaultValue:d,enableOptionsChain:p.enabled("symbol_search_option_chain_selector"),showSpreadActions:p.enabled("show_spread_operators")&&p.enabled("studies_symbol_search_spread_operators")})}))}),this._changeSymbolCallback}async _updateAbleShowSourceCode(){if(Bt&&this._options.canShowSourceCode&&!this._options.readOnlyMode){const e=this._source.pineSourceCodeModel?.()??Promise.resolve(null);if(e){const t=await e;if(this._destroyed)return;this._isAbleShowSourceCodeInner.destroy(),this._isAbleShowSourceCodeInner=t?.isAbleShowSourceCode().spawn()??new r.WatchedValue(!1).spawn(),this._isAbleShowSourceCodeInner.subscribe((e=>{this._updateVisibilityPineAction(e)}),{callWithLast:!0})}}}_updateVisibilityPineAction(e){null!==this._pineActionVisible&&(this._pineActionVisible.setValue(e),this._isAbleShowSourceCode.setValue(e))}_createActions(){if(!this._options.readOnlyMode){if(this._pineActionVisible=new r.WatchedValue(!1),this._pineAction={icon:new Map([["large",Ct],["small",ft]]),action:(0,C.wrapHandlerWithPreventEvent)(this.onShowSourceCode.bind(this)),disableAccessibility:!0,visible:this._pineActionVisible.readonly(),title:new r.WatchedValue(Vt),dataset:{name:"legend-pine-action"}},Ht){const e=new r.WatchedValue(!this._getDisabledOnIntervalState()),t={icon:new Map([["large",$e],["small",Ke]]),action:(0,C.wrapHandlerWithPreventEvent)(this.onToggleDisabled.bind(this)),visible:e.readonly(),className:ie.eye,title:new r.WatchedValue(this._getEyeTitle()),dataset:{name:"legend-show-hide-action"}}
;this._actions.push(t),this._disabled.subscribe((()=>{t.title?.setValue(this._getEyeTitle())}));const s=new r.WatchedValue(this._getDisabledOnIntervalState()),i={icon:new Map([["large",$e],["small",Ke]]),action:(0,C.wrapHandlerWithPreventEvent)(this.onShowSettings.bind(this,Ze.TabNames.visibility)),visible:s.readonly(),className:ie.intervalEye,title:new r.WatchedValue(Wt),dataset:{name:"legend-interval-show-hide-action"}};this._actions.push(i),this._disabledOnInterval.subscribe((t=>{s.setValue(t),e.setValue(!t)}))}if(Dt&&It&&(!(0,ct.isStudy)(this._source)||new pt.MetaInfoHelper(this._source.metaInfo()).hasUserEditableOptions())){const e=new r.WatchedValue(this._getIsEditable()),t={icon:new Map([["large",yt],["small",St]]),action:(0,C.wrapHandlerWithPreventEvent)((()=>this.onShowSettings())),visible:e.readonly(),title:new r.WatchedValue(kt),dataset:{name:"legend-settings-action"}};this._actions.push(t),this._isEditable.subscribe((t=>{e.setValue(t)}))}if(((0,ct.isStudy)(this._source)||(0,ct.isStudyStub)(this._source))&&Bt&&this._options.canShowSourceCode&&this._actions.push(this._pineAction),Pt){const e=new r.WatchedValue(this._getIsEditable()),t={icon:new Map([["large",Mt],["small",Et]]),action:(0,C.wrapHandlerWithPreventEvent)(this.onRemoveSource.bind(this)),visible:e.readonly(),title:new r.WatchedValue(Lt),dataset:{name:"legend-delete-action"}};this._actions.push(t),this._isEditable.subscribe((t=>{e.setValue(t)}))}this._actions.push({icon:new Map([["large",Ye],["small",Je]]),action:this._moreActionHandler.bind(this),visible:this._isEditable.spawn(),title:new r.WatchedValue(At),dataset:{name:"legend-more-action"}})}}_updateSymbolLogoModel(){if(this._symbolLogoViewModel.value()?.destroy(),(0,_t.isSymbolSourceWithQuotesProvider)(this._source)){const e=this._model.model().properties().childs().paneProperties.childs().legendProperties.childs(),t=Ge(new Qe(this._source),e);this._symbolLogoViewModel.setValue(t)}else this._symbolLogoViewModel.setValue(null)}}var Ot=s(388741),zt=s(916013),Ft=s(16241),Ut=s(830101),Gt=s(798218);function Zt(e,t,s){e.setProperty(t,!t.value(),s)}const qt=new L.TranslatedString("change symbol description visibility",V.t(null,void 0,s(288167))),jt=new L.TranslatedString("change open market status visibility",V.t(null,void 0,s(196227))),Xt=new L.TranslatedString("change chart values visibility",V.t(null,void 0,s(479637))),Qt=new L.TranslatedString("change last day change visibility",V.t(null,void 0,s(66307))),Kt=new L.TranslatedString("change bar change visibility",V.t(null,void 0,s(927426))),$t=new L.TranslatedString("change indicator titles visibility",V.t(null,void 0,s(463050))),Jt=new L.TranslatedString("change indicator inputs visibility",V.t(null,void 0,s(775663))),Yt=new L.TranslatedString("change indicator values visibility",V.t(null,void 0,s(749583))),es=new L.TranslatedString("change volume values visibility",V.t(null,void 0,s(796201))),ts=(new L.TranslatedString("change symbol field visibility",V.t(null,void 0,s(412050))),
V.t(null,void 0,s(14771))),ss=V.t(null,void 0,s(825765)),is=V.t(null,void 0,s(845639)),os=V.t(null,void 0,s(672423)),ls=V.t(null,void 0,s(810842)),as=V.t(null,void 0,s(937644)),ns=V.t(null,void 0,s(407511)),rs=V.t(null,void 0,s(233828)),ds=V.t(null,void 0,s(151353)),us=(V.t(null,void 0,s(923079)),(0,Ft.appendEllipsis)(V.t(null,void 0,s(232514)))),cs=(e,t)=>e?e.dataset[t]?e.dataset[t]:e.parentElement?cs(e.parentElement,t):null:null;var hs=s(519073),ps=s(25433),_s=s(790188),ms=s(927301),gs=s(398851),bs=s(707934),vs=s(786220),ws=s(512646),Ss=s(931233),ys=s(55593),fs=s(469410),Cs=s(552828),Es=s(991665),Ms=s(839379),xs=s(838373),ks=s(79304),Vs=s(421672),Ls=s(492315),As=s(672844),Ws=s(323683),Ts=s(441614),Bs=s(189771),Hs=s(792845),Ds=s(109494),Is=s(378849),Ps=s(986365),Ns=s(930545),Rs=s(225128),Os=s(207755),zs=s(669058);const Fs=new Map([["small",ws],["medium",Ss],["large",Ss]]),Us=new Map([["small",ys],["medium",fs],["large",fs]]),Gs=new Map([["small",Cs],["medium",Es],["large",Es]]),Zs=(new Map([["small",Ms],["medium",Ms],["large",Ms]]),new Map([["small",As],["medium",Ws],["large",Ws]]),new Map([["small",Ts],["medium",Bs],["large",Bs]])),qs=new Map([["small",xs],["medium",ks],["large",ks]]),js=(new Map([["small",Is],["medium",Ps],["large",Ps]]),new Map([["small",Vs],["medium",Ls],["large",Ls]]),new Map([["small",Hs],["medium",Ds],["large",Ds]]),new Map([["small",Ns],["medium",Rs],["large",Rs]])),Xs=(new Map([["small",Os],["medium",zs],["large",zs]]),_s.colorsPalette["color-delay-mode"]),Qs=_s.colorsPalette["color-eod-mode"],Ks=_s.colorsPalette["color-notaccurate-mode"],$s=(_s.colorsPalette["color-primary-symbol"],_s.colorsPalette["color-halal"]),Js=(_s.colorsPalette["color-continuous"],_s.colorsPalette["color-data-problem"],_s.colorsPalette["color-data-problem"],_s.colorsPalette["color-market-expired"],_s.colorsPalette["color-grapes-purple-400"]),Ys=_s.colorsPalette["color-ripe-red-600"],ei=(_s.colorsPalette["color-container-fill-primary-neutral-heavy"],43000700852),ti=V.t(null,void 0,s(543348)),si=V.t(null,void 0,s(705805)),ii=V.t(null,void 0,s(991006)),oi=V.t(null,void 0,s(58796)),li=V.t(null,void 0,s(655154)),ai=V.t(null,void 0,s(944138)),ni=(V.t(null,void 0,s(994972)),V.t(null,void 0,s(295246)),V.t(null,void 0,s(50035)),V.t(null,void 0,s(619481)),V.t(null,void 0,s(675119))),ri=V.t(null,void 0,s(667607)),di=V.t(null,void 0,s(484484)),ui=(e,t)=>(0,ms.htmlEscape)(V.t(null,{plural:"{symbolName} data is delayed by {time} minutes because of exchange requirements.",count:t,replace:{symbolName:e,time:t.toString()}},s(881227))),ci=(0,ms.htmlEscape)(V.t(null,void 0,s(651211))),hi=(0,ms.htmlEscape)(V.t(null,void 0,s(807281))),pi=(0,ms.htmlEscape)(V.t(null,void 0,s(920987))),_i=(0,ms.htmlEscape)(V.t(null,void 0,s(932925))),mi=(0,ms.htmlEscape)(V.t(null,void 0,s(138368))),gi=(0,ms.htmlEscape)(V.t(null,void 0,s(833039))),bi=(0,ms.htmlEscape)(V.t(null,void 0,s(23998))),vi=(0,ms.htmlEscape)(V.t(null,void 0,s(195400))),wi=V.t(null,void 0,s(131539)),Si=(V.t(null,{
context:'Part of: "Real-time data for {symbolName} is provided by {exchange} exchange."'},s(348473)),V.t(null,{context:'Part of: "Real-time data for {symbolName} is provided by {exchange} exchange."'},s(684455)),V.t(null,void 0,s(624669))),yi=V.t(null,void 0,s(352668)),fi=V.t(null,void 0,s(344492)),Ci=(V.t(null,void 0,s(840225)),V.t(null,void 0,s(871847)),V.t(null,void 0,s(439664))),Ei=V.t(null,void 0,s(172723)),Mi=V.t(null,void 0,s(925608)),xi=V.t(null,void 0,s(733161)),ki=V.t(null,void 0,s(199452)),Vi=V.t(null,void 0,s(90589)),Li=V.t(null,void 0,s(443383)),Ai=V.t(null,void 0,s(414181)),Wi=V.t(null,void 0,s(419679)),Ti=V.t(null,void 0,s(284937)),Bi=V.t(null,void 0,s(934987)),Hi=V.t(null,void 0,s(759269)),Di=V.t(null,void 0,s(801356)),Ii=V.t(null,void 0,s(396341));var Pi=s(399473),Ni=s(62802);const Ri="tv.alreadyBlinkedStatuses",Oi=[];function zi(){return Ni.getJSON(Ri,Oi)}const Fi=new r.WatchedValue(zi());function Ui(e){const t=Ni.getJSON(Ri,Oi);t.includes(e)||(t.push(e),Ni.setJSON(Ri,t),Fi.setValue(zi()))}Ni.onSync.subscribe(null,(()=>Fi.setValue(zi())));const Gi=Fi;var Zi=s(776734),qi=s(678708),ji=s(825957),Xi=s(388130);async function Qi(e){void 0===e.isExpert&&(e={...e,isExpert:window.user.declared_status===Xi.UserStatus.Pro});(await Promise.all([s.e(14324),s.e(61681),s.e(98933),s.e(78894),s.e(39759),s.e(73425),s.e(52186),s.e(65743),s.e(76052),s.e(14391),s.e(43329),s.e(84712),s.e(13485),s.e(27702),s.e(69965),s.e(11069),s.e(59546),s.e(63585),s.e(26070),s.e(38490),s.e(94036),s.e(54930),s.e(17840),s.e(10330),s.e(93945),s.e(15878),s.e(12831),s.e(59844),s.e(6207),s.e(31093),s.e(61932)]).then(s.bind(s,214905))).openExchangeAgreementDialog(e)}var Ki=s(107447),$i=s(199241);const Ji=(0,
qe.getLogger)("Chart.LegendWidget"),Yi=["TFEXDelayForGuest","MILDelayForGuest","NGMDelayForGuest","DEForGuest","ICESGDelayForGuest","TAIFEXDelayForGuest","TURQUOISEDelayForGuest","ADXDelayForGuest","TRADEGATEDelayForGuest","LUXSEDelayForGuest","NSENGDelayForGuest","FINRADelayForGuest","AQUISDelayForGuest"],eo=new Map([["DelayToRealtime",Fs],["DelayNoRealtime",Fs],["TFEXDelayForGuest",Fs],["MILDelayForGuest",Fs],["NGMDelayForGuest",Fs],["ICESGDelayForGuest",Fs],["TAIFEXDelayForGuest",Fs],["TURQUOISEDelayForGuest",Fs],["ADXDelayForGuest",Fs],["TRADEGATEDelayForGuest",Fs],["LUXSEDelayForGuest",Fs],["NSENGDelayForGuest",Fs],["FINRADelayForGuest",Fs],["AQUISDelayForGuest",Fs],["DEForGuest",Fs],["EOD",Us],["TickByTick",Gs],["BATSToRealtime",Gs],["DelayWithoutMarketAgreement",Fs]]),to=new Map([["DelayToRealtime",$i.delay],["DelayNoRealtime",$i.delay],["TFEXDelayForGuest",$i.delay],["MILDelayForGuest",$i.delay],["NGMDelayForGuest",$i.delay],["ICESGDelayForGuest",$i.delay],["TAIFEXDelayForGuest",$i.delay],["TURQUOISEDelayForGuest",$i.delay],["ADXDelayForGuest",$i.delay],["TRADEGATEDelayForGuest",$i.delay],["LUXSEDelayForGuest",$i.delay],["NSENGDelayForGuest",$i.delay],["FINRADelayForGuest",$i.delay],["AQUISDelayForGuest",$i.delay],["DEForGuest",$i.delay],["EOD",$i.eod],["TickByTick",$i.notAccurate],["BATSToRealtime",$i.notAccurate],["DelayWithoutMarketAgreement",$i.delay]]),so=new Map([["DelayToRealtime",Xs],["DelayNoRealtime",Xs],["TFEXDelayForGuest",Xs],["MILDelayForGuest",Xs],["NGMDelayForGuest",Xs],["ICESGDelayForGuest",Xs],["TAIFEXDelayForGuest",Xs],["TURQUOISEDelayForGuest",Xs],["ADXDelayForGuest",Xs],["TRADEGATEDelayForGuest",Xs],["LUXSEDelayForGuest",Xs],["NSENGDelayForGuest",Xs],["FINRADelayForGuest",Xs],["AQUISDelayForGuest",Xs],["DEForGuest",Xs],["EOD",Qs],["TickByTick",Ks],["BATSToRealtime",Ks],["DelayWithoutMarketAgreement",Xs]]),io=V.t(null,void 0,s(928214)),oo=V.t(null,void 0,s(327741)),lo=(0,ms.htmlEscape)(V.t(null,void 0,s(605447)));class ao extends vs.StatusViewModel{constructor(e,t,s){super({iconMap:eo,classNameMap:to,titleColorMap:so,size:t}),this._dataUpdatedInfo=new r.WatchedValue(null).spawn(),this._onMarketStatusChanged=()=>{this._updateByStatus(this.status().value())},this._options=s,this._model=e,this._dataModeBlinkingStatuses=Gi.spawn(),this._dataModeBlinkingStatuses.subscribe(this._updateBlinkingMode.bind(this)),this._options.marketStatus?.subscribe(this._onMarketStatusChanged),this.turnOffBlinkingMode=this._turnOffBlinking.bind(this),this.setModel(e)}destroy(){this._dataUpdatedInfo.destroy(),this._dataModeBlinkingStatuses.destroy(),this._options.marketStatus?.unsubscribe(this._onMarketStatusChanged),this._options.marketStatus?.release(),super.destroy()}setModel(e){if(this._dataUpdatedInfo.destroy(),null===e)return this._model=e,void(this._dataUpdatedInfo=new r.WatchedValue(null).spawn());this._dataUpdatedInfo=e.status().spawn(),this._dataUpdatedInfo.subscribe(this._updateStatus.bind(this),{callWithLast:!0})}_shouldBeHiddenByStatus(e){const t=this._options.marketStatus?.value()
;return"expired"===t||"delisted"===t||(!("BATSToRealtime"!==e||!this._model?.isSpread())||super._shouldBeHiddenByStatus(e))}_getTooltip(){const e=this._getShortTexts();return null===e?null:Object.values(e).join("  ")}async _updateFullTooltip(){const e=this._dataUpdatedInfo.value(),t=this._status.value();if(null===e||null===t)return void this._fullTooltip.setValue(null);const s=this._getShortTexts(),[i,o]=await Promise.all([this._getHtmls(),this._getActions()]);if(e!==this._dataUpdatedInfo.value())return;const l=[];for(const t of e){const e=t.mode;"BATSToRealtime"===e&&this._model?.isSpread()||l.push({icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:s&&s[e],titleColor:this._getTitleColor(e),html:i&&i[e],size:this._size,action:o&&o[e]})}this._fullTooltip.setValue(l)}_updateStatus(e){const t=null!==e?e[0].mode:null;this._status.setValue(t??null,!0),this._updateBlinkingMode()}async _getHtmls(){const e=this._dataUpdatedInfo.value();if(null===e||null===this._model)return Promise.resolve(null);const t={},i=this._model.symbolName();let o=null,l=null;try{o=await this._model.description(),l=this._model.exchange(),l=(0,Ie.redefineExchangeName)(l)}catch(e){Ji.logError(`Can't get exchange description, reason: ${(0,Ki.errorToString)(e)}`)}for(const a of e){const e=a.mode;if(t[e]=[],["DelayToRealtime","DelayNoRealtime","DelayWithoutMarketAgreement",...Yi].includes(e)&&(t[e].push(ui(i,this._model.time())),this._options.subscriptionFullInfo&&null!==o&&"DelayToRealtime"===e&&t[e].push(hi.format({description:`<b>${o}</b>`})),"DelayNoRealtime"===e&&t[e].push(pi),"DelayWithoutMarketAgreement"===e&&t[e].push(vi.format({listedExchange:this._model.listedExchange()})),this._options.subscriptionFullInfo&&Yi.includes(e)&&t[e].push(ci.format({listedExchange:this._model.listedExchange()}))),"EOD"===e&&(t[e]=[_i]),"TickByTick"===e){const i=void 0===a.updatePeriod?mi:(0,ms.htmlEscape)(V.t(null,{count:a.updatePeriod,replace:{amount:(a.updatePeriod??1).toString()},plural:"Data on our Basic plan is updated once every {amount} seconds, even if there are more updates on the market."},s(683978))),o=void 0===a.updatePeriod?gi:(0,ms.htmlEscape)(V.t(null,{count:a.updatePeriod,replace:{amount:(a.updatePeriod??1).toString()},plural:"Data is updated once every {amount} seconds, even if there are more updates on the market."},s(851931)));t[e].push(this._options.subscriptionFullInfo?i:o),this._options.subscriptionFullInfo&&t[e].push(bi)}if(null!==l&&"BATSToRealtime"===e){let s=this._model.listedExchange();const o=(0,Pi.isAmexToCboeMigratedSymbol)(s,this._model.proPerm());{const e=o?"AMEX":s;s=(0,Ie.redefineExchangeName)(e)}Pi.CRUCIAL_REALTIME_BATS.includes(this._model.listedExchange())||o?t[e].push(fi.format({exchange:s,originalExchange:oi})):t[e].push(wi.format({symbolName:i,exchange:l}),""!==s?(0,ms.htmlEscape)(yi).format({exchange:s}):(0,ms.htmlEscape)(Si))}}return Object.keys(t).length>0?t:null}async _getActions(){const e=this._dataUpdatedInfo.value();if(null===e||null===this._model)return null;const t={}
;if(this._options.subscriptionFullInfo)for(const i of e){const e=i.mode;if(Yi.includes(i.mode)&&(t[e]={text:io,onClick:()=>{(0,qi.showSignModal)({source:"Data warning indicator"})}}),"DelayWithoutMarketAgreement"===e){const s=this._model.proPerm()||this._model.exchange();t[e]={text:lo,onClick:()=>{Qi({exchange:s.toLowerCase(),hideCloseButton:!1})}}}if("BATSToRealtime"===e){const i=this._model.listedExchange(),o=(0,Pi.isAmexToCboeMigratedSymbol)(i,this._model.proPerm());if(Pi.CRUCIAL_REALTIME_BATS.includes(i)||o){const l=oi;let a=i;{const e=o?"AMEX":i;a=(0,Ie.redefineExchangeName)(e)}const n=o?V.t(null,{replace:{listedExchange:i,originalExchange:l}},s(126081)):"",r={country:this._model.country(),link:"https://www.cboe.com/us/equities/market_statistics",exchange:this._model.exchange()??null,originalExchange:l,listedExchange:a,titleOverride:n,symbolName:this._model.symbolName(),proPerm:this._model.proPerm()};t[e]=this._goProDialogAction(e,r)}else t[e]={text:oo,onClick:()=>{this._showSupportDialogForUpdateMode(43000473924)}}}if("TickByTick"===e||"DelayToRealtime"===e){let s=null,i=null;try{s=await this._model.description(),i=this._model.exchange()}catch(e){Ji.logError(`Can't get exchange description, reason: ${(0,Ki.errorToString)(e)}`)}const o={time:this._model.time(),exchange:i,listedExchange:this._model.listedExchange(),description:s,symbolName:this._model.symbolName(),username:window.user?window.user.username:"",proPerm:this._model.proPerm()};t[e]=this._goProDialogAction(e,o)}}return Object.keys(t).length>0?t:null}_showSupportDialogForUpdateMode(e){if((0,ji.showSupportDialog)({solutionId:e}),null===this._model)return;const t=this._model.proName();(0,Zi.getTracker)().then((e=>e&&t&&e.trackMarketDataSolutionEvent(t)))}_getShortTexts(){const e=this._dataUpdatedInfo.value();if(null===e||null===this._model)return null;const t={};for(const i of e){const e=i.mode;if(["DelayToRealtime","DelayNoRealtime",...Yi,"DelayWithoutMarketAgreement"].includes(e)&&(t[e]=ti),"EOD"===e&&(t[e]=si),"TickByTick"===e){const o=void 0===i.updatePeriod?ii:(0,ms.htmlEscape)(V.t(null,{plural:"One update every {amount} seconds",count:i.updatePeriod,replace:{amount:(i.updatePeriod??1).toString()}},s(36050)));t[e]=o}if("BATSToRealtime"===e){let s=this._model.firstReplacedByBatsExchange()??"";s=(0,Ie.redefineExchangeName)(s),t[e]=""!==s?li.format({exchange:s,originalExchange:oi}):oi}}return Object.keys(t).length>0?t:null}_updateBlinkingMode(){const e=this._dataUpdatedInfo.value();if(null===e)return;const t=this._dataModeBlinkingStatuses.value();for(const s of e)if(!t.includes(s.mode))return void this.isBlinkingMode.setValue(!0);this.isBlinkingMode.setValue(!1)}_turnOffBlinking(){const e=this._dataUpdatedInfo.value();if(null!==e)for(const t of e)Ui(t.mode)}_goProDialogAction(e,t={}){return{text:oo,onClick:()=>{null!==this._model&&(0,bs.createGoProDialog)({forceUpgradeBtn:!0,goOnMarkets:!0,customParams:t,upgradeMessage:V.t(null,void 0,s(570032)),feature:e}).then((()=>{(0,A.trackEvent)("Data Warning","Full description visible",e)}))}}}}
const no=V.t(null,void 0,s(586158)),ro=new Map([[!0,new Map([["small",xs],["medium",ks],["large",ks]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),uo=new Map([[!0,$i.dataProblemLow],[!1,null]]),co=new Map([[!0,no],[!1,null]]),ho=new Map([[!0,no],[!1,null]]),po=new Map([[!0,_s.colorsPalette["color-data-problem"]],[!1,null]]);class _o extends vs.StatusViewModel{constructor(e,t,s){super({iconMap:ro,classNameMap:uo,tooltipMap:co,titleMap:ho,titleColorMap:po,size:t}),this._dataSourceErrorStatus=new r.WatchedValue(null).spawn(),this._lastError=null,this._options=s,this.setSource(e)}destroy(){this._dataSourceErrorStatus.destroy(),super.destroy()}setSource(e){this._dataSourceErrorStatus.destroy(),this._dataSourceErrorStatus=e.errorStatus().spawn(),this._dataSourceErrorStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0})}_getTooltip(e){return(e?this._getDataSourceErrorStatusCustomTitle():null)??super._getTooltip(e)}_getTitle(e){return(e?this._getDataSourceErrorStatusCustomTitle():null)??super._getTitle(e)}async _updateFullTooltip(){const e=this._status.value(),t=this._dataSourceErrorStatus.value();null!==e&&null!==t?this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:void 0===t.stackTrace?[(0,gs.formatStudyError)((0,ms.htmlEscape)(t.error))]:null,size:this._size,action:this._getAction(e),solutionId:this._options.errorSolution?this._dataSourceErrorStatus.value()?.solutionId:void 0,dataTestId:"data-source-error-status"}]):this._fullTooltip.setValue(null)}_getAction(e){const t=this._dataSourceErrorStatus.value();if(this._options.errorSolution&&null!==t){const{studyFeature:e}=t;if(e)return{text:oo,onClick:()=>(0,bs.createGoProDialog)({feature:e})}}return null}_updateStatus(e){const t=this._status.value();null!==e?(this._status.setValue(!0),t&&this._lastError!==e.error&&this._updateByStatus(!0),this._lastError=e.error):(this._status.setValue(null),this._lastError=null)}_getDataSourceErrorStatusCustomTitle(){return this._dataSourceErrorStatus.value()?.title||null}}const mo=V.t(null,void 0,s(178992)),go=new Map([["high",new Map([["small",xs],["medium",ks],["large",ks]])],["low",new Map([["small",xs],["medium",ks],["large",ks]])]]),bo=new Map([["high",$i.dataProblemHigh],["low",$i.dataProblemLow]]),vo=new Map([["high",mo],["low",mo]]),wo=new Map([["high",_s.colorsPalette["color-data-problem"]],["low",_s.colorsPalette["color-data-problem"]]]);class So extends vs.StatusViewModel{constructor(e,t){super({tooltipMap:vo,iconMap:go,classNameMap:bo,titleMap:vo,titleColorMap:wo,size:t}),this._dataProblems=new r.WatchedValue([]).spawn(),this._isDataProblemCritical=new r.WatchedValue(!1),this.setModel(e)}destroy(){this._dataProblems.destroy(),super.destroy()}isDataProblemCritical(){return this._isDataProblemCritical}setModel(e){this._dataProblems.destroy(),null!==e?(this._dataProblems=e.dataProblems().spawn(),this._dataProblems.subscribe(this._updateStatus.bind(this),{callWithLast:!0
})):this._dataProblems=new r.WatchedValue([]).spawn()}async _updateFullTooltip(){const e=this.status().value(),t=this._dataProblems.value();if(null===e||0===t.length)return void this._fullTooltip.setValue(null);const s=t.map(((t,s)=>({icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:t.title??(0===s?this._getTitle(e):null),titleColor:this._getTitleColor(e),html:[(0,ms.htmlEscape)(t.text)],size:this._size,action:this._getAction(e)})));this._fullTooltip.setValue(s)}_getTooltip(e){return this._getDataProblemCustomTitle()??super._getTooltip(e)}_getTitle(e){return this._getDataProblemCustomTitle()??super._getTitle(e)}_updateStatus(e){const t=e[0]?.severity??null,s=this._status.value()!==t;this._status.setValue(t),this._isDataProblemCritical.setValue(function(e){return"high"===e}(t)),s||this._updateFullTooltip()}_getDataProblemCustomTitle(){return this._dataProblems.value()?.[0]?.title||null}}class yo extends vs.StatusViewModel{constructor(e,t){super(t),this._booleanStatus=new r.WatchedValue(!1).spawn(),this.updateStatus(e)}destroy(){this._booleanStatus.destroy(),super.destroy()}updateStatus(e){this._booleanStatus.destroy(),this._booleanStatus=e.spawn(),this._booleanStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0})}_updateStatus(e){e?this._status.setValue(!0):this._status.setValue(null)}}const fo=V.t(null,void 0,s(314285)),Co=V.t(null,void 0,s(453272)),Eo=new Map([[!0,new Map([["small",xs],["medium",ks],["large",ks]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),Mo=new Map([[!0,$i.invalidSymbol],[!1,null]]),xo=new Map([[!0,fo],[!1,null]]),ko=new Map([[!0,fo],[!1,null]]),Vo=new Map([[!0,_s.colorsPalette["color-invalid-symbol"]],[!1,null]]),Lo=new Map([[!0,[Co]],[!1,null]]),Ao=new Map([[!0,null],[!1,null]]);var Wo=s(125226),To=s(538455);function Bo(e){return void 0!==e.text?e.text:`${e.lineNumber}${e.functionOrScopeName}`}function Ho(e){const{className:t,stackTrace:s}=e,i=K(To.wrapStackTrace,t),o=[...s];return o.length>10&&o.splice(5,o.length-10,{text:"..."}),G.createElement("div",{className:i},o.map(((e,t)=>G.createElement(Do,{key:`${Bo(e)}${t}`,...e}))))}function Do(e){const{functionOrScopeName:t,lineNumber:s,text:i}=e;return G.createElement("div",{className:To.stackTraceLine},i?G.createElement("span",null,i):G.createElement("span",null,"at ",G.createElement("span",{className:To.functionName},t,"()"),":",s))}var Io=s(971417),Po=s(507458),No=s(25e3),Ro=s(337350),Oo=s(224743);function zo(e){const{className:t,pineSourceCodeModel:i,pineEditorOpenParams:o}=e,[l,a]=(0,G.useState)(!1),n=(0,Ro.usePromise)((()=>i));(0,G.useEffect)((()=>{if(null===n)return;const e=e=>{const t=Boolean(o.error?.start??void 0);a(e&&t)};return n.isAbleShowSourceCode().subscribe(e,{callWithLast:!0}),()=>n.isAbleShowSourceCode().unsubscribe(e)}),[o,n]);const r=(0,G.useCallback)((()=>{(0,Oo.globalCloseMenu)(),o&&n?.showPineSourceCode(o)}),[n,o]);return l?G.createElement(No.LightButton,{className:t,onClick:r,size:"xsmall"},V.t(null,void 0,s(547471))):null}var Fo=s(559418);function Uo(e){
return e.map((e=>`at ${e.functionOrScopeName}():${e.lineNumber}`)).join("\n")}function Go(e){const{stackTrace:t,errorMessage:i,pineSourceCodeModel:o}=e,[l,a]=(0,G.useState)(!1),n=(0,G.useRef)(null),r=(0,G.useMemo)((()=>{const e=t.find((e=>!e.id||!(0,Io.isPublishedPineId)(e.id)));return void 0===e?{}:{stackTrace:t,error:{message:i,start:{line:e.lineNumber,column:0}}}}),[i,t]),d=K(Fo.wrapError,l&&Fo.clickedAnim);return G.createElement("div",{className:Fo.wrapper},G.createElement("div",{ref:n,className:d,onClick:function(e){if(l)return;if((0,Po.copyToClipboard)({text:Uo(t)}),null===n.current)return;(0,w.showOnElement)(n.current,{tooltipDelay:0,content:{type:"text",data:V.t(null,void 0,s(776746))}}),a(!0),setTimeout((()=>{(0,w.hide)(),a(!1)}),2e3)}},i.length&&G.createElement(Zo,{errorMessage:i}),t.length&&G.createElement(Ho,{className:Fo.wrapStackTrace,stackTrace:t})),G.createElement(zo,{className:Fo.editorButton,pineSourceCodeModel:o,pineEditorOpenParams:r}))}function Zo(e){const{errorMessage:t}=e;return G.createElement("div",{className:Fo.errorText},t)}function qo(e){const{className:t,editorError:s,pineSourceCodeModel:i}=e;return s.id.startsWith("USER")?G.createElement("div",null,G.createElement(zo,{className:t,pineSourceCodeModel:i,pineEditorOpenParams:{error:s}})):null}function jo(e){const{className:t}=e;return G.createElement("div",null,G.createElement(No.LightButton,{className:t,onClick:function(e){e.preventDefault(),(0,ji.showSupportDialog)({initialState:"indicators-ticket"})},size:"xsmall"},V.t(null,void 0,s(677542))))}class Xo{constructor(e){this._clickOnLineCallback=e=>{bt.emit("study_stack_trace_open_on_line",this._source.entityId?.()??"",e)},this._source=e}destroy(){}renderer(e,t){const s=this._source.errorStatus().value();return null===s?null:s.stackTrace?(0,G.createElement)(Go,{key:e,pineSourceCodeModel:this._source.pineSourceCodeModel(),errorMessage:s.error??"",stackTrace:s.stackTrace,clickOnLineCallback:this._clickOnLineCallback}):s.editorError?(0,G.createElement)(qo,{key:e,className:t,editorError:s.editorError,pineSourceCodeModel:this._source.pineSourceCodeModel()}):s.showReportItButton?(0,G.createElement)(jo,{key:e,className:t}):null}updateSource(e){this._source=e}}var Qo=s(895334),Ko=s(302588),$o=s(257979);const Jo=V.t(null,void 0,s(436933)),Yo=new Map([[!0,new Map([["small",Ko],["medium",$o],["large",$o]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),el=new Map([[!0,$i.updateAvailable],[!1,null]]),tl=new Map([[!0,Jo],[!1,null]]),sl=new Map([[!0,Jo],[!1,null]]),il=new Map([[!0,_s.colorsPalette["color-deep-blue-a400"]],[!1,null]]);class ol extends vs.StatusViewModel{constructor(e,t){super({iconMap:Yo,classNameMap:el,tooltipMap:tl,titleMap:sl,titleColorMap:il,size:t}),this._pineSourceCodeModel=new r.WatchedValue(null),this._possibleUpdateInformation=new r.WatchedValue(null),this._lastUpdateAbortController=null,this._entityId=new r.WatchedValue(e.entityId?.()),this.updateSource(e);const s=(0,
a.combine)((e=>[e?.skippedVersion().weakReference()??new r.WatchedValue(null).ownership()]),this._pineSourceCodeModel.weakReference()),i=(0,a.accumulate)((e=>e.map((e=>e))),s.ownership());this._visibleNotSkipped=(0,a.combine)(((e,t,s,i)=>t&&!!s&&!!e&&!e.isUpdateSkipped(s.lastVersion)&&(0,Qo.updatesInfoSupported)(e.scriptIdPart()??"")&&window.is_authenticated),this._pineSourceCodeModel.weakReference(),this._visible.weakReference(),this._possibleUpdateInformation.weakReference(),i.ownership())}destroy(){this._visibleNotSkipped.destroy(),this._lastUpdateAbortController?.abort(),super.destroy()}entityId(){return this._entityId.readonly()}possibleUpdateInformation(){return this._possibleUpdateInformation}visible(){return this._visibleNotSkipped}updateSource(e){this._entityId.setValue(e.entityId?.());const t=e.pineSourceCodeModel();this._lastUpdateAbortController?.abort();const s=new AbortController;this._lastUpdateAbortController=s,t.then((e=>{s.signal.aborted||(this._pineSourceCodeModel.setValue(e),e&&e.requestUpdateInformation().then((t=>{if(s.signal.aborted)return;this._possibleUpdateInformation.setValue(t);const i=t&&e.isUpdateSkipped(t.lastVersion);this._status.setValue(t&&t.currentVersion.isLess(t.lastVersion)&&!i)})))}))}_shouldBeHiddenByStatus(e){return!e}}var ll=s(807958),al=s(402823),nl=s(46362);function rl(e){const{className:t,pineSourceCodeModel:i,model:o,onClose:l}=e,a=(0,Ro.usePromise)((()=>i)),n=(0,Ro.usePromise)((()=>a?a.requestUpdateInformation():Promise.resolve(null)),(()=>{}),[a]),r=a?.scriptIdPart(),d=r&&ll.StudyMetaInfo.hasPubSuffix(r),u=(0,Ro.usePromise)((()=>d&&a?(0,al.showAboutTheStudyHandler)(a).then((e=>({handler:e}))):Promise.resolve(null)),(()=>{}),[a,d]);return G.createElement("div",null,V.t(null,void 0,s(480519)),u&&G.createElement("a",{className:nl.link,onClick:function(e){e.preventDefault(),u?.handler?.()}}," ",V.t(null,void 0,s(895072))),G.createElement("div",{className:nl.toolbar},G.createElement(No.LightButton,{className:t,size:"xsmall",onClick:function(){n&&(a?.updateToVersion(o,n.lastVersion),l())}},V.t(null,void 0,s(534291))),G.createElement(No.LightButton,{className:t,size:"xsmall",variant:"secondary",onClick:function(){n&&(a?.skipUpdateTo(n.lastVersion),l())},disabled:!n},V.t(null,void 0,s(445350)))))}class dl{constructor(e,t){this._source=e,this._model=t}destroy(){}renderer(e,t,s){return(0,G.createElement)(rl,{key:e,pineSourceCodeModel:this._source.pineSourceCodeModel(),model:this._model,className:t,onClose:s})}updateSource(e){this._source=e}}var ul=s(44049),cl=s(494417);const hl=new Map([[2,new Map([["small",cl],["medium",cl],["large",cl]])],[1,new Map([["small",cl],["medium",cl],["large",cl]])]]),pl=new Map([[2,$i.openedInDetachedPineEditor],[1,$i.openedInPineEditor]]),_l=new Map([[2,Ei],[1,Ci]]),ml=new Map([[2,(0,_s.getHexColorByName)("color-cold-gray-550")],[1,(0,_s.getHexColorByName)("color-forest-green-500")]]),gl=new Map([[2,[xi]],[1,[Mi]]]);class bl extends vs.StatusViewModel{constructor(e,t){const s=()=>this._showSourceCode(),i=new Map([[2,{text:ki,onClick:s}],[1,{text:ki,
onClick:s}]]);super({iconMap:hl,classNameMap:pl,titleMap:_l,tooltipMap:_l,titleColorMap:ml,htmlMap:gl,actionMap:i,size:t}),this._pineModelResource=null,this.setModel(e)}destroy(){this._pineSourceEditorStatus?.destroy(),this._pineModelResource?.destroy(),super.destroy()}setModel(e){this._pineModelResource?.destroy(),this._pineSourceEditorStatus?.destroy(),this._updateStatus(0),this._pineModelResource=new ul.AsyncResourceWrapper(e),this._pineModelResource.callFunction((e=>{e&&(this._pineSourceEditorStatus=e.pineSourceEditorStatus().spawn(),this._pineSourceEditorStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0}))}))}_shouldBeHiddenByStatus(e){return 0===e}_updateStatus(e){this._visible.setValue(0!==e),this._status.setValue(e)}_showSourceCode(){this._pineModelResource?.callFunction((e=>{e?.showPineSourceCode()}))}}var vl=s(378338),wl=s(818547),Sl=s(763362);const yl=vl.t(null,void 0,s(304723)),fl=vl.t(null,void 0,s(435153)),Cl=vl.t(null,void 0,s(248686)),El=new Map([[!0,new Map([["small",wl],["medium",Sl],["large",Sl]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),Ml=new Map([[!0,$i.activeStrategy],[!1,null]]),xl=new Map([[!0,yl],[!1,null]]),kl=new Map([[!0,_s.colorsPalette["color-container-fill-tertiary-accent"]],[!1,null]]),Vl=new Map([[!0,[fl]],[!1,null]]);class Ll extends yo{constructor(e,t,s){super(t,{iconMap:El,classNameMap:Ml,titleMap:xl,tooltipMap:xl,titleColorMap:kl,htmlMap:Vl,size:s}),this._pineModelResource=null,this._resetStatusForce=()=>{const e=this._status.value()??!1;this._visible.setValue(e,!0),this._status.setValue(e,!0)},this.updateSource(e)}destroy(){this._isAbleShowBacktesting?.destroy(),this._pineModelResource?.destroy(),super.destroy()}updateSource(e){this._isAbleShowBacktesting?.destroy(),this._pineModelResource?.destroy(),this._pineModelResource=new ul.AsyncResourceWrapper(e.pineSourceCodeModel()),this._pineModelResource.callFunction((e=>{e&&(this._isAbleShowBacktesting=e.isAbleShowSourceCode().spawn(),this._isAbleShowBacktesting.subscribe(this._resetStatusForce,{callWithLast:!0}))}))}_shouldBeHiddenByStatus(e){return!e}_getAction(e){return e&&this._isAbleShowBacktesting?.value()?{text:Cl,onClick:()=>this._pineModelResource?.callFunction((e=>{e?.showBacktesting?.()}))}:null}}var Al=s(561141),Wl=s(661082);class Tl{constructor(e){this._size=v.trackingModeIsAvailable?"medium":"small",this._statusWidgetInfos=[],this._tooltips=new r.WatchedValue([]),this._visibilitySpawns=[],this._tooltipSpawns=[],this._visibility=new r.WatchedValue(!1),this._renderer=new Wl.StatusRenderer(this._size,this._tooltips,{onClick:this._handleToggleDropdown.bind(this)}),this._container=document.createElement("div"),this._menuOpened=!1,this._menuPosition=null,this._handleDropdownMenuClose=()=>{this._menuOpened=!1,this._updateDropdownMenu()},this._options=e}destroy(){this._visibility.unsubscribe();for(const e of this._tooltipSpawns)e.destroy();for(const e of this._visibilitySpawns)e.destroy();for(const e of this._statusWidgetInfos){
if(e.additionalWidgets)for(const t of e.additionalWidgets)t.destroy();e.model.destroy()}this._renderer.destroy()}visibility(){return this._visibility.readonly()}getElement(){return this._renderer.element}_updateTooltipsAndVisibilitiesAfterRecreate(){for(const e of this._tooltipSpawns)e.subscribe(this._updateTooltips.bind(this));for(const e of this._visibilitySpawns)e.subscribe(this._updateTooltips.bind(this));this._updateTooltips()}_updateTooltips(){const e=[];for(let t=0;t<this._tooltipSpawns.length;t++){if(!this._visibilitySpawns[t].value())continue;const s=this._tooltipSpawns[t].value();null!==s&&s.length>0&&e.push(s)}this._tooltips.setValue(e)}_addStatusWidgetInfos(e){this._statusWidgetInfos.push(e),this._renderer.addStatusModel(e),this._addVisibilitySpawn(e.visible.spawn())}_addTooltipSpawn(e){e.subscribe(this._updateTooltips.bind(this)),this._tooltipSpawns.push(e)}_addVisibilitySpawn(e){e.subscribe(this._updateTooltips.bind(this)),e.subscribe(this._updateVisibility),this._visibilitySpawns.push(e)}_handleToggleDropdown(e){var t;this._menuPosition=e,this._menuOpened=!this._menuOpened,this._menuOpened&&(t=`Open full tooltip for statuses: ${this._tooltips.value().join(", ")}`,(0,A.trackEvent)("GUI","Statuses widget's action",t)),this._updateDropdownMenu()}async _updateDropdownMenu(){const e=Promise.all([s.e(8800),s.e(92537),s.e(61681),s.e(66032),s.e(39759),s.e(52186),s.e(98681),s.e(20543),s.e(82321),s.e(68984),s.e(38643)]).then(s.bind(s,402289));await Promise.all([...this._statusWidgetInfos.map((e=>e.preliminaryJob)),e]),e.then((e=>{e.render({opened:this._menuOpened,container:this._container,rendererButton:this._renderer.element,statusWidgetInfos:this._statusWidgetInfos,onClose:this._handleDropdownMenuClose,position:(0,l.ensureNotNull)(this._menuPosition)})}))}}class Bl extends Tl{constructor(e,t,s){super(s),this.dataSourceErrorStatusShown=new r.WatchedValue(!1),this.dataUpdatedModeShown=new r.WatchedValue(!1),this.isSymbolInvalidStatusShown=new r.WatchedValue(!1),this._symbolInvalidViewModel=null,this._dataSourceErrorStatusViewModel=null,this._marketStatusViewModel=null,this._dataUpdatedModeViewModel=null,this._dataProblemViewModel=null,this._updateAvailableViewModel=null,this._pineEditorStateViewModel=null,this._activeStrategySourceViewModel=null,this._customStatusViewModel=null,this._sessionWidget=null,this._errorWidget=null,this._updateAvailableWidget=null,this._dataSourceHasErrorVisible=null,this._dataSourceErrorCanBeShown=new r.WatchedValue(!1),this._marketStatusCanBeShown=new r.WatchedValue(!1),this._dataUpdatedAvailableVisible=null,this._dataUpdatedModeCanBeShown=new r.WatchedValue(!1),this._dataProblemCanBeShown=new r.WatchedValue(!1),this._updateAvailableCanBeShown=new r.WatchedValue(!1),this._isDataProblemCritical=null,this._updateVisibility=()=>{const e=this._statusProviderHidden.value()||this._visibilitySpawns.every((e=>!e.value()));this._visibility.setValue(!e),this._renderer.setVisibility(e)},this._source=e,this._symbol=e.symbol()?.spawn()??null,this._options=s,this._undoModel=t,
this._statusProviderHidden=e.hidden().spawn(),this._statusProviderHidden.subscribe(this._updateVisibility,{callWithLast:!0});const i=new AbortController;this._lastRecreateWidgetAbortController=i,this._recreateWidgets().then((()=>{i.signal.aborted||(this._addSubscriptionForSymbolInvalid(),null!==this._dataSourceHasErrorVisible&&(this._dataSourceHasErrorVisible.subscribe(this._updateStatusWidgetsVisibilities.bind(this)),this._dataSourceHasErrorVisible.subscribe(this._updateErrorWidgetIsShown.bind(this))),null!==this._dataUpdatedAvailableVisible&&this._dataUpdatedAvailableVisible.subscribe(this._updateDataUpdatedWidgetIsShown.bind(this)),this._options.dataProblemEnabled&&null!==this._isDataProblemCritical&&this._isDataProblemCritical.subscribe(this._updateStatusWidgetsVisibilities.bind(this)),this._updateErrorWidgetIsShown(),this._updateIsSymbolInvalidStatusShown(),this._updateStatusWidgetsVisibilities(),this._updateTooltipsAndVisibilitiesAfterRecreate())}))}destroy(){this._lastRecreateWidgetAbortController.abort(),this._statusProviderHidden.destroy(),this._visibility.unsubscribe(),this._symbol?.destroy(),this._isDataProblemCritical?.destroy(),super.destroy()}_updateStatusWidgetsVisibilities(){const e=this._isForceStatusActive();this._dataSourceErrorCanBeShown.setValue(!e),this._marketStatusCanBeShown.setValue(!e),this._dataUpdatedModeCanBeShown.setValue(!e),this._updateAvailableCanBeShown.setValue(!e),this._dataProblemCanBeShown.setValue(!this._isPrimaryWidgetShown())}_isPrimaryWidgetShown(){return this._source.isSymbolInvalid()?.value()??!1}_isForceStatusActive(){return this._isPrimaryWidgetShown()||(this._isDataProblemCritical?.value()??!1)}async _recreateWidgets(){if(this._options.sourceStatusesEnabled){const e=this._source.isSymbolInvalid();if(null!==e)if(null===this._symbolInvalidViewModel){this._symbolInvalidViewModel=new yo(e,{tooltipMap:xo,iconMap:Eo,classNameMap:Mo,titleMap:ko,titleColorMap:Vo,htmlMap:Lo,actionMap:Ao,size:this._size});const t=this._symbolInvalidViewModel.visible().spawn();this._addTooltipSpawn(this._symbolInvalidViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:t,model:this._symbolInvalidViewModel})}else this._symbolInvalidViewModel.updateStatus(e),this._addSubscriptionForSymbolInvalid()}if(this._options.marketStatusEnabled){const e=this._source.marketStatusModel();if(null===this._marketStatusViewModel){this._marketStatusViewModel=new Al.MarketStatusViewModel(e,this._size);const t={visible:(0,a.combine)(((e,t,s)=>e&&t&&!(0,Ot.isEconomicSymbol)(s)&&!(0,Ot.isSpreadSymbolWithManyLegs)(s)),this._marketStatusCanBeShown.weakReference(),this._marketStatusViewModel.visible().weakReference(),this._source.symbolInfo().weakReference()),model:this._marketStatusViewModel};null!==e&&(this._sessionWidget=new ps.FullSessionScheduleWidget(this._source),t.additionalWidgets=[this._sessionWidget]),this._addTooltipSpawn(this._marketStatusViewModel.tooltip().spawn()),this._addStatusWidgetInfos(t)}else this._marketStatusViewModel.setModel(e),this._sessionWidget?.updateSource(this._source)}
if(this._options.dataUpdateModeEnabled){const e=this._source.dataUpdatedModeModel();if(null===this._dataUpdatedModeViewModel){const t={...this._options.dataUpdateMode,marketStatus:this._source.marketStatusModel()?.status().spawnOwnership()};this._dataUpdatedModeViewModel=new ao(e,this._size,t);const s=(0,a.combine)(((e,t,s)=>e&&t&&!(0,Ot.isEconomicSymbol)(s)),this._dataUpdatedModeCanBeShown.weakReference(),this._dataUpdatedModeViewModel.visible().weakReference(),this._source.symbolInfo().weakReference());this._addTooltipSpawn(this._dataUpdatedModeViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:s,model:this._dataUpdatedModeViewModel})}else this._dataUpdatedModeViewModel.setModel(e)}if(this._options.dataProblemEnabled){const e=this._source.dataProblemModel();if(null===this._dataProblemViewModel){this._dataProblemViewModel=new So(e,this._size),this._isDataProblemCritical=this._dataProblemViewModel.isDataProblemCritical().spawn();const t=(0,a.combine)(((e,t)=>e&&t),this._dataProblemCanBeShown.weakReference(),this._dataProblemViewModel.visible().weakReference());this._addTooltipSpawn(this._dataProblemViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:t,model:this._dataProblemViewModel})}}if(this._options.sourceStatusesEnabled)if(null===this._dataSourceErrorStatusViewModel){this._dataSourceErrorStatusViewModel=new _o(this._source,this._size,this._options.sourceStatuses),this._dataSourceHasErrorVisible=(0,a.combine)(((e,t)=>e&&t),this._dataSourceErrorCanBeShown.weakReference(),this._dataSourceErrorStatusViewModel.visible().weakReference());const e=[];this._errorWidget=new Xo(this._source),e.push(this._errorWidget),this._addTooltipSpawn(this._dataSourceErrorStatusViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:this._dataSourceHasErrorVisible,model:this._dataSourceErrorStatusViewModel,additionalWidgets:e})}else this._dataSourceErrorStatusViewModel.setSource(this._source),this._errorWidget?.updateSource(this._source);if(this._options.pineSourceStatusEnabled&&(this._undoModel.model().isSnapshot()||this._undoModel.model().readOnly()||(0,_.onWidget)()||(0,Wo.isFeatureEnabled)("disable_update_availability_status")||(null===this._updateAvailableViewModel?(this._updateAvailableViewModel=new ol(this._source,this._size),this._updateAvailableWidget=new dl(this._source,this._undoModel),this._dataUpdatedAvailableVisible=(0,a.combine)(((e,t,s)=>e&&t&&!s),this._updateAvailableCanBeShown.weakReference(),this._updateAvailableViewModel.visible().weakReference(),this._source.hidden().weakReference()),this._addTooltipSpawn(this._updateAvailableViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:this._dataUpdatedAvailableVisible,model:this._updateAvailableViewModel,additionalWidgets:[this._updateAvailableWidget],preliminaryJob:this._source.pineSourceCodeModel().then((e=>e?Promise.all([e.requestScriptInfo(),(0,al.showAboutTheStudyHandler)(e)]):Promise.resolve())),iconDatasetName:"legend-source-item-status-icon-update",iconDatasetEntityId:this._updateAvailableViewModel.entityId()
})):(this._updateAvailableViewModel.updateSource(this._source),this._updateAvailableWidget?.updateSource(this._source)))),this._options.pineSourceStatusEnabled)if(null===this._activeStrategySourceViewModel){const e=(0,a.combine)((e=>null!==e&&this._source.entityId?.()===e.id()),this._undoModel.model().activeStrategySource().weakReference());this._activeStrategySourceViewModel=new Ll(this._source,e,this._size);const t=this._activeStrategySourceViewModel.visible().spawn();this._addTooltipSpawn(this._activeStrategySourceViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:t,model:this._activeStrategySourceViewModel})}else this._activeStrategySourceViewModel.updateSource(this._source);if(this._options.pineSourceStatusEnabled){const e=this._source.pineSourceCodeModel();if(null===this._pineEditorStateViewModel){this._pineEditorStateViewModel=new bl(e,this._size);const t=this._pineEditorStateViewModel.visible().spawn();this._addTooltipSpawn(this._pineEditorStateViewModel.tooltip().spawn()),this._addStatusWidgetInfos({visible:t,model:this._pineEditorStateViewModel})}else this._pineEditorStateViewModel.setModel(e)}}async _recreateAndUpdateWidgetState(){this._lastRecreateWidgetAbortController?.abort();const e=new AbortController;this._lastRecreateWidgetAbortController=e,await this._recreateWidgets(),e.signal.aborted||(this._updateStatusWidgetsVisibilities(),this._updateErrorWidgetIsShown(),this._updateIsSymbolInvalidStatusShown(),this._updateTooltips())}_addSubscriptionForSymbolInvalid(){const e=this._source.isSymbolInvalid();this._options.sourceStatusesEnabled&&null!==e&&(e.subscribe(this._updateStatusWidgetsVisibilities.bind(this)),e.subscribe(this._updateIsSymbolInvalidStatusShown.bind(this),{callWithLast:!0}))}_updateErrorWidgetIsShown(){const e=this._dataSourceHasErrorVisible?.value()??!1;this.dataSourceErrorStatusShown.setValue(e)}_updateDataUpdatedWidgetIsShown(){const e=this._dataUpdatedAvailableVisible?.value()??!1;this.dataUpdatedModeShown.setValue(e)}_updateIsSymbolInvalidStatusShown(){const e=this._source.isSymbolInvalid()?.value()??!1;this.isSymbolInvalidStatusShown.setValue(e)}}var Hl=s(74733);const Dl=V.t(null,void 0,s(454252)),Il=V.t(null,void 0,s(732021)),Pl=V.t(null,void 0,s(803296)),Nl=V.t(null,void 0,s(798961)),Rl=V.t(null,void 0,s(372477)),Ol=V.t(null,void 0,s(476966)),zl=new Map([[3,new Map([["small",Hl],["medium",Hl],["large",Hl]])],[1,new Map([["small",Hl],["medium",Hl],["large",Hl]])],[2,new Map([["small",Hl],["medium",Hl],["large",Hl]])]]),Fl=new Map([[2,$i.replayModeAutoPlay],[3,$i.replayModePause],[1,$i.replayModePointSelect]]),Ul=new Map([[2,Il],[3,Il],[1,Il]]),Gl=new Map([[2,Il],[3,Pl],[1,Dl]]),Zl=new Map([[2,(0,_s.getHexColorByName)("color-replay-mode")],[3,(0,_s.getHexColorByName)("color-replay-mode")],[1,(0,_s.getHexColorByName)("color-replay-mode-point-select")]]),ql=new Map([[2,[Rl]],[3,[Ol]],[1,[Nl]]]);class jl extends vs.StatusViewModel{constructor(e,t){super({iconMap:zl,classNameMap:Fl,tooltipMap:Gl,titleMap:Ul,titleColorMap:Zl,htmlMap:ql,size:t}),this._replayStatus=e,
this._replayStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0})}destroy(){this._replayStatus.release(),super.destroy()}_updateStatus(e){this._status.setValue(0!==e?e:null),this.isBlinkingMode.setValue(2===e)}}var Xl=s(856539);class Ql extends vs.StatusViewModel{constructor(e,t){super(t),this._simpleStatus=e.spawn(),this._simpleStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0})}destroy(){this._simpleStatus.destroy(),super.destroy()}_updateStatus(e){this._status.setValue(e)}}var Kl,$l=s(435585);!function(e){e.Stock="HalalStock",e.Bond="HalalBond"}(Kl||(Kl={}));const Jl=new Map([[Kl.Bond,ni],[Kl.Stock,ni]]),Yl=new Map([[Kl.Bond,$s],[Kl.Stock,$s]]),ea=new Map([[Kl.Bond,new Map([["small",Xl],["medium",Xl]])],[Kl.Stock,new Map([["small",Xl],["medium",Xl]])]]),ta=new Map([[Kl.Bond,$l.halalStatus],[Kl.Stock,$l.halalStatus]]),sa=new Map([[Kl.Bond,[di]],[Kl.Stock,[ri]]]),ia=new Map([[Kl.Bond,{text:V.t(null,void 0,s(327741)),onClick:()=>(0,ji.showSupportDialog)({solutionId:ei})}],[Kl.Stock,{text:V.t(null,void 0,s(327741)),onClick:()=>(0,ji.showSupportDialog)({solutionId:ei})}]]);class oa extends Ql{constructor(e,t){super(e,{iconMap:ea,tooltipMap:Jl,titleMap:Jl,titleColorMap:Yl,size:t,classNameMap:ta,htmlMap:sa,actionMap:ia})}}var la=s(554103);const aa=new Map([[!0,ai]]),na=new Map([[!0,Js]]),ra=new Map([[!0,js]]),da=new Map([[!0,la.tvCalculatedPair]]),ua=new Map([[!0,[Vi]]]),ca=new Map([[!0,{text:V.t(null,void 0,s(327741)),onClick:()=>(0,ji.showSupportDialog)({solutionId:43000703173})}]]);class ha extends Ql{constructor(e,t){super(e,{iconMap:ra,tooltipMap:aa,titleMap:aa,titleColorMap:na,size:t,classNameMap:da,htmlMap:ua,actionMap:ca})}}var pa=s(878764);const _a=new Map([[!0,Li]]),ma=new Map([[!0,Ks]]),ga=new Map([[!0,qs]]),ba=new Map([[!0,pa.hkexComment]]),va=new Map([[!0,[Ai]]]);class wa extends Ql{constructor(e,t){super(e,{iconMap:ga,tooltipMap:_a,titleMap:_a,titleColorMap:ma,size:t,classNameMap:ba,htmlMap:va})}}var Sa=s(366669);const ya=new Map([[!0,Wi]]),fa=new Map([[!0,Ys]]),Ca=new Map([[!0,Zs]]),Ea=new Map([[!0,Sa.defaultedStatus]]),Ma=new Map([[!0,[Ti]]]);class xa extends Ql{constructor(e,t){super(e,{iconMap:Ca,tooltipMap:ya,titleMap:ya,titleColorMap:fa,size:t,classNameMap:Ea,htmlMap:Ma})}}var ka=s(319703),Va=s(502661);const La=(0,_s.getHexColorByName)("color-sky-blue-a700"),Aa=new Map([[!1,Bi],[!0,Bi]]),Wa=new Map([[!1,La],[!0,La]]),Ta=new Map([[!0,new Map([["small",ka],["medium",ka]])]]),Ba=new Map([[!1,Va.letItSnowStatus],[!0,Va.letItSnowStatus]]),Ha=new Map([[!1,[Hi]],[!0,[Hi]]]),Da=new r.WatchedValue(!1);let Ia=null;Da.subscribe((e=>{null===Ia&&(Ia=new ul.AsyncResourceWrapper(s.e(20465).then(s.bind(s,782178)))),Ia.callFunction((t=>{t.snow(e)}))}));const Pa=new Set(["en","uk","de_DE","fr","es","it","pl","ja","ca","ru"]);class Na extends Ql{constructor(e){super(Da.readonly(),{iconMap:Ta,tooltipMap:Aa,titleMap:Aa,titleColorMap:Wa,size:e,classNameMap:Ba,htmlMap:Ha,actionMap:new Map([[!1,{text:Di,onClick:()=>Da.setValue(!0)}],[!0,{text:Ii,onClick:()=>Da.setValue(!1)}]])})}
async _updateFullTooltip(){await super._updateFullTooltip();const e=this._fullTooltip.value();null!==e&&this._fullTooltip.setValue([{...e[0],icon:ka}])}}class Ra extends Bl{constructor(e,t,s){super(e,t,s),this._isInReplay=new r.WatchedValue(!1).readonly().spawn(),this._isInReplayCanBeShown=null,this._inited=!1,this._halalCanBeShown=new r.WatchedValue(!1),this._tvCalculatedPairCanBeShown=new r.WatchedValue(!1),this._hkexCommentCanBeShown=new r.WatchedValue(!1),this._defaultedBondCanBeShown=new r.WatchedValue(!1);const i=t.model();if(this._options.sourceStatusesEnabled){this._crateHalalStatus(),this._createTVCalculatedPairStatus(),this._createHKEXCommentStatus(),this._createDefaultedBondStatus(),this._createLetItSnowStatus();{this._isInReplayCanBeShown=new r.WatchedValue(!1);const e=(0,a.combine)(((e,t)=>t||1===e||4===e?e:0),i.replayStatus().weakReference(),i.mainSeries().isInReplay().weakReference());this._isInReplay=(0,a.combine)((e=>0!==e&&4!==e),e.weakReference());const t=new jl(e.ownership(),this._size),s=(0,a.combine)(((e,t)=>e&&t),this._isInReplayCanBeShown.weakReference(),t.visible().weakReference());this._addTooltipSpawn(t.tooltip().spawn()),this._addStatusWidgetInfos({visible:s,model:t}),s.subscribe(this._updateStatusWidgetsVisibilities.bind(this)),this._isInReplay.subscribe(this._updateStatusWidgetsVisibilities.bind(this),{callWithLast:!0})}this._inited=!0,this._updateStatusWidgetsVisibilities(),this._updateTooltips()}}destroy(){this._options.sourceStatusesEnabled&&this._isInReplay.destroy(),super.destroy()}_updateStatusWidgetsVisibilities(){if(super._updateStatusWidgetsVisibilities(),this._inited&&this._options.sourceStatusesEnabled){const e=this._isForceStatusActive();this._halalCanBeShown.setValue(!e),this._tvCalculatedPairCanBeShown.setValue(!e),this._hkexCommentCanBeShown.setValue(!e),this._defaultedBondCanBeShown.setValue(!e),(0,l.ensureNotNull)(this._isInReplayCanBeShown).setValue(!super._isPrimaryWidgetShown()&&this._isInReplay.value())}}_isPrimaryWidgetShown(){return super._isPrimaryWidgetShown()||this._isInReplay.value()}_crateHalalStatus(){const e=new oa(this._getHalalTypeSpawn(),this._size),t={visible:e.visible().spawn(),model:e};this._addTooltipSpawn(e.tooltip().spawn()),this._addStatusWidgetInfos(t)}_createDefaultedBondStatus(){const e=new xa(this._getDefaultedBondSpawn(),this._size),t={visible:e.visible().spawn(),model:e};this._addTooltipSpawn(e.tooltip().spawn()),this._addStatusWidgetInfos(t)}_createTVCalculatedPairStatus(){const e=new ha(this._getTvCalculatedPairSpawn(),this._size),t={visible:e.visible().spawn(),model:e};this._addTooltipSpawn(e.tooltip().spawn()),this._addStatusWidgetInfos(t)}_createHKEXCommentStatus(){const e=new wa(this._getHkexCommentSpawn(),this._size),t={visible:e.visible().spawn(),model:e};this._addTooltipSpawn(e.tooltip().spawn()),this._addStatusWidgetInfos(t)}_createLetItSnowStatus(){if(!Pa.has(window.locale)||!(0,Wo.isFeatureEnabled)("special_chart_series_status"))return;const e=new Na(this._size),t={visible:e.visible().spawn(),model:e}
;this._addTooltipSpawn(e.tooltip().spawn()),this._addStatusWidgetInfos(t)}_getHalalTypeSpawn(){return(0,a.combine)(((e,t,s,i)=>null!==i&&t&&!s&&e?.["is-shariah-compliant"]?(0,hs.isBond)(i.type)?Kl.Bond:Kl.Stock:null),(this._source.quotesData?.()||new r.WatchedValue(null).readonly()).weakReference(),this._halalCanBeShown.weakReference(),(this._source.isSymbolInvalid()||new r.WatchedValue(!1).readonly()).weakReference(),this._source.symbolInfo().weakReference())}_getDefaultedBondSpawn(){return(0,a.combine)(((e,t,s,i)=>!(null===i||!t||s||"defaulted"!==e?.issue_status)||null),(this._source.quotesData?.()||new r.WatchedValue(null).readonly()).weakReference(),this._defaultedBondCanBeShown.weakReference(),(this._source.isSymbolInvalid()||new r.WatchedValue(!1).readonly()).weakReference(),this._source.symbolInfo().weakReference())}_getTvCalculatedPairSpawn(){return(0,a.combine)(((e,t,s)=>!(null===s||!e||t||!s.typespecs?.includes("tv-calculated-pair"))||null),this._tvCalculatedPairCanBeShown.weakReference(),(this._source.isSymbolInvalid()||new r.WatchedValue(!1).readonly()).weakReference(),this._source.symbolInfo().weakReference())}_getHkexCommentSpawn(){return(0,a.combine)(((e,t,s)=>!(null===s||!e||t||"HKEX"!==s.listed_exchange)||null),this._tvCalculatedPairCanBeShown.weakReference(),(this._source.isSymbolInvalid()||new r.WatchedValue(!1).readonly()).weakReference(),this._source.symbolInfo().weakReference())}}var Oa=s(774440);class za{constructor(e,t){this._hidden=new r.WatchedValue(!1),this._symbol=null,this._isSymbolInvalid=null,this._visibilityCombiner=null,this._symbolInfo=new r.WatchedValue(null).spawn(),this._source=e,e.properties().hasChild("symbol")&&(this._symbol=(0,fe.createWVFromGetterAndSubscription)((()=>e.properties().symbol.value()),e.properties().symbol.listeners()));const s=[];if((0,Oa.isStudyLineTool)(e))s.push(e.onStatusChanged());else if((0,ct.isStudy)(e)||(0,ct.isStudyStub)(e))s.push(e.onStatusChanged(),e.onIsActualIntervalChange()),this._isSymbolInvalid=(0,fe.createWVFromGetterAndSubscriptions)((()=>e.isSymbolInvalid()&&e.isActualInterval()),s),(0,ct.isStudy)(e)?(this._visibilityCombiner=(0,a.combine)(((e,t)=>!e||!t),(0,fe.createWVFromGetterAndSubscription)((()=>e.isVisible()),e.properties().childs().visible).ownership(),(0,fe.createWVFromGetterAndSubscription)((()=>e.isActualInterval()),e.onIsActualIntervalChange()).ownership()),this._visibilityCombiner.subscribe((e=>this._hidden.setValue(e)),{callWithLast:!0})):this._hidden.setValue(!e.isVisible()||!e.isActualInterval());else{(0,l.assert)(e===t.mainSeries());const i=t.mainSeries();s.push(i.onStatusChanged()),this._isSymbolInvalid=(0,fe.createWVFromGetterAndSubscriptions)((()=>i.isSymbolInvalid()),s),this._symbolInfo=(0,fe.createWVFromGetterAndSubscription)(i.symbolInfo.bind(i),i.dataEvents().symbolResolved())}this._dataSourceErrorStatus=(0,fe.createWVFromGetterAndSubscriptions)((()=>this._source.statusProvider({}).errorStatus()),s)}destroy(){this._symbol?.destroy(),this._isSymbolInvalid?.destroy(),this._dataSourceErrorStatus.destroy(),
this._symbolInfo.destroy(),this._visibilityCombiner?.destroy()}entityId(){return this._source.id()}symbol(){return this._symbol}isSymbolInvalid(){return this._isSymbolInvalid}errorStatus(){return this._dataSourceErrorStatus}symbolInfo(){return this._symbolInfo}hidden(){return this._hidden.readonly()}marketStatusModel(){return this._source.marketStatusModel()}dataProblemModel(){return this._source.dataProblemModel()}dataUpdatedModeModel(){return this._source.dataUpdatedModeModel()}async pineSourceCodeModel(){return this._source.pineSourceCodeModel?.()??Promise.resolve(null)}isMainSeries(){return this._source.isMainSeries?.()??!1}}class Fa extends za{constructor(e,t){super(e,t),this._quotesData=new r.WatchedValue(null),this._forceDisableHiddenState=new r.WatchedValue(!0),this._forceDisableHiddenStateTimeout=null,this._series=e,this._marketStatus=e.marketStatusModel().status().spawn(),e.quotesProvider().quotesUpdate().subscribe(this,(()=>{this._quotesData.setValue(e.quotesProvider().quotes(),!0)})),e.quotesProvider().quoteSymbolChanged().subscribe(this,(()=>{this._quotesData.setValue(null)})),this._quotesData.setValue(e.quotes()),this._marketStatus.subscribe((e=>{null===e&&(null!==this._forceDisableHiddenStateTimeout&&clearTimeout(this._forceDisableHiddenStateTimeout),this._forceDisableHiddenState.setValue(!1),this._forceDisableHiddenStateTimeout=setTimeout((()=>{this._forceDisableHiddenStateTimeout=null,this._forceDisableHiddenState.setValue(!0)}),3500))}),{callWithLast:!0}),this._dataProblems=this._series.dataProblemModel().dataProblems().spawn(),this._marketStatus.subscribe(this._updateHiddenValue.bind(this)),this._dataProblems.subscribe(this._updateHiddenValue.bind(this)),this._forceDisableHiddenState.subscribe(this._updateHiddenValue.bind(this)),e.onInReplayStateChanged?.().subscribe(this,this._updateHiddenValue),e.onStatusChanged().subscribe(this,this._updateHiddenValue),this._updateHiddenValue()}quotesData(){return this._quotesData.readonly().spawn()}destroy(){this._marketStatus.destroy(),this._dataProblems.destroy(),this._series.onInReplayStateChanged?.().unsubscribeAll(this),this._series.quotesProvider().quotesUpdate().unsubscribeAll(this),this._series.quotesProvider().quoteSymbolChanged().unsubscribeAll(this),this._series.onStatusChanged().unsubscribeAll(this),null!==this._forceDisableHiddenStateTimeout&&clearTimeout(this._forceDisableHiddenStateTimeout),super.destroy()}_updateHiddenValue(){const e=this._series.status(),t=this._forceDisableHiddenState.value()||this._series.isInReplay().value()||12===e||4===e||null!==this._marketStatus.value()&&2!==e&&1!==e||this._dataProblems.value().some((e=>"high"===e.severity));this._hidden.setValue(!t)}}
const Ua=V.t(null,void 0,s(610319)),Ga=V.t(null,void 0,s(407681)),Za=V.t(null,void 0,s(964730)),qa=new Map([[!0,new Map([["small",xs],["medium",ks],["large",ks]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),ja=new Map([[!0,$i.hasError],[!1,null]]),Xa=new Map([[!0,Ua],[!1,null]]),Qa=new Map([[!0,Ua],[!1,null]]),Ka=new Map([[!0,_s.colorsPalette["color-invalid-symbol"]],[!1,null]]),$a=new Map([[!0,[Ga]],[!1,null]]),Ja=new Map([[!0,[Za]],[!1,null]]);function Ya(e){switch(e){case 0:return $a;case 1:return Ja;default:throw new Error("Unknown CombinedStatusWidgetType")}}const en=V.t(null,void 0,s(448758)),tn=V.t(null,void 0,s(889181)),sn=V.t(null,void 0,s(592663)),on=new Map([[!0,new Map([["small",Ko],["medium",$o],["large",$o]])],[!1,new Map([["small",""],["medium",""],["large",""]])]]),ln=new Map([[!0,$i.updateAvailable],[!1,null]]),an=new Map([[!0,en],[!1,null]]),nn=new Map([[!0,en],[!1,null]]),rn=new Map([[!0,_s.colorsPalette["color-deep-blue-a400"]],[!1,null]]),dn=new Map([[!0,[tn]],[!1,null]]),un=new Map([[!0,[sn]],[!1,null]]);function cn(e){switch(e){case 0:return dn;case 1:return un;default:throw new Error("Unknown CombinedStatusWidgetType")}}class hn extends Tl{constructor(e,t){super(t),this._dataSourceStatusWidgets=[],this._hasErrorStatus=null,this._hasUpdateStatus=null,this._hasErrorViewModel=null,this._hasUpdateViewModel=null,this._updateVisibility=()=>{const e=this._visibilitySpawns.every((e=>!e.value()));this._visibility.setValue(!e),this._renderer.setVisibility(e)},this._type=e}destroy(){this._hasErrorViewModel?.destroy(),this._hasUpdateViewModel?.destroy(),super.destroy()}addStatusWidget(e){this._dataSourceStatusWidgets.push(e),this._recreateHasErrorStatus(),this._recreateHasUpdateStatus(),this._recreateWidgets()}clear(){this._dataSourceStatusWidgets=[],this._hasErrorStatus?.destroy(),this._hasErrorStatus=null,this._hasUpdateStatus?.destroy(),this._hasUpdateStatus=null}async _recreateWidgets(){const e=this._hasErrorStatus;if(null!==e)if(null===this._hasErrorViewModel){this._hasErrorViewModel=new yo(e,{classNameMap:ja,htmlMap:Ya(this._type),iconMap:qa,size:this._size,titleColorMap:Ka,titleMap:Qa,tooltipMap:Xa}),this._addTooltipSpawn(this._hasErrorViewModel.tooltip().spawn());const t=this._hasErrorViewModel.visible().spawn();this._addStatusWidgetInfos({visible:t,model:this._hasErrorViewModel})}else this._hasErrorViewModel.updateStatus(e);const t=this._hasUpdateStatus;if(null!==t)if(null===this._hasUpdateViewModel){this._hasUpdateViewModel=new yo(t,{classNameMap:ln,htmlMap:cn(this._type),iconMap:on,size:this._size,titleColorMap:rn,titleMap:nn,tooltipMap:an}),this._addTooltipSpawn(this._hasUpdateViewModel.tooltip().spawn());const e=this._hasUpdateViewModel.visible().spawn();this._addStatusWidgetInfos({visible:e,model:this._hasUpdateViewModel})}else this._hasUpdateViewModel.updateStatus(t)}_recreateHasErrorStatus(){this._hasErrorStatus?.destroy();const e=(0,
a.combine)((e=>this._dataSourceStatusWidgets.map((e=>e.dataSourceErrorStatusShown.weakReference()))),new r.WatchedValue(this._dataSourceStatusWidgets).weakReference());this._hasErrorStatus=(0,a.accumulate)((e=>e.some((e=>e))),e.ownership())}_recreateHasUpdateStatus(){this._hasUpdateStatus?.destroy();const e=(0,a.combine)((e=>this._dataSourceStatusWidgets.map((e=>e.dataUpdatedModeShown.weakReference()))),new r.WatchedValue(this._dataSourceStatusWidgets).weakReference());this._hasUpdateStatus=(0,a.accumulate)((e=>e.some((e=>e))),e.ownership())}}var pn=s(518594);const _n={readOnlyMode:!1,contextMenu:{settings:!0,mainSeries:!0,studies:!0,showOpenMarketStatus:!1},symbolMarkerEnabled:!1,showToggleButton:!0,canShowSourceCode:!1,statusesWidgets:{sourceStatusesEnabled:!1,sourceStatuses:{errorSolution:!0},marketStatusEnabled:!1,marketStatus:{preMarketSolution:!0,postMarketSolution:!0},dataUpdateModeEnabled:!1,dataUpdateMode:{subscriptionFullInfo:!0},dataProblemEnabled:!1}},mn=p.enabled("hide_legend_by_default"),gn=p.enabled("fundamental_widget"),bn=p.enabled("legend_context_menu"),vn=2*parseInt(ie.marginlegendhoriz);class wn{constructor(e,t,s,i,l,u,c,h){this._mainSeriesViewModel=null,this._dataSourceViewModels=[],this._sourcesIds=[],this._visibleDataSourceCount=new r.WatchedValue(0),this._themedColor=new r.WatchedValue(""),this._mainSeriesRowHidden=null,this._dataSourceRowsHidden=[],this._customWidgetsVisibilities=[],this._allLegendHidden=new r.WatchedValue(!1),this._studiesLegendHidden=new r.WatchedValue(!1),this._showCollapserWithOneIndicator=new r.WatchedValue(!1),this._dataSourcesLoadingStatuses=new r.WatchedValue([]),this._customWidgetsHeights=[],this._onLegendVisibilityToggled=null,this._availableHeight=0,this._collapsedDataSourcesCount=new r.WatchedValue(0),this._collapsedDataSourcesTitle=new r.WatchedValue(""),this._mainSeriesStatusWidget=null,this._dataSourcesStatusesWidgets=[],this._statusProviders=new Map,this._size=null,this._customLegendWidgetsFactoriesMap=new Map,this._customLegendWidgetsMap=new Map,this._margin=0,this._layoutChanged=new n.Delegate,this._model=e,this._paneWidget=t,this._options=(0,d.merge)((0,d.clone)(_n),c),this._callbacks=h,this._mainSeriesViewModelsOptions={readOnlyMode:this._options.readOnlyMode,symbolMarkerEnabled:this._options.symbolMarkerEnabled},this._dataSourceViewModelsOptions={...this._mainSeriesViewModelsOptions,canShowSourceCode:this._options.canShowSourceCode},this._backgroundThemeName=s;const p=this._showLegendCalculatedProperty();if(this._isDataSourcesCollapsed=new r.WatchedValue(p.value()),p.subscribe(this,(()=>{this._isDataSourcesCollapsed.setValue(p.value())})),mn&&!Ni.getBool("legend.isVisibilityToggled")){const e=this._showLegendOriginalProperty();this._onLegendVisibilityToggled=this._setLegendVisibilityToggled.bind(this),e.setValue(!1),e.subscribe(this,this._onLegendVisibilityToggled)}const _=new r.WatchedValue(this._getCustomTextColorValue()),m=this._model.model().properties().childs();m.scalesProperties.childs().textColor.subscribe(this,(()=>{
_.setValue(this._getCustomTextColorValue())}));const g=m.paneProperties.childs().legendProperties.childs().showBackground,b=new r.WatchedValue(g.value());g.subscribe(this,(()=>{b.setValue(g.value())}));const v=m.paneProperties.childs().legendProperties.childs().backgroundTransparency,w=new r.WatchedValue(v.value());v.subscribe(this,(()=>{w.setValue(v.value())})),this._hideNotMainSources=i,this._hideNotMainSources.subscribe(this._updateLegendVisibilities.bind(this)),this._hideAllExceptFirstLine=l,this._hideAllExceptFirstLine.subscribe(this._updateCollapsedSourcesMode.bind(this)),this._hideWholeLegend=u,this._hideWholeLegend.subscribe(this._updateLegendVisibilities.bind(this)),this._isPaneMain=new r.WatchedValue(this._getIsPaneMainValue()),this._updateCollapsedSourcesModeThrottle=(0,o.default)(this._updateCollapsedSourcesMode.bind(this),100),this._isPaneMain.subscribe((e=>this._showCollapserWithOneIndicator.setValue(e)),{callWithLast:!0}),this._collapsedDataSourcesStatusWidget=new hn(1,this._options.statusesWidgets),this._toggledDataSourcesStatusWidget=new hn(0,this._options.statusesWidgets),this._hasLoadingDataSources=(0,a.accumulate)(((e,t)=>{const s=e.some(Boolean);return[s,!!s&&e.includes(!0,-t)]}),this._dataSourcesLoadingStatuses.weakReference(),this._collapsedDataSourcesCount.weakReference()),this._renderer=new Se({isMultipleLayout:this._model.isMultipleLayout(),withActions:!this._options.readOnlyMode,showToggleButton:this._options.showToggleButton,isStudiesLegendHidden:this._studiesLegendHidden.readonly(),isAllLegendHidden:this._allLegendHidden.readonly(),customTextColor:_.readonly(),themedColor:this._themedColor.readonly(),showBackground:b.readonly(),backgroundTransparency:w.readonly(),collapsedDataSourcesCount:this._collapsedDataSourcesCount.readonly(),collapsedDataSourcesTitle:this._collapsedDataSourcesTitle.readonly(),combinedStatusWidget:this._collapsedDataSourcesStatusWidget,showLegendWidgetContextMenu:this.onShowLegendWidgetContextMenu.bind(this),hideAllExceptFirstLine:this._hideAllExceptFirstLine,onLegendRowFocused:this._callbacks.onLegendRowFocused,onLayoutChanged:this._layoutChanged,hasLoadingDataSources:this._hasLoadingDataSources},{showCollapserWithOneIndicator:this._showCollapserWithOneIndicator.readonly(),visibleDataSourceCount:this._visibleDataSourceCount.readonly(),isDataSourcesCollapsed:this._isDataSourcesCollapsed.readonly(),hasLoadingDataSources:this._hasLoadingDataSources,isMainPane:this._isPaneMain.readonly(),onCollapseDataSources:this.onCollapseDataSources.bind(this),onShowObjectsTreeDialog:this._callbacks.showObjectsTreeDialog,isPaneCollapsed:this._paneWidget.visuallyCollapsed(),combinedStatusWidget:this._toggledDataSourcesStatusWidget})}destroy(){this._hasLoadingDataSources.destroy(),this._backgroundThemeName.release(),this._hideNotMainSources.release(),this._hideAllExceptFirstLine.release(),this._hideWholeLegend.release(),this._sourcesIds=[],null!==this._mainSeriesViewModel&&this._destroyMainDataSource();for(const[,e]of this._statusProviders)e.destroy()
;for(const e of this._dataSourceViewModels)e.destroy();this._dataSourceViewModels=[],this._collapsedDataSourcesStatusWidget.clear(),this._toggledDataSourcesStatusWidget.clear();for(const e of this._dataSourcesStatusesWidgets)e.destroy();this._dataSourcesStatusesWidgets=[],this._clearSubscriptions();for(const e of Array.from(this._customLegendWidgetsMap.keys()))this._destroyCustomWidgetFromLayerBlock(e);this._customLegendWidgetsMap.clear(),this._renderer.destroy(),delete this._renderer,this._showLegendCalculatedProperty().unsubscribeAll(this),this._showLegendOriginalProperty().unsubscribeAll(this);const e=this._model.model().properties().childs();e.scalesProperties.childs().textColor.unsubscribeAll(this),e.paneProperties.childs().legendProperties.childs().showBackground.unsubscribeAll(this),e.paneProperties.childs().legendProperties.childs().backgroundTransparency.unsubscribeAll(this),this._dataSourcesLoadingStatuses.setValue([])}addCustomWidgetToLegend(e,t){const s=this._customLegendWidgetsFactoriesMap.get(t.block)||new Map,i=s.get(t.position)||[];i.push(e),s.set(t.position,i),this._customLegendWidgetsFactoriesMap.set(t.block,s),this.updateLayout(),this._updateCustomWidgetModeBySize()}onShowLegendWidgetContextMenu(e,t){if(this._options.readOnlyMode||!bn)return Promise.resolve();W("Show legend context menu");const s=new Map;for(const e of Array.from(this._customLegendWidgetsMap.keys())){const t=(0,l.ensureDefined)(this._customLegendWidgetsMap.get(e)),i=new Map;for(const e of Array.from(t.keys())){const s=(0,l.ensureDefined)(t.get(e)),o=i.get(e)||[];for(const e of s)o.push(...e.contextMenuActions());i.set(e,o)}s.set(e,i)}return function(e,t,s,i,o,l){const a=[],n=i.get(0);if(void 0!==n){const e=n.get(1);void 0!==e&&e.length>0&&(a.push(...e),a.push(new Ae.Separator))}const r=e.model().properties().childs().paneProperties.childs().legendProperties.childs();a.push(new Ae.Action({actionId:"Chart.Legend.ToggleSymbolVisibility",options:{checkable:!0,checked:r.showSeriesTitle.value(),label:ts,statName:"Show/Hide Symbol",onExecute:()=>Zt(e,r.showSeriesTitle,qt)}})),t.showOpenMarketStatus&&"market"===e.mainSeries().marketStatusModel().status().value()&&!(0,Ot.isEconomicSymbol)(e.mainSeries().symbolInfo())&&a.push(new Ae.Action({actionId:"Chart.Legend.ToggleOpenMarketStatusVisibility",options:{checkable:!0,checked:zt.showMarketOpenStatusProperty.value(),label:ss,statName:"Show/Hide Open market status",onExecute:()=>Zt(e,zt.showMarketOpenStatusProperty,jt)}})),a.push(new Ae.Action({actionId:"Chart.Legend.ToggleOhlcValuesVisibility",options:{checkable:!0,checked:r.showSeriesOHLC.value(),label:is,statName:"Show/Hide chart values",onExecute:()=>Zt(e,r.showSeriesOHLC,Xt)}}));const d=e.mainSeries().style(),u=12!==d&&20!==d;if(u&&!Ut.alwaysShowLastPriceAndLastDayChange&&a.push(new Ae.Action({actionId:"Chart.Legend.ToggleBarChangeValuesVisibility",options:{checkable:!0,checked:r.showBarChange.value(),label:ls,statName:"Show/Hide Bar Change Values",onExecute:()=>Zt(e,r.showBarChange,Kt)}})),20!==d&&a.push(new Ae.Action({
actionId:"Chart.Legend.ToggleVolumeVisibility",options:{checkable:!0,checked:r.showVolume.value(),label:as,statName:"Show/Hide Volume",onExecute:()=>Zt(e,r.showVolume,es)}})),u&&(Ut.lastDayChangeAvailable||Ut.alwaysShowLastPriceAndLastDayChange)){const t=Ut.alwaysShowLastPriceAndLastDayChange?r.showBarChange:r.showLastDayChange;a.push(new Ae.Action({actionId:"Chart.Legend.ToggleLastDayChangeValuesVisibility",options:{checkable:!0,checked:t.value(),label:os,statName:"Show/Hide Last day change values",onExecute:()=>Zt(e,t,Qt)}}))}if(a.push(new Ae.Separator),void 0!==n){const e=n.get(0);void 0!==e&&e.length>0&&(a.push(...e),a.push(new Ae.Separator))}const c=i.get(1);if(void 0!==c){const e=c.get(1);void 0!==e&&e.length>0&&(a.push(...e),a.push(new Ae.Separator))}if(e.model().priceDataSources().some((e=>!(0,_t.isActingAsSymbolSource)(e)&&e.showInObjectTree()))&&(a.push(new Ae.Action({actionId:"Chart.Legend.ToggleIndicatorTitlesVisibility",options:{checkable:!0,checked:r.showStudyTitles.value(),label:ns,statName:"Show/Hide Indicator Titles",onExecute:()=>Zt(e,r.showStudyTitles,$t)}})),a.push(new Ae.Action({actionId:"Chart.Legend.ToggleIndicatorArgumentsVisibility",options:{checkable:!0,checked:r.showStudyArguments.value(),label:rs,statName:"Show/Hide Indicator Arguments",onExecute:()=>Zt(e,r.showStudyArguments,Jt)}})),a.push(new Ae.Action({actionId:"Chart.Legend.ToggleIndicatorValuesVisibility",options:{checkable:!0,checked:r.showStudyValues.value(),label:ds,statName:"Show/Hide Indicator Values",onExecute:()=>Zt(e,r.showStudyValues,Yt)}}))),void 0!==c){const e=c.get(0);void 0!==e&&e.length>0&&(a.push(...e),a.push(new Ae.Separator))}t.settings&&(a[a.length-1]instanceof Ae.Separator||a.push(new Ae.Separator),a.push(new Gt.ActionWithStandardIcon({actionId:"Chart.Dialogs.ShowGeneralSettings.LegendTab",options:{label:us,iconId:"Settings",statName:"Settings...",onExecute:()=>s(Ze.TabNames.legend)}})));const h=cs(o.target,"entityId"),p={menuName:"LegendPropertiesContextMenu",detail:{type:h?"study":"series",id:h??"_seriesId"}};return We.ContextMenuManager.showMenu(a,o,{statName:"LegendContextMenu"},p,l)}(this._model,this._options.contextMenu,this._callbacks.showGeneralChartProperties,s,e,t)}onCollapseDataSources(){const e=this._showLegendOriginalProperty();e.setValue(!e.value())}updateLayout(){const e=this._paneWidget.state().sourcesByGroup().legendViewSources().filter((e=>null!==e.statusView()&&e.isDisplayedInLegend())).reverse(),t=this._sourcesIds,s=this._model.mainSeries(),i=e.indexOf(s);let o;if(-1!==i){if(e.splice(i,1),!gn&&null===this._mainSeriesViewModel){const e=new ut(this._model,s,this._mainSeriesViewModelsOptions,this._callbacks,this._options.contextMenu);this._mainSeriesViewModel=e;const t=new Ra(this._statusSourceAdapter(s),this._model,this._options.statusesWidgets);this._mainSeriesStatusWidget=t,o={model:e,statusWidget:t}}}else null!==this._mainSeriesViewModel&&(o=null,this._destroyMainDataSource(),this._destroyCustomWidgetFromLayerBlock(0));const a=e.map((e=>e.instanceId()));this._sourcesIds=a
;const n=[],r=new Map,d=[],u=[],c=this._dataSourceViewModels,h=this._dataSourcesStatusesWidgets;let p=t.length-1;for(;p>=0;){const e=t[p],s=a.indexOf(e);if(-1===s){n.push(p),c[p].destroy(),h[p].destroy();const t=this._statusProviders.get(e);t&&(t.destroy(),this._statusProviders.delete(e))}else p!==s&&(r.set(e,{model:c[p],statusWidget:h[p]}),d.push({oldIndex:p,newIndex:s}));p--}const _=[],m=[];for(let s=0;s<a.length;s++){const i=a[s];let o,n;if(r.has(i)){const e=(0,l.ensureDefined)(r.get(i));o=e.model,n=e.statusWidget}else if(t[s]===i)o=c[s],n=h[s];else{const t=e[s];o=new Rt(this._model,t,this._dataSourceViewModelsOptions,this._callbacks,this._options.contextMenu),n=new Bl(this._statusSourceAdapter(t),this._model,this._options.statusesWidgets),u.push({model:o,statusWidget:n,index:s})}_.push(o),m.push(n)}this._dataSourceViewModels=_,this._dataSourcesStatusesWidgets=m,0===this._dataSourceViewModels.length&&this._destroyCustomWidgetFromLayerBlock(1),this._dataSourceViewModels.length&&this._recalculateLoadingDataSources(),this._recreateSubscriptions(),this._isPaneMain.setValue(this._getIsPaneMainValue()),this.update();const g=n.length||u.length||d.length;if((void 0!==o||g)&&this._layoutChanged.fire({newMainSource:o,removedDataSources:n,addedDataSources:u,movedDataSources:d}),-1!==i&&this._addCustomWidgetForLayerBlock(0),this._dataSourceViewModels.length>0&&this._addCustomWidgetForLayerBlock(1),this._updateWidgetModeBySize(),g){this._updateCollapsedSourcesMode(),this._toggledDataSourcesStatusWidget.clear();for(const e of this._dataSourcesStatusesWidgets)this._toggledDataSourcesStatusWidget.addStatusWidget(e)}}update(){null!==this._mainSeriesViewModel&&this._mainSeriesViewModel.update();for(const e of this._dataSourceViewModels)e.update()}updateThemedColors(e){null===e&&(e=(0,pn.getStdThemedValue)("chartProperties.paneProperties.background",this._backgroundThemeName.value())),this._themedColor.setValue(e||"")}firstTitle(){return this._renderer.firstTitle()}getElement(){return this._renderer.getElement()}addMargin(e){if(this._margin===e)return;this._margin=e;this._renderer.getElement().style.maxWidth=0===this._margin?"":`calc(100% - ${this._margin+vn}px)`,this._updateWidgetModeBySize()}updateWidgetModeBySize(e){this._size=e,this._updateWidgetModeBySize()}_statusSourceAdapter(e){const t=e.instanceId();let s=this._statusProviders.get(t);return void 0===s&&(s=e!==this._model.mainSeries()?new za(e,this._model.model()):new Fa(this._model.mainSeries(),this._model.model()),this._statusProviders.set(t,s)),s}_updateWidgetModeBySize(){this._updateWidgetModeByWidth(),this._updateWidgetModeByHeight(),this._updateCustomWidgetModeBySize()}_updateWidgetModeByWidth(){if(null===this._size)return;const e=this._availableWidth();this._renderer.updateMode(e),this._paneWidget.hasState()&&this._paneWidget.state().containsMainSeries()&&this._model.mainSeries().setTextSourceIsAlwaysTickerRestrictionEnabled(e<=132)}_updateWidgetModeByHeight(){null!==this._size&&(this._availableHeight=.8*this._size.height,this._updateCollapsedSourcesModeThrottle())}
_updateCustomWidgetModeBySize(){if(null===this._size)return;const e=(0,i.size)({width:this._availableWidth(),height:this._size.height});for(const t of Array.from(this._customLegendWidgetsMap.values()))for(const s of Array.from(t.values()))for(const t of s)t.updateWidgetModeBySize(e)}_destroyMainDataSource(){(0,l.ensureNotNull)(this._mainSeriesStatusWidget).destroy(),this._mainSeriesStatusWidget=null;(0,l.ensureNotNull)(this._mainSeriesViewModel).destroy(),this._mainSeriesViewModel=null}_updateCollapsedSourcesMode(){const e=this._dataSourceViewModels.length,t=this._hideAllExceptFirstLine.value(),s=null!==this._mainSeriesViewModel;if(this._collapsedDataSourcesStatusWidget.clear(),this._availableHeight>0&&e>2){const i=Number(this._renderer.getMainSourceHeight()),o=this._renderer.getDataSourceHeight(),l=this._getCustomWidgetsHeight();if(null!==o){const a=Math.floor((this._availableHeight-i-l)/o),n=Math.max(a,2)-1;if(e>n+1){let i="";for(let o=0;o<e;o++){const e=o<n;this._dataSourceViewModels[o].setGlobalVisibility(e&&(!t||0===o&&!s)),e||(i+=`${0===i.length?"":", "}${this._dataSourceViewModels[o].getFullTitle()}`,this._collapsedDataSourcesStatusWidget.addStatusWidget(this._dataSourcesStatusesWidgets[o]))}return this._collapsedDataSourcesTitle.setValue(i),void this._collapsedDataSourcesCount.setValue(e-n)}}}for(let e=0;e<this._dataSourceViewModels.length;++e)this._dataSourceViewModels[e].setGlobalVisibility(!t||0===e&&!s);this._collapsedDataSourcesCount.setValue(0),this._collapsedDataSourcesTitle.setValue("")}_getCustomWidgetsHeight(){let e=0;for(const t of Array.from(this._customLegendWidgetsMap.values()))for(const s of Array.from(t.values()))for(const t of s)e+=t.height().value();return e}_getCustomTextColorValue(){const e=this._model.model().properties().childs().scalesProperties.childs().textColor.value();for(const t of(0,pn.getStdThemeNames)())if((0,pn.isStdThemedDefaultValue)("chartProperties.scalesProperties.textColor",e,t))return null;return e}_clearSubscriptions(){null!==this._mainSeriesRowHidden&&(this._mainSeriesRowHidden.destroy(),this._mainSeriesRowHidden=null);for(const e of this._dataSourceRowsHidden)e.destroy();this._dataSourceRowsHidden=[];for(const e of this._customWidgetsVisibilities)e.destroy();this._customWidgetsVisibilities=[];for(const e of this._customWidgetsHeights)e.destroy();this._customWidgetsHeights=[]}_recreateSubscriptions(){this._clearSubscriptions(),null!==this._mainSeriesViewModel&&(this._mainSeriesRowHidden=this._mainSeriesViewModel.isRowHidden().spawn(),this._mainSeriesRowHidden.subscribe(this._updateLegendVisibilities.bind(this)));for(const e of this._dataSourceViewModels){const t=e.isRowHidden().spawn();this._dataSourceRowsHidden.push(t),t.subscribe(this._updateVisibleDataSourceCount.bind(this)),t.subscribe(this._updateLegendVisibilities.bind(this))}for(const e of Array.from(this._customLegendWidgetsMap.values()))for(const t of Array.from(e.values()))for(const e of t){const t=e.visibility().spawn();this._customWidgetsVisibilities.push(t),
t.subscribe(this._updateLegendVisibilities.bind(this));const s=e.height().spawn();this._customWidgetsHeights.push(s),s.subscribe(this._updateCollapsedSourcesMode.bind(this))}this._updateVisibleDataSourceCount(),this._updateLegendVisibilities()}_recalculateLoadingDataSources(){this._dataSourcesLoadingStatuses.setValue(this._dataSourceViewModels.map((e=>e.loading().weakReference())))}_updateLegendVisibilities(){if(this._hideWholeLegend.value())return void this._allLegendHidden.setValue(!0);const e=0!==this._dataSourceRowsHidden.length&&this._dataSourceRowsHidden.every((e=>e.value())),t=this._hideNotMainSources.value()||e;this._studiesLegendHidden.setValue(t);const s=null===this._mainSeriesRowHidden||this._mainSeriesRowHidden.value(),i=this._customWidgetsVisibilities.some((e=>e.value()));this._allLegendHidden.setValue(e&&s&&!i)}_updateVisibleDataSourceCount(){const e=this._dataSourceRowsHidden.filter((e=>!e.value())).length;this._visibleDataSourceCount.setValue(e)}_setLegendVisibilityToggled(){Ni.setValue("legend.isVisibilityToggled",!0);this._showLegendOriginalProperty().unsubscribe(this,(0,l.ensureNotNull)(this._onLegendVisibilityToggled))}_getIsPaneMainValue(){return this._paneWidget.containsMainSeries()}_showLegendCalculatedProperty(){return this._model.model().showLegend()}_showLegendOriginalProperty(){return this._model.model().properties().childs().paneProperties.childs().legendProperties.childs().showLegend}_addCustomWidgetForLayerBlock(e){const t=this._customLegendWidgetsFactoriesMap.get(e);if(void 0===t)return;const s=this._customLegendWidgetsMap.get(e)||new Map;let i=!1;for(const o of Array.from(t.keys())){const l=s.get(o)||[],a=t.get(o)||[];for(let t=l.length;t<a.length;t++){const s=a[t](this._model.model(),this._backgroundThemeName.spawnOwnership(),this._hideAllExceptFirstLine.weakReference());l.push(s),this._renderer.addCustomWidget(s,{block:e,position:o}),i=!0}i&&s.set(o,l)}i&&this._customLegendWidgetsMap.set(e,s)}_destroyCustomWidgetFromLayerBlock(e){const t=this._customLegendWidgetsMap.get(e);if(void 0!==t){for(const e of Array.from(t.values()))for(const t of e)t.destroy();t.clear(),this._customLegendWidgetsMap.delete(e)}}_availableWidth(){return null===this._size?0:Math.max(0,this._size.width-this._margin-vn)}}},377200:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PaneControlsWidget:()=>X});var i=s(345848),o=s(444372),l=s(470316),a=s(68777),n=s(790024),r=s(128090),d=s(650151),u=s(724377),c=s(127785),h=s(778785),p=s(479443),_=s(244784),m=s(233465);class g{constructor(e,t,s){this._parentEl=document.createElement("div"),this._listActionsWrapperEl=null,this._listActionsElements={},this._actionsSpawns={},this._onMouseEnterLeaveEventHandler=null,this._mouseOverWidget=!1,this._wrapEl=e,this._onMouseEnterLeaveEventHandler=this._onMouseEnterLeaveEvent.bind(this),this._wrapEl.addEventListener("mouseenter",this._onMouseEnterLeaveEventHandler),this._wrapEl.addEventListener("mouseleave",this._onMouseEnterLeaveEventHandler),this._actions=t,this._globalVisibility=s.globalVisibility.spawn(),
this._globalVisibility.subscribe(this._updatePaneControlsWidgetVisibility.bind(this)),this._visibilityType=s.visibilityType.spawn(),this._visibilityType.subscribe(this._updatePaneControlsWidgetVisibility.bind(this)),this._separatorSelected=s.separatorSelected.spawn(),this._separatorSelected.subscribe(this._updatePaneControlsWidgetVisibility.bind(this)),this._maximized=s.maximized.spawn(),this._maximized.subscribe(this._updatePaneControlsWidgetVisibility.bind(this)),this._doNotSwitchToContextMenuMode=s.doNotSwitchToContextMenuMode,this._themedColor=s.themedColor.spawn(),this._themedColor.subscribe(this._updateThemedColor.bind(this));for(const[e,t]of Object.entries(this._actions)){const s=e;this._actionsSpawns[s]={visible:t.visible.spawn(),title:void 0===t.title?null:t.title.spawn()},this._actionsSpawns[s].visible.subscribe(this._updateActionVisibilities.bind(this,s));const i=this._actionsSpawns[s].title;null!==i&&i.subscribe(this._updateActionTitle.bind(this,s))}this._render(),this._updatePaneControlsWidgetVisibility(),this._updateThemedColor(this._themedColor.value()),this._parentEl.classList.toggle(_.touchMode,p.trackingModeIsAvailable),this._parentEl.addEventListener("contextmenu",(e=>e.preventDefault())),this._parentEl.setAttribute("aria-hidden","true"),this._wrapEl.matches(":hover")&&this._onMouseEnterLeaveEvent({type:"mouseenter"})}destroy(){this._visibilityType.destroy(),this._themedColor.destroy(),this._separatorSelected.destroy();for(const e of Object.keys(this._actionsSpawns)){const t=e;this._actionsSpawns[t].visible.destroy();const s=this._actionsSpawns[t].title;null!==s&&s.destroy()}null!==this._onMouseEnterLeaveEventHandler&&(this._wrapEl.removeEventListener("mouseenter",this._onMouseEnterLeaveEventHandler),this._wrapEl.removeEventListener("mouseleave",this._onMouseEnterLeaveEventHandler),this._onMouseEnterLeaveEventHandler=null),this._parentEl.remove(),this._parentEl.innerHTML="",delete this._parentEl}getElement(){return this._parentEl}bottomWithMargin(){const e=this._parentEl.classList.contains(_.touchMode)?Number(_.css_value_pane_controls_button_touch_size):Number(_.css_value_pane_controls_button_size);return 2*Number(_.css_value_pane_controls_margin_top)+e}updateWidgetModeByWidth(e){const t=!this._doNotSwitchToContextMenuMode.value()&&e<356,s=!this._doNotSwitchToContextMenuMode.value()&&e<666.65,i=(0,d.ensureNotNull)(this._listActionsWrapperEl),o=(0,d.ensureNotNull)(this._listActionsElements.more);i.classList.toggle(m.blockHidden,t||s),o.classList.toggle(m.blockHidden,t||!s||!this._actions.more.visible.value())}_render(){this._renderActions(),this._parentEl.classList.add(_.paneControls),this._wrapEl.append(this._parentEl)}_renderActions(){null===this._listActionsWrapperEl&&(this._listActionsWrapperEl=document.createElement("div"),this._listActionsWrapperEl.classList.add(_.buttons),this._parentEl.append(this._listActionsWrapperEl));const e={tag:"div",buttonClassName:_.button,wrapIconClassName:_.buttonIcon,hiddenClassName:m.blockHidden};this._listActionsElements.up=(0,
c.createActionElement)(this._actions.up,e),this._listActionsElements.down=(0,c.createActionElement)(this._actions.down,e),this._listActionsElements.collapse=(0,c.createActionElement)(this._actions.collapse,e),this._listActionsElements.restore=(0,c.createActionElement)(this._actions.restore,e),this._listActionsElements.close=(0,c.createActionElement)(this._actions.close,e),this._listActionsElements.maximize=(0,c.createActionElement)(this._actions.maximize,e),this._listActionsElements.minimize=(0,c.createActionElement)(this._actions.minimize,e),this._listActionsElements.restore.classList.add(_.button_activated),this._listActionsElements.minimize.classList.add(_.button_activated),this._listActionsWrapperEl.append(this._listActionsElements.up,this._listActionsElements.down,this._listActionsElements.close,this._listActionsElements.collapse,this._listActionsElements.restore,this._listActionsElements.maximize,this._listActionsElements.minimize),this._listActionsElements.more=(0,c.createActionElement)(this._actions.more,e),this._parentEl.append(this._listActionsElements.more)}_updateActionVisibilities(e,t){(0,d.ensureNotNull)(this._listActionsElements[e]).classList.toggle(m.blockHidden,!t)}_updateActionTitle(e,t){(0,d.ensureNotNull)(this._listActionsElements[e]).setAttribute("title",t)}_onMouseEnterLeaveEvent(e){this._mouseOverWidget="mouseenter"===e.type,"visibleOnMouseOver"===this._visibilityType.value()&&this._updatePaneControlsWidgetVisibility()}_updatePaneControlsWidgetVisibility(){let e,t=!1;switch(this._visibilityType.value()){case"alwaysOff":e=!1,t=!0;break;case"alwaysOn":e=this._globalVisibility.value();break;case"visibleOnMouseOver":case"visibleOnTapSelection":e=this._globalVisibility.value()&&this._mouseOverWidget}this._separatorSelected.value()&&"visibleOnTapSelection"===this._visibilityType.value()&&(e=!0),this._maximized.value()&&h.mobiletouch&&(e=!0),this._parentEl.classList.toggle(_.paneControls_hidden,!e),this._parentEl.classList.toggle(_.paneControls_forceHidden,!this._globalVisibility.value()||t)}_updateThemedColor(e){if(e.length>0){const[t,s,i]=(0,u.parseRgb)(e);this._parentEl.style.color=(0,u.rgbaToString)([t,s,i,(0,u.normalizeAlphaComponent)(.8)])}else this._parentEl.style.removeProperty("color")}}var b=s(172073),v=s(257381),w=s(430426),S=s(472899),y=s(648344),f=s(99539),C=s(520465),E=s(334763);const M=o.t(null,void 0,s(513930)),x=M,k=(0,l.humanReadableModifiers)(l.Modifiers.Mod)+M;var V=s(820028),L=s(518594),A=s(604286),W=s(37896),T=s(981020),B=s(756612),H=s(279526),D=s(682847),I=s(671402),P=s(142930);const N=o.t(null,void 0,s(866260)),R=o.t(null,void 0,s(407310)),O=o.t(null,void 0,s(274079)),z=o.t(null,void 0,s(90165)),F=o.t(null,void 0,s(512486)),U=o.t(null,void 0,s(565495)),G=o.t(null,void 0,s(394670)),Z=o.t(null,void 0,s(513930)),q=(0,A.hotKeySerialize)({keys:[""],text:Z}),j=(0,A.hotKeySerialize)({keys:[(0,l.humanReadableModifiers)(l.Modifiers.Mod,!1)],text:`{0} + ${Z}`});class X{constructor(e,t,s,i){this._actions={},this._moreCMShown=!1,this._themedColor=new V.WatchedValue(""),this._model=e,
this._pane=t,this._closeButtonVisibility=new V.WatchedValue(this._getCloseButtonVisibility()),this._upButtonVisibility=new V.WatchedValue(this._getUpButtonVisibility()),this._downButtonVisibility=new V.WatchedValue(this._getDownButtonVisibility()),this._maximizeButtonVisibility=new V.WatchedValue(this._getMaximizeButtonVisibility()),this._minimizeButtonVisibility=new V.WatchedValue(this._getMinimizeButtonVisibility()),this._collapseButtonVisibility=(0,a.combine)(((e,t,s)=>!e&&!t&&s),t.maximized().weakReference(),t.collapsed().weakReference(),t.collapsingAvailable().weakReference()),this._restoreButtonVisibility=(0,a.combine)(((e,t)=>!e&&t),t.maximized().weakReference(),t.collapsed().weakReference()),this._createActions(),this._visibilityTypeProperty=(0,n.actualBehavior)(),this._visibilityTypeProperty.subscribe(this,(e=>{this._visibilityType.setValue(e.value())})),this._visibilityType=new V.WatchedValue(this._visibilityTypeProperty.value()),this._isPaneMaximize=new V.WatchedValue(this._getIsPaneMaximizeValue()),this._isWidgetShow=new V.WatchedValue(this._getIsWidgetShow()),this._backgroundThemeName=s.backgroundThemeName,this._renderer=new g(i,this._actions,{visibilityType:this._visibilityType.readonly(),globalVisibility:this._isWidgetShow.readonly(),doNotSwitchToContextMenuMode:this._isPaneMaximize.readonly(),themedColor:this._themedColor.readonly(),separatorSelected:s.anySeparatorSelected,maximized:this._isPaneMaximize.readonly()})}destroy(){this._visibilityTypeProperty.unsubscribeAll(this),this._collapseButtonVisibility.destroy(),this._restoreButtonVisibility.destroy(),this._renderer.destroy()}getElement(){return this._renderer.getElement()}bottomWithMargin(){return this._renderer.bottomWithMargin()}action(){return this._actions}update(){this._updateButtonsVisibility(),this._isPaneMaximize.setValue(this._getIsPaneMaximizeValue()),this._isWidgetShow.setValue(this._getIsWidgetShow())}updateWidgetModeByWidth(e){this._renderer.updateWidgetModeByWidth(e)}updateThemedColors(e){null===e&&(e=(0,L.getStdThemedValue)("chartProperties.paneProperties.background",this._backgroundThemeName.value())),this._themedColor.setValue(e||"")}_updateButtonsVisibility(){this._closeButtonVisibility.setValue(this._getCloseButtonVisibility()),this._upButtonVisibility.setValue(this._getUpButtonVisibility()),this._downButtonVisibility.setValue(this._getDownButtonVisibility()),this._maximizeButtonVisibility.setValue(this._getMaximizeButtonVisibility()),this._minimizeButtonVisibility.setValue(this._getMinimizeButtonVisibility())}_createActions(){this._actions.up={icon:T,action:this._onUpDownButton.bind(this,"up"),visible:this._upButtonVisibility,title:new V.WatchedValue(R),className:_.up,dataset:{name:"pane-button-up"}},this._actions.down={icon:B,action:this._onUpDownButton.bind(this,"down"),visible:this._downButtonVisibility,title:new V.WatchedValue(O),className:_.down,dataset:{name:"pane-button-down"}},this._actions.close={icon:W,action:this._onCloseButton.bind(this),visible:this._closeButtonVisibility,title:new V.WatchedValue(N),dataset:{
name:"pane-button-close"}},this._actions.maximize={icon:H,action:this._onToggleMaximizeButton.bind(this,"Maximize pane"),visible:this._maximizeButtonVisibility,title:new V.WatchedValue(z),hotKeyTitle:q,className:_.maximize,dataset:{name:"pane-button-maximize"}},this._actions.minimize={icon:H,action:this._onToggleMaximizeButton.bind(this,"Minimize pane"),visible:this._minimizeButtonVisibility,title:new V.WatchedValue(F),hotKeyTitle:q,className:_.minimize,dataset:{name:"pane-button-minimize"}},this._actions.collapse={icon:I,action:this._onToggleCollapseButton.bind(this,"Collapse pane"),visible:this._collapseButtonVisibility,title:new V.WatchedValue(U),hotKeyTitle:j,className:_.collapse,dataset:{name:"pane-button-collapse"}},this._actions.restore={icon:P,action:this._onToggleCollapseButton.bind(this,"Restore pane"),visible:this._restoreButtonVisibility,title:new V.WatchedValue(F),hotKeyTitle:j,className:_.restore,dataset:{name:"pane-button-restore"}},this._actions.more={icon:D,action:this._showButtonsInContextMenu.bind(this),visible:new V.WatchedValue(!0),title:new V.WatchedValue(G),dataset:{name:"pane-button-more"}}}_getCloseButtonVisibility(){let e=!1;return this._pane.containsMainSeries()||this._pane.maximized().value()||(e=this._pane.dataSources().some((e=>(0,r.isStudy)(e)))),e}_onCloseButton(){this._trackEvent("Delete pane");const e=this._model.model().panes().indexOf(this._pane);this._model.removePane(e)}_getUpButtonVisibility(){const e=this._pane,t=this._model.model().panes().indexOf(e);return this._model.model().canMovePaneUp(t)}_getDownButtonVisibility(){const e=this._model.model().panes().indexOf(this._pane);return this._model.model().canMovePaneDown(e)}_onUpDownButton(e){this._trackEvent(`Move pane ${e}`);const t=this._model.model().panes().indexOf(this._pane);this._model.rearrangePanes(t,e)}_getMaximizeButtonVisibility(){return this._model.model().panes().length>1&&!this._pane.maximized().value()}_getMinimizeButtonVisibility(){return this._model.model().panes().length>1&&this._pane.maximized().value()}_onToggleMaximizeButton(e){this._trackEvent(e),this._model.toggleMaximizedPane(this._pane)}_onToggleCollapseButton(e){this._trackEvent(e),this._model.toggleCollapsedPane(this._pane)}_showButtonsInContextMenu(e){e.preventDefault(),this._moreCMShown||function(e,t,s){const i=[];if(e.maximize.visible.value()){const t=(0,d.ensure)(e.maximize.title),s=(0,d.ensureNotNull)(e.maximize.action);i.push(new b.Action({actionId:"Chart.PaneControls.MaximizePane",options:{icon:f,label:t.value(),statName:"Maximize Pane",shortcutHint:x,onExecute:()=>s()}}))}else if(e.minimize.visible.value()){const t=(0,d.ensure)(e.minimize.title),s=(0,d.ensureNotNull)(e.minimize.action);i.push(new b.Action({actionId:"Chart.PaneControls.MinimizePane",options:{icon:f,label:t.value(),statName:"Minimize Pane",shortcutHint:x,onExecute:()=>s()}}))}if(e.collapse.visible.value()){const t=(0,d.ensure)(e.collapse.title),s=(0,d.ensureNotNull)(e.collapse.action);i.push(new b.Action({actionId:"Chart.PaneControls.CollapsePane",options:{icon:C,label:t.value(),
statName:"Collapse pane",shortcutHint:k,onExecute:()=>s()}}))}if(e.restore.visible.value()){const t=(0,d.ensure)(e.restore.title),s=(0,d.ensureNotNull)(e.restore.action);i.push(new b.Action({actionId:"Chart.PaneControls.RestorePane",options:{icon:E,label:t.value(),statName:"Restore pane",shortcutHint:k,onExecute:()=>s()}}))}if(e.up.visible.value()){const t=(0,d.ensure)(e.up.title),s=(0,d.ensureNotNull)(e.up.action);i.push(new b.Action({actionId:"Chart.PaneControls.MovePaneUp",options:{icon:S,label:t.value(),statName:"Move pane up",onExecute:()=>s()}}))}if(e.down.visible.value()){const t=(0,d.ensure)(e.down.title),s=(0,d.ensureNotNull)(e.down.action);i.push(new b.Action({actionId:"Chart.PaneControls.MovePaneDown",options:{icon:y,label:t.value(),statName:"Move pane down",onExecute:()=>s()}}))}if(e.close.visible.value()){const t=(0,d.ensure)(e.close.title),s=(0,d.ensureNotNull)(e.close.action);i.push(new b.Action({actionId:"Chart.PaneControls.DeletePane",options:{icon:w,label:t.value(),statName:"Delete pane",onExecute:()=>s()}}))}const o=(0,d.ensureNotNull)(t.currentTarget).getBoundingClientRect();return v.ContextMenuManager.showMenu(i,{clientX:o.right,clientY:o.top+o.height+3,attachToXBy:"right"},void 0,void 0,s)}(this._actions,e,(()=>{this._moreCMShown=!1})).then((()=>{this._moreCMShown=!0}))}_getIsPaneMaximizeValue(){return this._pane.maximized().value()}_getIsWidgetShow(){return this._model.model().panes().length>1}_trackEvent(e){(0,i.trackEvent)("GUI","Pane action",e)}}},127785:(e,t,s)=>{"use strict";s.d(t,{createActionElement:()=>n});var i=s(343888),o=s(650151),l=s(536794),a=s(196726);function n(e,t){const{buttonClassName:s,wrapIconClassName:n,hiddenClassName:r,iconSize:d,blurOnClick:u}=t,c=document.createElement(t.tag);c.className=s,c.classList.toggle(r,!e.visible.value()),Object.assign(c.dataset,e.dataset),void 0!==e.className&&c.classList.add(e.className),void 0!==e.title&&(c.classList.add("apply-common-tooltip"),c.setAttribute("title",e.title.value()),void 0!==e.hotKeyTitle&&(c.dataset.tooltipHotkey=e.hotKeyTitle)),c.addEventListener("touchend",(0,a.wrapHandlerWithPreventEvent)(e.action)),c.addEventListener("mousedown",(t=>{0===t.button&&(e.action(t),u&&c.blur())}));const h=document.createElement("div");let p;return h.classList.add(n),p=(0,i.default)(e.icon)?e.icon.get((0,o.ensureDefined)(d))||"":e.icon,(0,l.isString)(p)?h.innerHTML=p:h.appendChild(p),c.appendChild(h),c}},503958:(e,t,s)=>{"use strict";s.d(t,{isCustomStudy:()=>o});const i={LinearRegression:!0,PivotPointsHighLow:!0,VbPSessions:!0,VbPSessionsRoughDetailed:!0,VbPPeriodic:!0,VbPAutoAnchored:!0,ZigZag:!0,TPOPeriodic:!0,TPOSessions:!0,VbPFixed:!0,PivotPointsStandard:!0,VbPVisible:!0,VbPAnchored:!0};function o(e){return e in i}},319259:(e,t,s)=>{"use strict";s.d(t,{MetaInfoHelper:()=>h});var i=s(650151),o=s(735566),l=s(807958),a=s(974145),n=s(536794),r=s(479483);function d(e){return!e.groupId&&!e.isHidden&&e.id!==r.RangeDependentStudyInputNames.FirstBar&&e.id!==r.RangeDependentStudyInputNames.LastBar}var u=s(503958);const c=(0,
o.getLogger)("Platform.GUI.PropertyDialog.Indicators.MetaInfo");class h{constructor(e){this._metaInfo=e}hasUserEditableInputs(){return this._metaInfo.inputs.some(d)}getUserEditableInputs(){return this._metaInfo.inputs.filter(d)}hasUserEditableProperties(){return l.StudyMetaInfo.isScriptStrategy(this._metaInfo)}hasUserEditableStyles(){const e=this._metaInfo;return e.plots.length>0||void 0!==e.bands||void 0!==e.filledAreas||(0,u.isCustomStudy)(e.shortId)||l.StudyMetaInfo.isScriptStrategy(this._metaInfo)||Object.values(e.graphics).some((e=>void 0!==e))}getUserEditablePlots(){const e=new Set,t=this._metaInfo;return t.plots.filter((s=>{if((0,a.isColorerPlot)(s)||(0,a.isTextColorerPlot)(s)||(0,a.isDataOffsetPlot)(s)||(0,a.isOhlcColorerPlot)(s)||(0,a.isAlertConditionPlot)(s)||(0,a.isDataPlot)(s))return!1;if((0,a.isOhlcPlot)(s)){const o=s.target;if(e.has(o))return!1;e.add(o);const l=(0,i.ensureDefined)(t.ohlcPlots);return!(0,i.ensureDefined)(l[o]).isHidden}{const e=t.styles?t.styles[s.id]:void 0;return void 0===e||!e.isHidden}}))}hasUserEditableOptions(){return this.hasUserEditableInputs()||this.hasUserEditableProperties()||this.hasUserEditableStyles()}getStrategyProperties(){const e=this._metaInfo,t=e.inputs.filter(_),s={...p};for(const i of t){const t=i.internalID;s[t]=i,p.hasOwnProperty(t)||c.logWarn(`Unknown strategy input internal id ${t} in ${e.fullId}`)}return(0,n.clone)(s)}}const p={currency:void 0,backtest_fill_limits_assumption:void 0,calc_on_every_tick:void 0,calc_on_order_fills:void 0,commission_value:void 0,commission_type:void 0,initial_capital:void 0,pyramiding:void 0,slippage:void 0,default_qty_type:void 0,default_qty_value:void 0,margin_long:void 0,margin_short:void 0,use_bar_magnifier:void 0,process_orders_on_close:void 0,fill_orders_on_standard_ohlc:void 0};function _(e){return"strategy_props"===e.groupId}},402823:(e,t,s)=>{"use strict";s.d(t,{showAboutTheStudyHandler:()=>u});var i=s(825957);s(444372),s(203723);const o=/^STD;Fund_(.*?)(?:_(?:fy|fq|fh|ttm))?$/;var l=s(807958),a=s(111332),n=s(613122),r=s(723809),d=s(79428);async function u(e){const t=e.metaInfo();if(!t)return null;const{scriptIdPart:u,id:c,pine:h}=t;if((0,d.isFundamentalStudyMetaInfo)(t)){const e=function(e){const t=e.match(o);return t?t[1]:t}(u);if(e){const{default:t}=await s.e(54875).then(s.t.bind(s,384898,19));if(e in t)return()=>(0,i.showSupportDialog)({solutionId:t[e]})}}else if(!h||l.StudyMetaInfo.hasStdSuffix(u)){const{default:e}=await s.e(95937).then(s.t.bind(s,676006,19));if(u in e||c in e)return()=>(0,i.showSupportDialog)({solutionId:e[u]||e[c]})}else if(l.StudyMetaInfo.hasPubSuffix(u))return async()=>{try{const{chartImageUrl:e}=await(0,a.requestScriptInfo)(u);(0,n.openPublicationViewPopup)({uid:e,type:"script"})}catch{(0,r.showScriptInfoErrorNoticeDialog)()}};return null}},661082:(e,t,s)=>{"use strict";s.d(t,{StatusRenderer:()=>n});var i=s(68777),o=s(199241);class l{constructor(e){this._el=document.createElement("div"),this._prevCustomClass=null,this._prevCustomColor=null,this._customColor=null,this._size=e.size||"small",
this._icon=e.icon.spawn(),this._className=e.className.spawn(),this._visible=(0,i.combine)(((e,t)=>e&&!!t),e.visible.spawnOwnership(),e.icon.spawnOwnership()),this._el.classList.add(o.statusItem,o[this._size]),e.datasetName&&(this._el.dataset.name=e.datasetName),e.datasetEntityId&&(this._entityId=e.datasetEntityId.spawn(),this._entityId.subscribe((e=>{this._el.dataset.entityId=e}),{callWithLast:!0})),this._icon.subscribe(this._updateIcon.bind(this),{callWithLast:!0}),this._className.subscribe(this._updateClassName.bind(this),{callWithLast:!0}),e.isBlinking&&(this._isBlinking=e.isBlinking.spawn(),this._isBlinking.subscribe(this._updateBlinkingMode.bind(this),{callWithLast:!0}),this._turnOffBlinking=e.turnOffBlinking)}destroy(){this._entityId?.destroy(),this._visible.destroy(),this._icon.destroy(),this._isBlinking&&this._isBlinking.destroy()}onClick(){this._turnOffBlinking&&this._turnOffBlinking()}visible(){return this._visible}element(){return this._el}_updateIcon(e){this._el.innerHTML=e||""}_updateClassName(e){this._prevCustomClass!==e&&(null!==this._prevCustomClass&&this._el.classList.remove(this._prevCustomClass),null!==e&&this._el.classList.add(e),this._prevCustomClass=e)}_updateCustomColor(e){0}_updateBlinkingMode(e){this._el.classList.toggle(o.blinking,e)}}function a(e,t,s){for(const i of t)for(const t of i.split(" "))e.classList.toggle(t,s)}class n{constructor(e,t,s,i=o){this.element=document.createElement("div"),this._blinkingSpawns=[],this._iconsRenderers=[],this._updateIcons=()=>{const[e,t]=this._iconsRenderers.reduce(((e,t)=>{const s=t.element();return t.visible().value()&&e[0].length<3?e[0].push(s):e[1].push(s),e}),[[],[]]);t.forEach((e=>{this.element.contains(e)&&this.element.removeChild(e)})),e.forEach(((e,t)=>{this.element.contains(e)||(t>=this.element.childElementCount?this.element.appendChild(e):this.element.insertBefore(e,this.element.childNodes[t]))}))},this._theme=i;const l=[this._theme.statuses,"apply-common-tooltip","common-tooltip-wide",this._theme[e],this._theme.statuses_hidden];a(this.element,l,!0),this._tooltips=t.spawn(),this._tooltips.subscribe(this._updateTooltip.bind(this)),this._onClickCallback=s.onClick,this._onClickHandler=this._onClick.bind(this),this.element.addEventListener("click",this._onClickHandler),this.element.dataset.name="legend-source-item-status"}destroy(){for(const e of this._iconsRenderers)e.destroy();for(const e of this._blinkingSpawns)e.destroy();this._tooltips.destroy(),this.element.removeEventListener("click",this._onClickHandler),this.element.remove()}setVisibility(e){a(this.element,[this._theme.statuses_hidden],e)}addStatusModel(e){const t=new l({visible:e.visible,icon:e.model.icon(),className:e.model.className(),size:e.model.size(),isBlinking:e.model.isBlinkingMode,turnOffBlinking:e.model.turnOffBlinkingMode,customColor:e.model.customColor(),datasetName:e.iconDatasetName,datasetEntityId:e.iconDatasetEntityId});this._iconsRenderers.push(t);const s=e.model.isBlinkingMode.spawn();s.subscribe(this._updateBlinkingMode.bind(this)),
t.visible().subscribe(this._updateIcons,{callWithLast:!0}),this._blinkingSpawns.push(s),this._updateBlinkingMode()}_onClick(e){e.preventDefault();const t=this._iconsRenderers.filter((e=>e.visible().value()));for(const e of t)e.onClick();let s=14;t.length>1&&(s-=2);const i=this.element.getBoundingClientRect(),o={x:i.left-s,y:i.bottom+4};this._onClickCallback(o)}_updateTooltip(){this.element.setAttribute("title",this._tooltips.value().join("  "))}_updateBlinkingMode(){const e=this._blinkingSpawns.some((e=>e.value()));a(this.element,[this._theme.blinking],e)}}},561141:(e,t,s)=>{"use strict";s.d(t,{MarketStatusViewModel:()=>r});var i=s(927301),o=s(820028),l=s(916013),a=s(786220),n=s(751930);class r extends a.StatusViewModel{constructor(e,t,s=!1){super({tooltipMap:n.tooltipMap,iconMap:n.iconMap,classNameMap:n.classNameMap,titleMap:n.titleMap,titleColorMap:n.titleColorMap,actionMap:n.actionMap,size:t}),this._model=null,this._expiredStatus=null,this._marketStatus=new o.WatchedValue(null).spawn(),this._sessionEdge=new o.WatchedValue(null).spawn(),this._ignoreHideStatusSettings=s,this.setModel(e),l.showMarketOpenStatusProperty.subscribe(this,this._showMarketOpenStatusPropertyChanged)}destroy(){this._marketStatus.destroy(),this._sessionEdge.destroy(),this._model=null,l.showMarketOpenStatusProperty.unsubscribeAll(this),super.destroy()}setModel(e){if(this._marketStatus.destroy(),this._sessionEdge.destroy(),this._expiredStatus?.destroy(),null===e)return this._marketStatus=new o.WatchedValue(null).spawn(),this._sessionEdge=new o.WatchedValue(null).spawn(),void(this._expiredStatus=null);this._model=e;const t=e.futuresContractExpirationTime();t&&(this._expiredStatus=t.expired().spawn(),this._expiredStatus.subscribe((e=>{e&&this._updateByStatus(this._marketStatus.value())}))),this._marketStatus=e.status().spawn(),this._marketStatus.subscribe(this._updateStatus.bind(this),{callWithLast:!0}),this._sessionEdge=e.nextSessionEdge().spawn(),this._sessionEdge.subscribe(this._updateTooltip.bind(this)),this._updateTooltip()}async _updateFullTooltip(){const e=this.status().value();if(null===e)return void this._fullTooltip.setValue(null);const t=[],s=n.marketStatusDescription.get(e);s&&t.push((0,i.htmlEscape)(s));const o=this._marketStatus.value();if(null!==this._model&&null!==o&&"expired"!==o&&"delisted"!==o){const s=this._model.nextSessionEdge().value();null!==s&&t.push({text:n.countdownFnMap[e](s),bold:!0})}this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:t,size:this._size,action:this._getAction(e)}])}_shouldBeHiddenByStatus(e){return!this._ignoreHideStatusSettings&&!l.showMarketOpenStatusProperty.value()&&"market"===e}_updateStatus(e){this._status.setValue(e)}_updateTooltip(){this._updateFullTooltip()}_showMarketOpenStatusPropertyChanged(){this._updateByStatus(this._status.value())}}},786220:(e,t,s)=>{"use strict";s.d(t,{StatusViewModel:()=>a});var i=s(820028),o=s(927301),l=s(199241);class a{constructor(e){
this.isBlinkingMode=new i.WatchedValue(!1),this._status=new i.WatchedValue(null),this._fullTooltip=new i.WatchedValue(null),this._iconClassNames=new i.WatchedValue(null),this._visible=new i.WatchedValue(!1),this._destroyed=!1,this._tooltip=new i.WatchedValue(null),this._icon=new i.WatchedValue(null),this._className=new i.WatchedValue(null),this._customColor=new i.WatchedValue(null),this._infoMaps=e,this._size=e.size||"small",this._status.subscribe(this._updateByStatus.bind(this),{callWithLast:!0})}destroy(){this._destroyed=!0}turnOffBlinkingMode(){}status(){return this._status}tooltip(){return this._tooltip}icon(){return this._icon}className(){return this._className}visible(){return this._visible}size(){return this._size}fullInfo(){return this._fullTooltip}customColor(){return this._customColor}_getTooltip(e){return this._infoMaps.tooltipMap?.get(e)??null}_getIcon(e){let t;const s=this._infoMaps.iconMap.get(e);return void 0!==s&&(t=s.get(this._size)),t||null}_getClassName(e){return this._infoMaps.classNameMap.get(e)||null}_getFullTooltipIconClassNames(e){const t=this._getClassName(e);return t?[l.statusItem,t]:[]}_getTitle(e){return this._infoMaps.titleMap?.get(e)??null}_getTitleColor(e){return this._infoMaps.titleColorMap?.get(e)??null}_getAction(e){return this._infoMaps.actionMap?.get(e)??null}_getHTML(e){return this._infoMaps.htmlMap?.get(e)?.map(o.htmlEscape)??[]}async _updateFullTooltip(){const e=this._status.value();null!==e?this._fullTooltip.setValue([{icon:this._getIcon(e),iconClassName:this._getFullTooltipIconClassNames(e),title:this._getTitle(e),titleColor:this._getTitleColor(e),html:this._getHTML(e),size:this._size,action:this._getAction(e)}]):this._fullTooltip.setValue(null)}_updateByStatus(e){if(null===e||this._shouldBeHiddenByStatus(e))return this._icon.setValue(null),this._tooltip.setValue(null),void this._visible.setValue(!1);this._icon.setValue(this._getIcon(e)),this._className.setValue(this._getClassName(e)),this._tooltip.setValue(this._getTooltip(e)),this._visible.setValue(!0),this._updateFullTooltip()}_shouldBeHiddenByStatus(e){return!1}}},479443:(e,t,s)=>{"use strict";s.d(t,{trackingModeIsAvailable:()=>i});const i=s(638456).CheckMobile.any()},203723:(e,t,s)=>{"use strict";s.d(t,{financialPeriodToShortString:()=>a,financialPeriodToString:()=>l});var i=s(650151),o=s(444372);function l(e){switch(e){case"FQ":return o.t(null,void 0,s(934673));case"FY":return o.t(null,void 0,s(984847));case"FH":return o.t(null,void 0,s(228727));case"TTM":return o.t(null,void 0,s(284634))}(0,i.ensureNever)(e)}function a(e){switch(e){case"FQ":return o.t(null,void 0,s(505581));case"FY":return o.t(null,void 0,s(560729));case"FH":return o.t(null,void 0,s(422740));case"TTM":return o.t(null,void 0,s(284634))}(0,i.ensureNever)(e)}},271587:(e,t,s)=>{"use strict";s.d(t,{getSymbolSearchCompleteOverrideFunction:()=>o});let i=(e,t)=>Promise.resolve({symbol:e,name:e});function o(){return i}},787540:(e,t,s)=>{"use strict";s.d(t,{getTwemojiUrl:()=>o});var i=s(818438);function o(e,t){let s=""
;return i.default.parse(e,(e=>(s=i.default.base+("svg"===t?`svg/${e}.svg`:`72x72/${e}.png`),!1))),s}i.default.base="https://cdnjs.cloudflare.com/ajax/libs/twemoji/13.0.1/"},602948:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M3.92 7.83 9 12.29l5.08-4.46-1-1.13L9 10.29l-4.09-3.6-.99 1.14Z"/></svg>'},689612:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.83 3.92 12.28 9l-4.45 5.08-1.13-1L10.29 9l-3.6-4.09 1.14-.99Z"/></svg>'},23317:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M14 10H4V8.5h10V10Z"/></svg>'},577576:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M8.25 13.75v-9.5h1.5v9.5h-1.5Z"/><path fill="currentColor" d="M13.75 9.75h-9.5v-1.5h9.5v1.5Z"/></svg>'},964146:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M14.5 8V3.5H10V2h6v6h-1.5Zm-11 2v4.5H8V16H2v-6h1.5Z"/></svg>'},776996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M11.5 2v4.5H16V8h-6V2h1.5Zm-5 14v-4.5H2V10h6v6H6.5Z"/></svg>'},678529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.45 3.5 12.48 9l-5.03 5.49 1.1 1.01L14.52 9 8.55 2.49 7.45 3.5Z"/><path fill="currentColor" d="m3.93 5.99 2.58 3-2.58 3.02 1.14.98 3.42-4-3.42-3.98L3.93 6Z"/></svg>'},593724:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10 6.38V8L6 5.5 10 3v1.85A5.25 5.25 0 1 1 3.75 10a.75.75 0 0 1 1.5 0A3.75 3.75 0 1 0 10 6.38Z"/></svg>'},460925:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12 4h3v1h-1.04l-.88 9.64a1.5 1.5 0 0 1-1.5 1.36H6.42a1.5 1.5 0 0 1-1.5-1.36L4.05 5H3V4h3v-.5C6 2.67 6.67 2 7.5 2h3c.83 0 1.5.67 1.5 1.5V4ZM7.5 3a.5.5 0 0 0-.5.5V4h4v-.5a.5.5 0 0 0-.5-.5h-3ZM5.05 5l.87 9.55a.5.5 0 0 0 .5.45h5.17a.5.5 0 0 0 .5-.45L12.94 5h-7.9Z"/></svg>'},94196:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M10.31 4.13 8.3 6.14a.5.5 0 1 1-.7-.7l2.13-2.12a3.5 3.5 0 1 1 4.95 4.95l-2.11 2.11a.51.51 0 1 1-.73-.72l2-2a2.5 2.5 0 0 0-3.53-3.53Zm-2.14 9.3 2.01-2a.5.5 0 0 1 .7.69l-2.13 2.12A3.5 3.5 0 0 1 3.8 9.29l2.11-2.11a.51.51 0 0 1 .72.72l-2 2a2.5 2.5 0 0 0 3.54 3.54ZM11 7.02a.49.49 0 0 0-.69 0L7.47 9.87a.49.49 0 0 0 .68.69l2.86-2.86a.49.49 0 0 0 0-.7Z"/></svg>'},861814:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M15.08 5.75a5.07 5.07 0 0 1 7.17 7.17l-3.23 3.23-.7-.7 3.22-3.24a4.07 4.07 0 1 0-5.75-5.75l-3.23 3.23-.7-.71 3.22-3.23Zm-9.33 9.33a5.07 5.07 0 1 0 7.17 7.17l3.23-3.23-.7-.7-3.24 3.22a4.07 4.07 0 1 1-5.75-5.75l3.23-3.23-.71-.7-3.23 3.22Zm10.77-4.3-5.74 5.74.7.7 5.75-5.74-.71-.7Z"/></svg>'},669058:e=>{e.exports='<svg viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="m12 4 3 4-6 6-6-6 3-4zm-3 7.879 4.02-4.02L11.25 5.5H9z"/></svg>'},207755:e=>{e.exports='<svg viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" d="m19 6 5 6-10 10L4 12l5-6zm-5 2v11.172l7.294-7.295L18.064 8z"/></svg>'},79304:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 2.5c-1.06 0-1.88.93-1.75 1.98l.63 5.03a1.13 1.13 0 0 0 2.25 0l.62-5.03A1.77 1.77 0 0 0 9 2.5zm0 10a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg>'},838373:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>'},986365:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M6 8a1 1 0 0 0 0 2h.23c.35 0 .69-.15.92-.42L7.67 9l-.52-.58A1.23 1.23 0 0 0 6.23 8H6Zm3-.51-.35-.4-.75.66.75-.66C8.04 6.4 7.15 6 6.23 6H6a3 3 0 0 0 0 6h.23c.93 0 1.8-.4 2.42-1.1l.35-.39.35.4.75-.66-.75.66c.61.7 1.5 1.09 2.42 1.09H12a3 3 0 1 0 0-6h-.23c-.93 0-1.8.4-2.42 1.1L9 7.48ZM10.33 9l.52.58c.23.27.57.42.92.42H12a1 1 0 1 0 0-2h-.23c-.35 0-.69.15-.92.42l-.52.58Z"/></svg>'},378849:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M9 12a2 2 0 1 0 0 4h.27c.66 0 1.29-.29 1.72-.8l1.03-1.2L11 12.8c-.43-.51-1.06-.8-1.72-.8H9Zm5-.3-.73-.86a5.27 5.27 0 0 0-4-1.84H9a5 5 0 0 0 0 10h.27c1.53 0 3-.67 4-1.84l.73-.86.73.86a5.27 5.27 0 0 0 4 1.84H19a5 5 0 0 0 0-10h-.27c-1.53 0-3 .67-4 1.84l-.73.86Zm1.98 2.3L17 15.2c.43.51 1.06.8 1.72.8H19a2 2 0 1 0 0-4h-.27c-.66 0-1.29.29-1.72.8L15.98 14Z"/></svg>'},189771:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M6 3.5h1.5V5h3V3.5H12V5h1a1 1 0 0 1 1 1v1H4V6a1 1 0 0 1 1-1h1V3.5ZM14 8.5H4V13a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8.5Z"/></svg>'},441614:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M9 5h2v2h6V5h2v2h1.5c.83 0 1.5.67 1.5 1.5V10H6V8.5C6 7.67 6.67 7 7.5 7H9V5ZM22 12H6v8.5c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5V12Z"/></svg>'},931233:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.57 14.8H5.03V3.36c1.62-.05 2.64-.08 3.06-.08 1.66 0 2.98.49 3.96 1.47a5.23 5.23 0 0 1 1.47 3.88c0 4.11-1.99 6.17-5.95 6.17zm-.5-9.66v7.8c.32.04.67.06 1.05.06 1.03 0 1.83-.38 2.41-1.12.58-.75.88-1.79.88-3.13 0-2.44-1.14-3.67-3.42-3.67-.22 0-.53.02-.93.06z"/></svg>'},512646:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.84 13.7H5.78V4.4l2.48-.06c1.35 0 2.42.4 3.22 1.2.8.78 1.19 1.83 1.19 3.15 0 3.34-1.61 5.01-4.83 5.01zm-.41-7.85v6.35c.26.02.55.03.86.03.83 0 1.48-.3 1.95-.9.48-.6.72-1.46.72-2.54 0-2-.93-2.99-2.78-2.99-.18 0-.43.02-.75.05z"/></svg>'},492315:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9 14A5 5 0 1 0 9 4a5 5 0 0 0 0 10Zm3-4H6V8h6v2Z"/></svg>'},469410:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.65 5.16v2.68h3.78v1.73H7.65V13h5.19v1.8H5.62V3.35h7.3v1.8H7.65z"/></svg>'},55593:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.9 5.87v2.17h3.07v1.4H7.9v2.8h4.22v1.46H6.25V4.4h5.94v1.47H7.9z"/></svg>'},856539:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.2 7.34c0-1.4.73-2.64 1.82-3.34A5.03 5.03 0 0 0 4 9c0 2.76 2.26 5 5.05 5A5.04 5.04 0 0 0 14 10c-.71.8-1.74 1.29-2.89 1.29A3.93 3.93 0 0 1 7.2 7.34Z"/><path fill="currentColor" d="M11.67 6.33 11 5l-.67 1.33-1.33.2.98 1.03L9.76 9 11 8.34l1.24.66-.22-1.44.98-1.03-1.33-.2Z"/></svg>'},323683:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7.2 7.34c0-1.4.73-2.64 1.82-3.34A5.03 5.03 0 0 0 4 9c0 2.76 2.26 5 5.05 5A5.04 5.04 0 0 0 14 10c-.71.8-1.74 1.29-2.89 1.29A3.93 3.93 0 0 1 7.2 7.34Z"/><path fill="currentColor" d="M11.67 6.33 11 5l-.67 1.33-1.33.2.98 1.03L9.76 9 11 8.34l1.24.66-.22-1.44.98-1.03-1.33-.2Z"/></svg>'},672844:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M11 11.39c0-2.27 1.19-4.25 3-5.39-4.43.07-8 3.63-8 8 0 4.42 3.64 8 8.13 8A8.1 8.1 0 0 0 22 16a6.55 6.55 0 0 1-11-4.61Z"/><path fill="currentColor" d="m18 10-1-2-1 2-2 .3 1.47 1.54-.32 2.16L17 13l1.85 1-.32-2.16L20 10.29 18 10Z"/></svg>'},991665:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M14.48 5.1c-.52 2.03-1.46 3.04-2.82 3.04-.64 0-1.55-.19-2.74-.56-1.17-.38-1.99-.57-2.46-.57-.69 0-1.22.37-1.58 1.13H3.55A4.3 4.3 0 0 1 4.5 6c.5-.6 1.08-.9 1.74-.9.7 0 1.65.2 2.84.58 1.2.37 2.04.55 2.52.55.8 0 1.32-.37 1.59-1.13h1.29zm0 4.84c-.52 2.02-1.46 3.03-2.82 3.03-.64 0-1.55-.19-2.74-.56-1.17-.38-1.99-.57-2.46-.57-.69 0-1.22.38-1.58 1.13H3.55a4.3 4.3 0 0 1 .95-2.14c.5-.6 1.08-.9 1.74-.9.7 0 1.65.2 2.84.58 1.2.37 2.04.56 2.52.56.8 0 1.32-.38 1.59-1.13h1.29z"/></svg>'},552828:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M13.4 5.9c-.41 1.62-1.16 2.43-2.25 2.43-.52 0-1.25-.15-2.2-.45-.93-.3-1.58-.45-1.96-.45-.55 0-.98.3-1.27.9H4.66c.1-.67.36-1.24.76-1.71.4-.48.86-.72 1.4-.72.56 0 1.31.16 2.27.46.95.3 1.62.45 2.01.45.64 0 1.06-.3 1.27-.9h1.03zm0 3.87c-.41 1.62-1.16 2.43-2.25 2.43-.52 0-1.25-.15-2.2-.45-.93-.3-1.58-.46-1.96-.46-.55 0-.98.3-1.27.9H4.66c.1-.67.36-1.24.76-1.7.4-.48.86-.72 1.4-.72.56 0 1.31.15 2.27.46.95.3 1.62.44 2.01.44.64 0 1.06-.3 1.27-.9h1.03z"/></svg>'},839379:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M4 6.5 6 8l3-3 3 3 2-1.5V10H4V6.5ZM14 13v-2H4v2h10Z"/></svg>'},74733:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M13 12.78V5.22a.3.3 0 0 0-.51-.2L8.7 8.78a.3.3 0 0 0 0 .42L12.5 13a.3.3 0 0 0 .51-.21zM8 12.78V5.22a.3.3 0 0 0-.51-.2L3.7 8.78a.3.3 0 0 0 0 .42L7.5 13a.3.3 0 0 0 .51-.21z"/></svg>'},319703:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9 2.05c.37 0 .67.3.67.67v.88l.64-.33a.67.67 0 0 1 .61 1.19l-1.25.64v1.12c.58.14 1.1.46 1.48.89l1.18-.67V5c0-.36.3-.66.67-.65.37 0 .67.3.67.66v.68l.72-.4a.67.67 0 1 1 .65 1.15l-.72.42.6.37c.3.2.4.6.2.92-.2.3-.61.4-.92.2L13 7.6l-1.22.7a2.8 2.8 0 0 1-.04 1.48l1.27.7 1.18-.77c.31-.2.73-.12.93.19.2.3.11.72-.2.92l-.6.39.72.4a.67.67 0 0 1-.65 1.17l-.72-.4V13a.67.67 0 0 1-1.34 0v-1.38l-1.26-.7c-.38.38-.86.66-1.4.8v1.18l1.25.64a.67.67 0 1 1-.6 1.19l-.65-.33v.88a.67.67 0 0 1-1.34 0v-.88l-.64.33a.67.67 0 1 1-.61-1.19l1.25-.64V11.7a2.86 2.86 0 0 1-1.4-.8l-1.26.7v1.4c0 .36-.3.66-.67.65a.67.67 0 0 1-.67-.66v-.64l-.7.39a.68.68 0 0 1-.92-.26.66.66 0 0 1 .26-.9l.7-.4-.59-.38a.66.66 0 0 1-.2-.92c.2-.3.62-.4.93-.2l1.18.78 1.27-.7a2.8 2.8 0 0 1-.04-1.47L4.97 7.6l-1.2.75c-.3.2-.72.1-.92-.2-.2-.31-.1-.72.21-.92l.6-.38-.7-.4a.66.66 0 0 1-.24-.9c.18-.32.6-.43.91-.25l.7.4V5a.67.67 0 0 1 1.34 0v1.45l1.17.67c.38-.44.9-.76 1.5-.9V5.1l-1.26-.64a.67.67 0 0 1 .61-1.19l.64.33v-.88c0-.37.3-.67.67-.67Zm0 8.4a1.5 1.5 0 0 0 1.52-1.48c0-.81-.66-1.5-1.52-1.5a1.5 1.5 0 0 0-1.52 1.5c0 .8.66 1.49 1.52 1.49Z"/></svg>'},494417:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M8 4.75H6.66c-.37 0-.59.27-.59.5v.95c0 1.16-.67 2.15-1.54 2.8a3.59 3.59 0 0 1 1.54 2.8v.95c0 .23.22.5.6.5H8v1.5H6.66c-1.1 0-2.09-.85-2.09-2v-.95c0-.72-.6-1.51-1.49-1.93l-.2-.1a.85.85 0 0 1 0-1.54l.2-.1c.9-.42 1.5-1.21 1.5-1.93v-.95c0-1.15.98-2 2.08-2H8v1.5ZM10 4.75h1.34c.37 0 .59.27.59.5v.95c0 1.16.67 2.15 1.54 2.8a3.59 3.59 0 0 0-1.54 2.8v.95c0 .23-.22.5-.6.5H10v1.5h1.34c1.1 0 2.09-.85 2.09-2v-.95c0-.72.6-1.51 1.49-1.93l.2-.1a.85.85 0 0 0 0-1.54l-.2-.1c-.9-.42-1.5-1.21-1.5-1.93v-.95c0-1.15-.98-2-2.08-2H10v1.5Z"/></svg>'},225128:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M12.34 6.99a2 2 0 1 0-2.72-1.57l-3.76 2.2-.23-.16a2 2 0 1 0 .23 3.31l3.72 2.15a2 2 0 1 0 2.74-1.58L12.34 7ZM6.6 9.47l3.72 2.15a2 2 0 0 1 .49-.28l.02-4.36a2.03 2.03 0 0 1-.47-.27l-3.76 2.2a2 2 0 0 1 0 .56Z"/></svg>'},930545:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M19 10.66a3.5 3.5 0 1 0-4.94-2.52L8.3 11.5a3.5 3.5 0 1 0 .72 5.42l5.04 2.94A3.5 3.5 0 1 0 19 17.34v-6.68Zm-9.06 4.48 5.03 2.94A3.5 3.5 0 0 1 17 17.04v-6.08a3.5 3.5 0 0 1-2.03-1.04l-5.3 3.1a3.49 3.49 0 0 1 .27 2.12Z"/></svg>'},257979:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9 3.9a5.13 5.13 0 0 0-4.89 3.63l-1.33-.41A6.53 6.53 0 0 1 9 2.5a6.52 6.52 0 0 1 6.18 4.47l.77-.99 1.1.87-1.7 2.17-.34.43-.5-.21-2.57-1.11.55-1.29 1.36.59A5.13 5.13 0 0 0 9 3.9ZM2.93 8.66l.46.13 2.58.7-.37 1.35-1.52-.41a5.12 5.12 0 0 0 9.8.1l1.35.4a6.52 6.52 0 0 1-12.4.2l-.77 1.06-1.13-.83 1.71-2.31.29-.39Z"/></svg>'},302588:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M9 4.6c-1.94 0-3.6 1.3-4.14 3.08l-1.34-.41a5.75 5.75 0 0 1 10.87-.3l.56-.72 1.1.87L14.58 9l-.34.42-.5-.21-2.23-.96.55-1.29.99.42A4.35 4.35 0 0 0 9 4.6ZM3.7 8.53l.46.12 2.24.61-.37 1.35-1.15-.31a4.34 4.34 0 0 0 8.27-.08l1.34.41a5.74 5.74 0 0 1-10.86.35l-.57.76-1.12-.83 1.48-2 .28-.38Z"/></svg>'},366493:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.5 20L11 14.5 16.5 9"/></svg>'},379978:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 5l3.5 3.5L8 12"/></svg>'},841674:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><g class="normal-eye"><path fill="currentColor" fill-rule="evenodd" d="M12 18c-3.07 0-6.21-1.95-7.92-6C5.78 7.95 8.93 6 12 6c3.08 0 6.22 1.95 7.92 6-1.7 4.05-4.84 6-7.92 6Zm8.93-6.19C19.1 7.31 15.59 5 12 5S4.9 7.32 3.08 11.8L3 12l.08.19C4.89 16.68 8.4 19 12 19c3.6 0 7.11-2.32 8.93-6.81l.07-.2-.07-.18ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></g><g class="crossed-eye"><path fill="currentColor" d="M12 19a8.47 8.47 0 0 1-3.87-.95l.75-.75c1 .47 2.07.7 3.12.7 3.08 0 6.22-1.95 7.92-6a11.18 11.18 0 0 0-2.25-3.49l.7-.7a12.28 12.28 0 0 1 2.56 4L21 12l-.07.19C19.1 16.68 15.59 19 12 19Zm-7.92-7c.6 1.42 1.37 2.58 2.26 3.49l-.7.7a12.28 12.28 0 0 1-2.56-4l-.08-.2.08-.18C4.89 7.31 8.4 5 12 5c1.33 0 2.65.32 3.88.94l-.75.75A7.45 7.45 0 0 0 12 6C8.93 6 5.8 7.96 4.08 12ZM12 15a3 3 0 0 1-.73-.09l.92-.92a2 2 0 0 0 1.8-1.8l.92-.92A3 3 0 0 1 12 15Zm-2.91-2.27.92-.91A2 2 0 0 1 11.8 10l.92-.92a3 3 0 0 0-3.64 3.64Zm9.08-7.66-13.1 13.1.77.76 13.09-13.1-.76-.76Z"/></g><g fill="none" class="loading-eye"><path stroke="currentColor" d="M20.46 12c-3.5 8.67-13.42 8.67-16.92 0 3.5-8.67 13.42-8.67 16.92 0Z"/></g><g fill="none" class="animated-loading-eye"><path stroke="currentColor" d="M14.5 12a2.5 2.5 0 1 0-2.5 2.5"/></g></svg>'},754336:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><g class="normal-eye"><path fill="currentColor" fill-rule="evenodd" d="M12 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/><path fill="currentColor" d="M16.91 8.8C15.31 4.99 12.18 3 9 3 5.82 3 2.7 4.98 1.08 8.8L1 9l.08.2C2.7 13.02 5.82 15 9 15c3.18 0 6.3-1.97 7.91-5.8L17 9l-.09-.2ZM9 14c-2.69 0-5.42-1.63-6.91-5 1.49-3.37 4.22-5 6.9-5 2.7 0 5.43 1.63 6.92 5-1.5 3.37-4.23 5-6.91 5Z"/></g><g class="crossed-eye"><path fill="currentColor" d="M3.7 15 15 3.7l-.7-.7L3 14.3l.7.7ZM9 3c1.09 0 2.17.23 3.19.7l-.77.76C10.64 4.16 9.82 4 9 4 6.31 4 3.58 5.63 2.08 9a9.35 9.35 0 0 0 1.93 2.87l-.7.7A10.44 10.44 0 0 1 1.08 9.2L1 9l.08-.2C2.69 4.99 5.82 3 9 3Z"/><path fill="currentColor" d="M9 6a3 3 0 0 1 .78.1l-.9.9A2 2 0 0 0 7 8.87l-.9.9A3 3 0 0 1 9 6ZM11.9 8.22l-.9.9A2 2 0 0 1 9.13 11l-.9.9a3 3 0 0 0 3.67-3.68Z"/><path fill="currentColor" d="M9 14c-.82 0-1.64-.15-2.43-.45l-.76.76c1.02.46 2.1.7 3.19.7 3.18 0 6.31-1.98 7.92-5.81L17 9l-.08-.2a10.44 10.44 0 0 0-2.23-3.37l-.7.7c.75.76 1.41 1.71 1.93 2.87-1.5 3.37-4.23 5-6.92 5Z"/></g><g fill="none" class="loading-eye"><path stroke="currentColor" d="M16.45 9c-3.08 7.33-11.82 7.33-14.9 0 3.08-7.33 11.82-7.33 14.9 0Z"/></g><g fill="none" class="animated-loading-eye"><path stroke="currentColor" d="M11.5 9A2.5 2.5 0 1 0 9 11.5"/></g></svg>'},645534:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M5.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3ZM3 12.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3ZM10 12.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3ZM17 12.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0Z"/></svg>'},387258:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="M3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6-1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm7-2a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>'},736885:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M8.54.84a.8.8 0 0 1 .92 0l7.5 5.25a.8.8 0 0 1 0 1.32l-7.5 5.25a.8.8 0 0 1-.92 0L1.04 7.4a.8.8 0 0 1 0-1.32L8.54.84zM2.9 6.75L9 11.02l6.1-4.27L9 2.48 2.9 6.75z"/><path fill="currentColor" d="M.84 10.8a.8.8 0 0 1 1.12-.2L9 15.51l7.04-4.93a.8.8 0 0 1 .92 1.32l-7.5 5.25a.8.8 0 0 1-.92 0l-7.5-5.25a.8.8 0 0 1-.2-1.12z"/></svg>'},65300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M7.23 2.58a.5.5 0 0 1 .54 0l5.5 3.5a.5.5 0 0 1 0 .84l-5.5 3.5a.5.5 0 0 1-.54 0l-5.5-3.5a.5.5 0 0 1 0-.84l5.5-3.5zM2.93 6.5L7.5 9.4l4.57-2.9L7.5 3.6 2.93 6.5z"/><path fill="currentColor" d="M1.58 9.23a.5.5 0 0 1 .69-.15L7.5 12.4l5.23-3.33a.5.5 0 0 1 .54.84l-5.5 3.5a.5.5 0 0 1-.54 0l-5.5-3.5a.5.5 0 0 1-.15-.69z"/></svg>'},337073:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M6 7.5A2.5 2.5 0 0 1 8.5 5H10v1H8.5C7.67 6 7 6.67 7 7.5v1.15a3.5 3.5 0 0 1-1.93 3.13l-.45.22.45.22A3.5 3.5 0 0 1 7 15.35v1.15c0 .83.67 1.5 1.5 1.5H10v1H8.5A2.5 2.5 0 0 1 6 16.5v-1.15a2.5 2.5 0 0 0-1.38-2.23l-1.34-.67a.5.5 0 0 1 0-.9l1.34-.67A2.5 2.5 0 0 0 6 8.65V7.5ZM15.5 6H14V5h1.5A2.5 2.5 0 0 1 18 7.5v1.15c0 .94.54 1.8 1.38 2.23l1.34.67a.5.5 0 0 1 0 .9l-1.34.67A2.5 2.5 0 0 0 18 15.35v1.15a2.5 2.5 0 0 1-2.5 2.5H14v-1h1.5c.83 0 1.5-.67 1.5-1.5v-1.15a3.5 3.5 0 0 1 1.93-3.13l.45-.22-.45-.22A3.5 3.5 0 0 1 17 8.65V7.5c0-.83-.67-1.5-1.5-1.5Z"/></svg>'},34882:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M7 14H5.5A1.5 1.5 0 0 1 4 12.5v-1A2.9 2.9 0 0 0 2.66 9l.18-.13A2.9 2.9 0 0 0 4 6.5V5.5C4 4.67 4.67 4 5.5 4H7V3H5.5A2.5 2.5 0 0 0 3 5.5V6.5a1.9 1.9 0 0 1-.77 1.58c-.42.32-.84.43-.85.44C1.3 8.54 1 8.65 1 9s.3.46.38.48c0 0 .43.12.85.44.4.3.77.8.77 1.58v1A2.5 2.5 0 0 0 5.5 15H7v-1Zm4-10h1.5c.83 0 1.5.67 1.5 1.5v1A2.9 2.9 0 0 0 15.34 9l-.18.13A2.9 2.9 0 0 0 14 11.5V12.5c0 .83-.67 1.5-1.5 1.5H11v1h1.5a2.5 2.5 0 0 0 2.5-2.5V11.5c0-.79.38-1.27.77-1.58.42-.32.84-.43.85-.44.08-.02.38-.13.38-.48s-.3-.46-.38-.48c0 0-.43-.12-.85-.44-.4-.3-.77-.8-.77-1.58v-1A2.5 2.5 0 0 0 12.5 3H11v1Z"/></svg>'},236791:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" fill-rule="evenodd" d="m5.12 12 3-6h7.76l3 6-3 6H8.12l-3-6ZM7.5 5h9l3.5 7-3.5 7h-9L4 12l3.5-7Zm6.5 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>'},583637:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" fill-rule="evenodd" d="m3.1 9 2.28-5h7.24l2.28 5-2.28 5H5.38L3.1 9Zm1.63-6h8.54L16 9l-2.73 6H4.73L2 9l2.73-6Zm5.77 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm1 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"/></svg>'},591104:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M10.5 6a.5.5 0 0 0-.5.5V7h4v-.5a.5.5 0 0 0-.5-.5h-3ZM15 7h3v1h-1.04l-.88 9.64a1.5 1.5 0 0 1-1.5 1.36H9.42a1.5 1.5 0 0 1-1.5-1.36L7.05 8H6V7h3v-.5c0-.83.67-1.5 1.5-1.5h3c.83 0 1.5.67 1.5 1.5V7ZM8.05 8l.87 9.55a.5.5 0 0 0 .5.45h5.17a.5.5 0 0 0 .5-.45L15.94 8h-7.9Z"/></svg>'},671402:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15" fill="none"><path stroke="currentColor" d="M11 2 7.5 5 4 2" class="bracket-up"/><path stroke="currentColor" d="M4 13l3.5-3 3.5 3" class="bracket-down"/></svg>'},520465:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="M20.53 3.73 14 9.33 7.47 3.73M7.47 24.27l6.53 -5.60 6.53 5.60"/></svg>'},648344:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M14 7v12.93l5.18-4.31.64.76-6.32 5.27-6.32-5.27.64-.76L13 19.93V7h1z"/></svg>'},99539:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M19.32 6H8.68A2.68 2.68 0 0 0 6 8.68V11h1V8.68C7 7.75 7.75 7 8.68 7h10.64c.93 0 1.68.75 1.68 1.68V11h1V8.68C22 7.2 20.8 6 19.32 6zM7 19.32c0 .93.75 1.68 1.68 1.68h10.64c.93 0 1.68-.75 1.68-1.68V17h1v2.32C22 20.8 20.8 22 19.32 22H8.68A2.68 2.68 0 0 1 6 19.32V17h1v2.32z"/></svg>'},334763:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="m7.47 9.33 6.53 -5.60L20.53 9.33M20.53 18.67l-6.53 5.60L7.47 18.67"/></svg>'},430426:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M18 7h5v1h-2.01l-1.33 14.64a1.5 1.5 0 0 1-1.5 1.36H9.84a1.5 1.5 0 0 1-1.49-1.36L7.01 8H5V7h5V6c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v1Zm-6-2a1 1 0 0 0-1 1v1h6V6a1 1 0 0 0-1-1h-4ZM8.02 8l1.32 14.54a.5.5 0 0 0 .5.46h8.33a.5.5 0 0 0 .5-.46L19.99 8H8.02Z"/></svg>'},472899:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M13.5 6.35l6.32 5.27-.64.76L14 8.07V21h-1V8.07l-5.18 4.31-.64-.76 6.32-5.27z"/></svg>'},682847:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><circle fill="currentColor" cx="12.75" cy="7.5" r="1.25"/><circle fill="currentColor" cx="7.5" cy="7.5" r="1.25"/><circle fill="currentColor" cx="2.25" cy="7.5" r="1.25"/></svg>'},756612:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M11.83 8.88l-.66-.76L8 10.9V3H7v7.9L3.83 8.12l-.66.76 4.33 3.78 4.33-3.78z"/></svg>'},279526:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15" fill="none"><path fill="currentColor" d="M4.5 12A1.5 1.5 0 0 1 3 10.5V9H2v1.5A2.5 2.5 0 0 0 4.5 13h6a2.5 2.5 0 0 0 2.5-2.5V9h-1v1.5c0 .83-.67 1.5-1.5 1.5h-6z" class="bracket-up"/><path fill="currentColor" d="M4.5 3C3.67 3 3 3.67 3 4.5V6H2V4.5A2.5 2.5 0 0 1 4.5 2h6A2.5 2.5 0 0 1 13 4.5V6h-1V4.5c0-.83-.67-1.5-1.5-1.5h-6z" class="bracket-down"/></svg>'},142930:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15" fill="none"><path stroke="currentColor" d="m4 5 3.5-3L11 5" class="bracket-up"/><path stroke="currentColor" d="M11 10l-3.5 3L4 10" class="bracket-down"/></svg>'},37896:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M6.5 2a.5.5 0 0 0-.5.5V3h3v-.5a.5.5 0 0 0-.5-.5h-2ZM10 3h3v1h-1.05l-.86 8.65A1.5 1.5 0 0 1 9.59 14H5.4a1.5 1.5 0 0 1-1.49-1.35L3.05 4H2V3h3v-.5C5 1.67 5.67 1 6.5 1h2c.83 0 1.5.67 1.5 1.5V3ZM4.05 4l.86 8.55a.5.5 0 0 0 .5.45H9.6a.5.5 0 0 0 .5-.45L10.94 4h-6.9Z"/></svg>'},981020:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M11.83 6.12l-.66.76L8 4.1V12H7V4.1L3.83 6.88l-.66-.76L7.5 2.34l4.33 3.78z"/></svg>'},763362:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M4.5 1h2v4H10L5.5 9 1 5h3.5zm7 12v4h2v-4H17l-4.5-4L8 13z"/></svg>'},818547:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M5.74 3h1.5v3H10L6.5 9 3 6h2.74zM10.74 15h1.5v-3H15l-3.5-3L8 12h2.74z"/></svg>'},339750:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M7 15l5 5L23 9"/></svg>'},333765:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="currentColor" d="M9.707 9l4.647-4.646-.707-.708L9 8.293 4.354 3.646l-.708.708L8.293 9l-4.647 4.646.708.708L9 9.707l4.646 4.647.708-.707L9.707 9z"/></svg>'},662920:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="currentColor" d="M2.4 5.46a.8.8 0 0 1 1.14-.05L8 9.42l4.46-4.01a.8.8 0 0 1 1.08 1.18L8 11.58 2.47 6.59a.8.8 0 0 1-.06-1.13z"/></svg>'},947036:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" width="15" height="15"><path fill="currentColor" d="M3.5 5.58c.24-.28.65-.3.92-.07L7.5 8.14l3.08-2.63a.65.65 0 1 1 .84.98L7.5 9.86 3.58 6.49a.65.65 0 0 1-.07-.91z"/></svg>'},542205:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 7" width="7" height="7"><path fill="currentColor" d="M3.5 7L7 4H4V0H3V4H0L3.5 7Z"/></svg>'},50119:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 7" width="9" height="7"><path fill="currentColor" d="M.5 3.5L4 0v3h5v1H4v3z"/></svg>'},24122:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentColor" d="M4 8a4 4 0 1 0 8 0 4 4 0 1 0-8 0"/></svg>'},676809:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M0 8a8 8 0 1 0 16 0A8 8 0 1 0 0 8zm2 0a6 6 0 1 0 12 0A6 6 0 1 0 2 8zm2 0a4 4 0 1 0 8 0 4 4 0 1 0-8 0"/></svg>'},904799:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 12" width="14" height="12" fill="currentColor" focusable="false" preserveAspectRatio="none"><path d="M14 12l-4-6 4-6H0v12z"/></svg>'},533699:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12" fill="none"><path fill="currentColor" d="M11.57 0H1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10.57a.5.5 0 0 0 .41-.78l-3.3-4.94a.5.5 0 0 1 0-.56l3.3-4.94a.5.5 0 0 0-.41-.78z"/></svg>'},362884:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 7" width="9" height="7"><path fill="currentColor" d="M8.5 3.5L5 0v3H0v1h5v3z"/></svg>'},250662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 7" width="7" height="7"><path fill="currentColor" d="M3.5 0L0 3h3v4h1V3h3L3.5 0z"/></svg>'}}]);