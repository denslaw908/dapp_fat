"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[94004],{850117:(e,t,s)=>{s.d(t,{CircularCacheBuffer:()=>r});var i=s(650151);function n(e){const{prevItem:t,nextItem:s}=e;null!==t&&(t.nextItem=s),null!==s&&(s.prevItem=t)}class r{constructor(e=0,t=1.3){this._cache=new Map,this._lastItem=null,this._firstItem=null,this._size=e,this._sizeLimited=e>0,this._capacityFactor=t}set(e,t){const s={key:e,value:t,prevItem:this._lastItem,nextItem:null};null!==this._lastItem&&(this._lastItem.nextItem=s);const i=this._cache.get(e);return void 0!==i&&(n(i),i===this._firstItem&&(this._firstItem=i.nextItem)),this._cache.set(e,s),this._lastItem=s,null===this._firstItem&&(this._firstItem=s),this._sizeLimited&&this._cache.size>this._size*this._capacityFactor&&this._removeExtraItems(),this}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);if(void 0===t)return t;if(t===this._firstItem&&(this._firstItem=t.nextItem??t),t!==this._lastItem){n(t);const e=(0,i.ensureNotNull)(this._lastItem);e.nextItem=t,t.prevItem=e,t.nextItem=null,this._lastItem=t}return t.value}clear(){this._cache.clear(),this._firstItem=null,this._lastItem=null}delete(e){const t=this._cache.get(e);return void 0!==t&&(n(t),t===this._lastItem&&(this._lastItem=t.prevItem),t===this._firstItem&&(this._firstItem=t.nextItem)),this._cache.delete(e)}*entries(){if(null!==this._firstItem)for(let e=this._firstItem;null!==e;e=e.nextItem)yield[e.key,e.value]}state(){const e=[];for(const[t,s]of this.entries())e.push([t,s]);return e}restoreState(e){for(const t of e)this.set(t[0],t[1])}_removeExtraItems(){const e=this._cache.size-this._size;let t=(0,i.ensureNotNull)(this._firstItem);for(let s=0;s<e;s+=1)this._cache.delete(t.key),t=(0,i.ensureNotNull)(t.nextItem);t.prevItem=null,this._firstItem=t}}},560770:(e,t,s)=>{var i,n;s.d(t,{HorizontalAlign:()=>i,VerticalAlign:()=>n}),function(e){e.Left="left",e.Right="right",e.Center="center"}(i||(i={})),function(e){e.Top="top",e.Bottom="bottom",e.Middle="middle"}(n||(n={}))},810715:(e,t,s)=>{s.d(t,{clone:()=>i.clone,isNumber:()=>i.isNumber,isObject:()=>i.isObject,merge:()=>i.merge});var i=s(536794)},20019:(e,t,s)=>{s.d(t,{ConflatedChunksBuilder:()=>a});var i=s(650151),n=s(660439);const r=[{barsToMerge:10,forBarspacingLargerThen:.03},{barsToMerge:30,forBarspacingLargerThen:.01},{barsToMerge:100,forBarspacingLargerThen:.003},{barsToMerge:500,forBarspacingLargerThen:0}];class a{constructor(e,t){this._plots=e,this._conflatedChunks={chunks:new Map,priceSource:null,priceSourcesProvider:t},this._clearConflatedChunks()}conflatedChunks(e,t){if(t!==this._conflatedChunks.priceSource){this._conflatedChunks.priceSource=t;const e=this._plots.first();e&&(this._clearConflatedChunks(),this._rebuildConflatedChunks(e))}const s=(0,i.ensureDefined)(r.find((t=>t.forBarspacingLargerThen<=e)));return(0,i.ensureDefined)(this._conflatedChunks.chunks.get(s.barsToMerge))}mergeData(e){const t=this._plots.size(),s=this._plots.merge(e)
;return s&&null!==this._conflatedChunks.priceSource&&(t===this._plots.size()&&s.index===this._plots.lastIndex()?this._updateLatestChunks():this._rebuildConflatedChunks(s)),s}moveData(e){this._plots.move(e),this._plots.size()>0&&this._clearConflatedChunks()}clearData(){this._plots.clear(),this._clearConflatedChunks()}_rebuildConflatedChunks(e){const t=this._conflatedChunks.priceSource;if(null===t)return;const s=e.index,a=this._conflatedChunks.priceSourcesProvider(t),o=(e,t,s)=>{let i=null;for(const n of e){const e=a(n.value);i&&n.index-i.startTime>=s.barsToMerge&&(t.push(i),i=null),i?(i.endTime=n.index,i.high=Math.max(i.high,e),i.low=Math.min(i.low,e),i.close=e):i={startTime:n.index,endTime:n.index,open:e,high:e,low:e,close:e}}i&&t.push(i)};r.forEach((e=>{const t=(0,i.ensureDefined)(this._conflatedChunks.chunks.get(e.barsToMerge)),r=(0,n.lowerbound)(t,s,((e,t)=>e.endTime<t));if(0===r&&t.length>0){const s=t[0].startTime-1,n=(0,i.ensureNotNull)(this._plots.firstIndex()),r=this._plots.rangeIterator(n,s),a=[];o(r,a,e);const l=a.concat(t);this._conflatedChunks.chunks.set(e.barsToMerge,l)}else{const s=(0,i.ensureNotNull)(this._plots.lastIndex());t.splice(r);let n=(0,i.ensureNotNull)(this._plots.firstIndex());t.length&&(n=t[t.length-1].endTime+1);const a=this._plots.rangeIterator(n,s);o(a,t,e)}}))}_updateLatestChunks(){const e=(0,i.ensureNotNull)(this._plots.last()),t=this._conflatedChunks.priceSourcesProvider("close");r.forEach((s=>{const n=(0,i.ensureDefined)(this._conflatedChunks.chunks.get(s.barsToMerge)),r=t(e.value),a=n[n.length-1];a.high=Math.max(a.high,r),a.low=Math.min(a.low,r),a.close=r,a.endTime=e.index}))}_clearConflatedChunks(){r.forEach((e=>this._conflatedChunks.chunks.set(e.barsToMerge,[])))}}},890390:(e,t,s)=>{s.d(t,{DefaultProperty:()=>E,allowSavingDefaults:()=>V,cleanUpStateKeys:()=>M,createDefaultsState:()=>S,extractAllPropertiesKeys:()=>I,extractState:()=>B,extractThemedColors:()=>N});var i=s(154834),n=s(998034),r=s(936714),a=s(954029),o=s(219780),l=s(352315),u=s(650279),c=s(715943),h=s(182433),d=s(283873),m=s(650151),f=s(724377),p=s(735566),_=s(423783),g=s(61499),y=s(331633),v=s(518594),T=s(547465),D=s(690370),x=s(85858),b=s(905520);const k=(0,p.getLogger)("ThemedDefaults");function w(e){return e.value()===g.StdTheme.Dark?g.StdTheme.Dark:g.StdTheme.Light}function M(e,t,s){for(const i of t)if((0,r.default)(e,i),s){const t=i.split(".");for(t.pop();t.length;){const s=(0,a.default)(e,t);if(!(0,h.default)(s)||0!==Object.keys(s).length)break;(0,r.default)(e,t),t.pop()}}}function S(e,t,s,r){const a=e?x.defaults:x.factoryDefaults,o=t.startsWith("study_")?(0,i.default)(a("study")):{};let l=(0,i.default)(a(t,r));return t.startsWith("study_")&&l.inputs&&delete l.inputs.symbol,"linetoolicon"===t&&e&&(l.icon=(0,x.defaults)(t).icon),"linetooemoji"===t&&e&&(l.emoji=(0,x.defaults)(t).emoji),"linetoolsticker"===t&&e&&(l.sticker=(0,x.defaults)(t).sticker),l=(0,i.default)(l),M(l,s),(0,n.default)(o,l),o}let C=!1;function V(e){C=e}function I(e){const t=Object.keys(e),s=[];return t.forEach((t=>{const i=e[t];if((0,
h.default)(i)){I(i).forEach((e=>s.push(`${t}.${e}`)))}else s.push(t)})),s}function P(e,t,s=""){if(1===t.length&&"*"===t[0])return e;const i={};for(const n of t){const r=n.split("."),a=r[0],o=e[a],l=""===s?a:`${s}.${a}`;if(e.hasOwnProperty(a))if(r.length>1){if(!(0,h.default)(o)){k.logError(`path ${l} must be an object, but it is a primitive`);continue}{const e=t.filter((e=>e.startsWith(`${a}.`))).map((e=>e.split(".").slice(1).join(".")));i[a]=P(o,e,l)}}else{if((0,h.default)(o)){k.logError(`path ${l} must be a primitive, but it is an object`);continue}i[a]=o}}return i}function B(e,t,s){if(!e)return{};let i=e;return t&&(i=P(e,t)),s&&M(i,s,!0),i}function N(e,t){const s=I(e),i=[];for(const n of s){const s=(0,a.default)(e,n),r=(0,a.default)(t,n);(0,m.assert)(void 0!==s,`Light theme value for ${n} is undefined`),(0,m.assert)(void 0!==r,`Dark theme value for ${n} is undefined`),i.push({path:n,colors:[s,r]})}return i}function L(e,t){e.includes(t)||e.push(t)}function K(e,t){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}function F(e,t){const s=(0,l.default)(e,((e,s,i)=>{if(void 0===t[i])return e;if(!(0,u.default)(s,t[i]))if((0,h.default)(s)&&(0,h.default)(t[i])){const n=F(s,t[i]);void 0!==n&&(e[i]=n)}else e[i]=s;return e}),{});return(0,c.default)(s)?void 0:s}function A(e){return e===g.StdTheme.Dark?1:0}function R(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(!(0,d.default)(e)||!(0,d.default)(t))return!1;const s=(0,f.tryParseRgba)(e),i=(0,f.tryParseRgba)(t);return!(!s||!i)&&!!(0,_.colorsAreCloseEnough)(e,t)}class E extends b.Property{constructor(e){const{defaultName:t,nonThemedDefaultsKeys:s,themedDefaultsKeys:i,excludedDefaultsKeys:r=[],themedColors:a,replaceThemedColorsOnThemeChange:o=!1,allStateKeys:l,excludedStateKeys:u=[],excludedTemplateKeys:c=[],state:h,useUserPreferences:d=!0,saveNonDefaultUserPreferencesOnly:f=!1,ignoreAllowSavingDefaults:p=!1,alwaysSaveDefaultKeys:_=["version"],saveDefaultsConsumer:b=x.saveDefaults,factoryDefaultsSupplier:k=()=>S(!1,t,[],null),schema:M=(0,D.createPropertySchema)(k()),theme:C=y.watchedTheme.spawnOwnership()}=e;super(void 0,M),this._themedColors=[],this._restoreFactoryDefaultsEvent=new T.Delegate,this._replaceThemedColorsOnThemeChange=!1,this._forbidSavingDefaults=!1,this._defaultName=t,this._useUserPreferences=d,this._saveNonDefaultUserPreferencesOnly=f,this._ignoreAllowSavingDefaults=p,this._saveDefaultsConsumer=b,this._factoryDefaultsSupplier=k,this._allStateKeys=l,this._excludedStateKeys=u,this._nonThemedDefaultsKeys=s,this._themedDefaultsKeys=i,this._allDefaultsKeys=s||i?[...s??[],...i??[]]:void 0,this._excludedDefaultsKeys=r,this._excludedTemplateKeys=c,this._themedColors=a,this._alwaysSaveDefaultKeys=_,(0,m.assert)(void 0===this._allDefaultsKeys||0===this._excludedDefaultsKeys.length,"Defaults keys and excluded defaults keys cannot be used at the same time"),(0,m.assert)(void 0===this._allStateKeys||0===this._excludedStateKeys.length,"State keys and excluded state keys cannot be used at the same time"),this._theme=C;const V=w(this._theme);this.merge((0,
n.default)(this._factoryDefaultsForTheme((0,v.isStdThemeName)(V)?V:g.StdTheme.Light),this._userSettings(),B(h,l,u))),a&&o&&this.setThemedColors(a),this._restoreFactoryDefaultsEvent=new T.Delegate}destroy(){this._theme?.release(),this._unsubscribeWatchedTheme?.(),super.destroy()}applyTemplate(e,t){this.mergeAndFire(B((0,n.default)((0,i.default)(t),e),this._allStateKeys,this._excludedTemplateKeys))}preferences(){return B(this.state(this._excludedDefaultsKeys),this._allDefaultsKeys)}template(){return B(this.state(void 0,4),void 0,this._excludedTemplateKeys)}mergePreferences(e){this.mergeAndFire(B(e,this._allDefaultsKeys,this._excludedDefaultsKeys))}addExcludedKey(e,t){1&t&&L(this._excludedDefaultsKeys,e),2&t&&L(this._excludedStateKeys,e),4&t&&L(this._excludedTemplateKeys,e)}removeExcludedKey(e,t){1&t&&K(this._excludedDefaultsKeys,e),2&t&&K(this._excludedStateKeys,e)}restoreFactoryDefaults(){const e=this.factoryDefaults();M(e,this._excludedDefaultsKeys),this.mergeAndFire(e),this._defaultName.startsWith("study_")&&!this._defaultName.startsWith("study_VbPFixed")||this.saveDefaults(),this._restoreFactoryDefaultsEvent.fire()}onRestoreFactoryDefaults(){return this._restoreFactoryDefaultsEvent}saveDefaults(){if(!this._useUserPreferences||this._forbidSavingDefaults)return;let e;if(this._saveNonDefaultUserPreferencesOnly){const t=this.state(this._excludedDefaultsKeys),s=this.factoryDefaults();if(e=F(B(t,this._nonThemedDefaultsKeys),B(s,this._nonThemedDefaultsKeys,this._excludedDefaultsKeys)),this._alwaysSaveDefaultKeys.length){const s=B(t,this._alwaysSaveDefaultKeys);e=e??{},(0,n.default)(e,s)}const i=this.themeDefaults(w(this._theme)),r=this.themeState(),a=F(r,i);(0,c.default)(a)||(e=e??{},(0,n.default)(e,r))}else e=this.preferences();this._saveDefaultsConsumer(this._defaultName,e)}themeDefaults(e){if(this._themedColors)return function(e,t){const s={};for(const{path:i,colors:n}of e)(0,o.default)(s,i,n[A(t)]);return s}(this._themedColors,e===g.StdTheme.Dark?g.StdTheme.Dark:g.StdTheme.Light);return B(this._factoryDefaultsSupplier(),this._themedDefaultsKeys,this._excludedDefaultsKeys)}factoryDefaults(){return this._factoryDefaultsForTheme(w(this._theme))}themeState(){const e=super.state(this._excludedDefaultsKeys),t=this._themedColors;return B(e,t?t.map((e=>e.path)):this._themedDefaultsKeys)}allThemePropertiesAreDefault(e){(0,m.assert)(!!this._themedColors,"This method should not be called if themed colors are not set");return function(e,t,s=[]){for(const i of s){const s=i.path;if(!R((0,a.default)(e,s),(0,a.default)(t,s)))return!1}return!0}(this.themeState(),this.themeDefaults(e),this._themedColors)}clone(e){return new E(this._options())}setThemedColors(e){if(this._themedColors=e,void 0===this._unsubscribeWatchedTheme){const e=()=>{this._updateThemedColors(!1)};this._theme.subscribe(e),this._unsubscribeWatchedTheme=()=>this._theme.unsubscribe(e)}this._updateThemedColors(!0)}applyDefaultThemedProperties(e){this._themedColors&&this.mergeAndFire(this.themeDefaults(e))}state(e,t){
return B(super.state([...this._excludedStateKeys,...e??[]],t),this._allStateKeys)}_updateThemedColors(e){if(!this._themedColors)return;const t=w(this._theme),s=t===g.StdTheme.Light?g.StdTheme.Dark:g.StdTheme.Light;for(const i of this._themedColors){const n=(0,m.ensureDefined)(this.childByPath(i.path)),r=i.colors[A(s)];(""===n.value()||!e&&R(n.value(),r))&&n.setValue(i.colors[A(t)])}}_userSettings(){if(!this._useUserPreferences)return;const e=S(!0,this._defaultName,[],null);if(!e)return;return B((0,D.extractStateWithSchema)(e,this._schema,1),this._allDefaultsKeys,this._excludedDefaultsKeys)}_options(){return{defaultName:this._defaultName,factoryDefaultsSupplier:this._factoryDefaultsSupplier,state:this.state(),nonThemedDefaultsKeys:this._nonThemedDefaultsKeys,themedDefaultsKeys:this._themedDefaultsKeys,excludedDefaultsKeys:this._excludedDefaultsKeys,themedColors:this._themedColors,replaceThemedColorsOnThemeChange:this._replaceThemedColorsOnThemeChange,allStateKeys:this._allStateKeys,excludedStateKeys:this._excludedDefaultsKeys,excludedTemplateKeys:this._excludedTemplateKeys,useUserPreferences:this._useUserPreferences,saveNonDefaultUserPreferencesOnly:this._saveNonDefaultUserPreferencesOnly,ignoreAllowSavingDefaults:this._ignoreAllowSavingDefaults,saveDefaultsConsumer:this._saveDefaultsConsumer,alwaysSaveDefaultKeys:this._alwaysSaveDefaultKeys,theme:this._theme.spawnOwnership()}}_childChanged(e,t){super._childChanged(e,t),this._propertyAffectsDefaults(t)&&this.saveDefaults()}_fireMergeAndFireChangedProps(e){this._forbidSavingDefaults=!0,super._fireMergeAndFireChangedProps(e),this._forbidSavingDefaults=!1,e.some((e=>this._propertyAffectsDefaults(e.pathToRootProperty())))&&this.saveDefaults()}_factoryDefaultsForTheme(e){return(0,n.default)(this._factoryDefaultsSupplier(),this.themeDefaults(e))}_propertyAffectsDefaults(e){return(this._ignoreAllowSavingDefaults||C)&&!this._defaultName.startsWith("replayStudyStrategy")&&(!this._defaultName.startsWith("study_")||this._defaultName.startsWith("study_VbPFixed"))&&(this._allDefaultsKeys&&this._allDefaultsKeys.includes(e)||!this._allDefaultsKeys&&!this._excludedDefaultsKeys?.includes(e))&&(0,b.isPrimitiveType)(this.childByPath(e)?.value())}}},87913:(e,t,s)=>{s.r(t),s.d(t,{SelectPointMode:()=>i,activePointSelectionMode:()=>Z,alignTo45Degrees:()=>Se,barTimesUnderCursor:()=>Y,beenSetLineToolLastPoint:()=>R,cancelLineTool:()=>ne,cancelledLineTool:()=>A,changeLineStyle:()=>fe,changeLineTool:()=>ce,changedLineStyle:()=>q,changedLineTool:()=>U,continueLineTool:()=>ie,continuedLineTool:()=>F,copiedLineTool:()=>J,copyLineTool:()=>pe,createLineTool:()=>se,createdLineTool:()=>K,crosshairLock:()=>w,cursorTool:()=>I,drawOnAllCharts:()=>Ce,drawOnAllChartsMode:()=>Ve,emojiTool:()=>C,finishChangingLineTool:()=>he,finishLineTool:()=>me,finishMovingLineTool:()=>le,finishedChangingLineTool:()=>z,finishedLineTool:()=>H,finishedMovingLineTool:()=>W,hideAllDrawings:()=>be,hideAllIndicators:()=>ke,hideMarksOnBars:()=>Me,iconTool:()=>S,init:()=>Te,isDirectionalMovementActive:()=>L,
isStudyEditingNow:()=>Q,isToolCreatingNow:()=>P,isToolEditingNow:()=>B,isToolMovingNow:()=>N,lockDrawings:()=>we,moveLineTool:()=>oe,movedLineTool:()=>O,properties:()=>xe,removeLineTool:()=>de,removedLineTool:()=>$,resetToCursor:()=>y,restoreLineTool:()=>_e,restoreLineToolState:()=>ge,restoredLineTool:()=>G,restoredLineToolState:()=>X,runOnDrawingStateReady:()=>De,setLineToolLastPoint:()=>re,startChangingLineTool:()=>ue,startMovingLineTool:()=>ae,startedChangingLineTool:()=>j,startedMovingLineTool:()=>E,stickerTool:()=>V,tool:()=>M,toolIsCursor:()=>f,toolIsDemonstration:()=>_,toolIsEraser:()=>p,toolIsMeasure:()=>g});var i,n=s(650151),r=s(781567),a=s(890390),o=s(820028),l=s(751094),u=s(547465),c=s(62802),h=s(251954),d=s(345848);!function(e){e[e.None=0]="None",e[e.Replay=1]="Replay",e[e.Study=2]="Study"}(i||(i={}));const m=new Set(["cursor","arrow","dot","performance","demonstration"]);function f(e){return m.has(e)}function p(e){return"eraser"===e}function _(e){return"demonstration"===e}function g(e){return"measure"===e}function y(e=!1){if(!e&&v){if(v.childs().stayInDrawingMode.value())return}M.setValue(I.value())}let v=null,T=null,D=null,x=null,b=null,k=null;const w=new l.WatchedObject(null),M=new o.WatchedValue,S=new o.WatchedValue,C=new o.WatchedValue,V=new o.WatchedValue,I=new o.WatchedValue,P=new o.WatchedValue(!1),B=new o.WatchedValue(!1),N=new o.WatchedValue(!1),L=new o.WatchedValue(!1),K=new u.Delegate,F=new u.Delegate,A=new u.Delegate,R=new u.Delegate,E=new u.Delegate,O=new u.Delegate,W=new u.Delegate,j=new u.Delegate,U=new u.Delegate,z=new u.Delegate,$=new u.Delegate,H=new u.Delegate,q=new u.Delegate,J=new u.Delegate,G=new u.Delegate,X=new u.Delegate,Z=new o.WatchedValue(i.None),Q=new o.WatchedValue(!1),Y=new Map;function ee(e,t){const s=t||{value:!1};return t=>{s.value||(s.value=!0,e.fire(t),s.value=!1)}}const te={value:!1},se=ee(K,te),ie=ee(F,te),ne=ee(A,te),re=ee(R,te),ae=ee(E),oe=ee(O),le=ee(W),ue=ee(j),ce=ee(U),he=ee(z),de=ee($),me=ee(H),fe=ee(q,te),pe=ee(J,te),_e=ee(G),ge=ee(X);let ye=!1,ve=[];function Te(){if(ye)return;const e=c.getValue("chart.cursorPreference","cursor");M.setValue(f(e)?e:"cursor"),M.subscribe((e=>{f(e)?I.setValue(e):p(e)&&(0,d.trackEvent)("Chart cursors",e)}),{callWithLast:!0}),I.subscribe((e=>{(0,d.trackEvent)("Chart cursors",e),e&&"performance"!==e&&!_(e)&&c.setValue("chart.cursorPreference",e)})),v=new a.DefaultProperty({defaultName:"drawings"}),T=(0,r.createPrimitiveProperty)(!1),D=(0,r.createPrimitiveProperty)(!1),x=(0,r.createPrimitiveProperty)(!1),b=(0,r.createPrimitiveProperty)(!c.getBool("BarsMarksContainer.visibile",!0)),k=(0,r.createPrimitiveProperty)(!1),M.subscribe((e=>{(0,h.emit)("onSelectedLineToolChanged")})),ye=!0,ve.forEach((e=>e())),ve=[]}function De(e){ye?e():ve.push(e)}function xe(){return(0,n.ensureNotNull)(v)}function be(){return(0,n.ensureNotNull)(T)}function ke(){return(0,n.ensureNotNull)(D)}function we(){return(0,n.ensureNotNull)(x)}function Me(){return(0,n.ensureNotNull)(b)}function Se(){return(0,n.ensureNotNull)(k)}function Ce(){
return xe().childs().drawOnAllCharts}function Ve(){return xe().childs().drawOnAllChartsMode}},477786:(e,t,s)=>{s.d(t,{Interval:()=>c,ResolutionKind:()=>r,SpecialResolutionKind:()=>a,isHour:()=>d});const i=/^(\d*)([TSHDWMR])$/,n=/^(\d+)$/;var r,a;!function(e){e.Ticks="ticks",e.Seconds="seconds",e.Minutes="minutes",e.Days="days",e.Weeks="weeks",e.Months="months",e.Range="range",e.Invalid="invalid"}(r||(r={})),function(e){e.Hours="hours"}(a||(a={}));const o={};o[r.Ticks]=1e3,o[r.Seconds]=1e3,o[r.Minutes]=60*o[r.Seconds],o[r.Days]=1440*o[r.Minutes],o[r.Weeks]=7*o[r.Days];const l={T:r.Ticks,S:r.Seconds,D:r.Days,W:r.Weeks,M:r.Months,R:r.Range},u=new Set([r.Ticks,r.Seconds,r.Minutes]);class c{constructor(e,t){this._kind=r.Invalid,this._multiplier=0,e!==r.Invalid&&t>0&&(this._kind=e,this._multiplier=t)}kind(){return this._kind}guiKind(){return this.isMinuteHours()?a.Hours:this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==r.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const e=u.has(this.kind());return this.isValid()&&e}isSeconds(){return this.kind()===r.Seconds}isMinutes(){return this.kind()===r.Minutes}isMinuteHours(){return this.kind()===r.Minutes&&d(this.multiplier())}isDays(){return this.kind()===r.Days}isWeeks(){return this.kind()===r.Weeks}isMonths(){return this.kind()===r.Months}isRange(){return this.kind()===r.Range}isTicks(){return this.kind()===r.Ticks}is1Tick(){return this.isTicks()&&1===this.multiplier()}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==r.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===r.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(e){if(!(e instanceof c))throw new Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())}inMilliseconds(e=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const t=new Date(e);t.setUTCMonth(t.getUTCMonth()+(this.multiplier()||1));return+t-e}const t=this.multiplier();return o[this.kind()]*t}static isEqual(e,t){return e===t||c.parse(e).isEqualTo(c.parse(t))}static parseExt(e){e=(e+"").toUpperCase().split(",")[0];let t=i.exec(e);return null!==t?"H"===t[2]?{interval:new c(r.Minutes,60*h(t[1])),guiResolutionKind:a.Hours}:{interval:new c(l[t[2]],h(t[1])),guiResolutionKind:l[t[2]]}:(t=n.exec(e),null!==t?{interval:new c(r.Minutes,h(t[1])),guiResolutionKind:r.Minutes}:{interval:new c(r.Invalid,0),guiResolutionKind:r.Invalid})}static parse(e){return c.parseExt(e).interval}static kind(e){return c.parse(e).kind()}static isValid(e){return c.parse(e).isValid()}static isDWM(e){return c.parse(e).isDWM()}static isIntraday(e){return c.parse(e).isIntraday()}static isSeconds(e){return c.parse(e).isSeconds()}static isMinutes(e){return c.parse(e).isMinutes()}static isMinuteHours(e){return c.parse(e).isMinuteHours()}static isDays(e){return c.parse(e).isDays()}static isWeeks(e){
return c.parse(e).isWeeks()}static isMonths(e){return c.parse(e).isMonths()}static isRange(e){return c.parse(e).isRange()}static isTicks(e){return c.parse(e).isTicks()}static isTimeBased(e){return c.parse(e).isTimeBased()}static normalize(e){const t=c.parse(e);return t.isValid()?t.value():null}}function h(e){return 0===e.length?1:parseInt(e,10)}function d(e){return e>=60&&!(e%60)}},816541:(e,t,s)=>{s.d(t,{getIntervalsVisibilitiesForMode:()=>m,isActualInterval:()=>c,makeIntervalsVisibilitiesVisibleAtInterval:()=>l,mergeIntervalVisibilitiesDefaults:()=>d,nonDefaultIntervalsVisibilities:()=>h});var i=s(998034),n=s(154834),r=s(650151),a=s(477786),o=s(266954);function l(e,t){let s=t.multiplier();if(t.isTicks()&&(e.ticks=!0),t.isSeconds()&&(s<60?(e.seconds=!0,e.secondsFrom=Math.min(e.secondsFrom,s),e.secondsTo=Math.max(e.secondsTo,s)):(s=Math.floor(s/60),t=new a.Interval(a.ResolutionKind.Minutes,s))),t.isMinutes())if(s<60)e.minutes=!0,e.minutesFrom=Math.min(e.minutesFrom,s),e.minutesTo=Math.max(e.minutesTo,s);else{const t=Math.floor(s/60);e.hours=!0,e.hoursFrom=Math.min(e.hoursFrom,t),e.hoursTo=Math.max(e.hoursTo,t)}t.isDays()&&(e.days=!0,e.daysFrom=Math.min(e.daysFrom,s),e.daysTo=Math.max(e.daysTo,s)),t.isWeeks()&&(e.weeks=!0,e.weeksFrom=Math.min(e.weeksFrom,s),e.weeksTo=Math.max(e.weeksTo,s)),t.isMonths()&&(e.months=!0,e.monthsFrom=Math.min(e.monthsFrom,s),e.monthsTo=Math.max(e.monthsTo,s)),t.isRange()&&(e.ranges=!0)}function u(e,t,s,i){return e&&i>=t&&i<=s}function c(e,t){const s=t.childs();switch(e.kind()){case a.ResolutionKind.Ticks:return s.ticks.value();case a.ResolutionKind.Seconds:if(e.multiplier()<60)return u(s.seconds.value(),s.secondsFrom.value(),s.secondsTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return u(s.minutes.value(),s.minutesFrom.value(),s.minutesTo.value(),t)}case a.ResolutionKind.Minutes:if(e.multiplier()<60)return u(s.minutes.value(),s.minutesFrom.value(),s.minutesTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return u(s.hours.value(),s.hoursFrom.value(),s.hoursTo.value(),t)}case a.ResolutionKind.Days:return u(s.days.value(),s.daysFrom.value(),s.daysTo.value(),e.multiplier());case a.ResolutionKind.Weeks:return u(s.weeks.value(),s.weeksFrom.value(),s.weeksTo.value(),e.multiplier());case a.ResolutionKind.Months:return u(s.months.value(),s.monthsFrom.value(),s.monthsTo.value(),e.multiplier());case a.ResolutionKind.Range:return s.ranges.value()}return(0,r.assert)(!1,`Unsupported resolution: ${e.value()}`),!1}function h(e){const t=Object.keys(e).filter((t=>o.intervalsVisibilitiesDefaults[t]!==e[t]));return 0===t.length?null:t.reduce(((t,s)=>(t[s]=e[s],t)),{})}function d(e){return(0,i.default)((0,n.default)(o.intervalsVisibilitiesDefaults),e??{})}function m(e,t){if(0===t||e.isTicks()&&3===t||e.isRange()&&2===t)return d();let s=!1;const i={ticks:!1,seconds:!1,minutes:!1,hours:!1,days:!1,weeks:!1,months:!1,ranges:!1},n=e=>e.multiplier();return[{checker:e=>e.isTicks(),getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.ticks=!0}},{
checker:e=>e.isSeconds()&&e.multiplier()<60,getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.seconds=!0,i.secondsFrom=e,i.secondsTo=t}},{checker:e=>e.isSeconds()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{i.minutes=!0,i.minutesFrom=e,i.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()<60,getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.minutes=!0,i.minutesFrom=e,i.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{i.hours=!0,i.hoursFrom=e,i.hoursTo=t}},{checker:e=>e.isDays(),getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.days=!0,i.daysFrom=e,i.daysTo=t}},{checker:e=>e.isWeeks(),getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.weeks=!0,i.weeksFrom=e,i.weeksTo=t}},{checker:e=>e.isMonths(),getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.months=!0,i.monthsFrom=e,i.monthsTo=t}},{checker:e=>e.isRange(),getIntervalMultiplier:n,markIntervalAsVisible:(e,t)=>{i.ranges=!0}}].forEach((i=>{if(i.checker(e)){s=!0;const n=i.getIntervalMultiplier(e);1===t?i.markIntervalAsVisible(n,n):3===t?i.markIntervalAsVisible(n,void 0):i.markIntervalAsVisible(void 0,n)}else(!s&&2===t||s&&3===t)&&i.markIntervalAsVisible(void 0,void 0)})),d(i)}},847774:(e,t,s)=>{var i;s.d(t,{SymbolErrorPermissionDeniedReason:()=>i,invalidSymbol:()=>r,permissionDenied:()=>n}),function(e){e.Symbol="symbol",e.GroupPermission="group"}(i||(i={}));const n="permission denied",r="invalid symbol"},359035:(e,t,s)=>{s.d(t,{unpackNonSeriesData:()=>o});var i=s(130551),n=s(650151);function r(e){if(!(0,i.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if((0,i.hasProperty)(e,"create"),(0,i.hasProperty)(e,"erase")){const t=e.erase;(0,n.assert)(Array.isArray(t),"Collection of erase commands should be array");for(const e of t){if(!(0,i.isObject)(e)||!(0,i.hasProperty)(e,"action"))throw new Error("Command should be an object with 'action' property");(0,n.assert)("all"===e.action||"one"===e.action,"Erase command action should be 'all' or 'one'")}}return e}async function a(e){{const[{inflateZlib:t,inflateRaw:i},{unpackImpl:n}]=await Promise.all(["function"==typeof DecompressionStream?s.e(95465).then(s.bind(s,552243)):Promise.all([s.e(84069),s.e(82170)]).then(s.bind(s,392592)),s.e(95465).then(s.bind(s,321672))]);return n(t,i,e)}}async function o(e){if(""===e)return null;const t=JSON.parse(e);if(!(0,i.isObject)(t)||"function"==typeof t)throw new Error("Non-object content in the non-series envelope");if((0,i.hasProperty)(t,"indexes_replace"))return{indexes_replace:!0};const s={indexes_replace:!1};if((0,i.hasProperty)(t,"offsets")&&(s.offsets=t.offsets),(0,i.hasProperty)(t,"isUpdate")){if("boolean"!=typeof t.isUpdate)throw new Error('Invalid type of "isUpdate" field');s.isUpdate=t.isUpdate}return(0,i.hasProperty)(t,"data")&&(s.data=t.data),(0,i.hasProperty)(t,"graphicsCmds")&&(s.graphicsCmds=r(t.graphicsCmds)),(0,
i.hasProperty)(t,"dataCompressed")&&(s.data=await a(t.dataCompressed)),(0,i.hasProperty)(t,"graphicsCmdsCompressed")&&(s.graphicsCmds=r(await a(t.graphicsCmdsCompressed))),s}},951827:(e,t,s)=>{s.d(t,{getNumericFormatter:()=>c,getPercentageFormatter:()=>h,getPipFormatter:()=>f,getVolumeFormatter:()=>d});var i=s(808708),n=s(722652),r=s(291066),a=s(89831);class o extends a.PriceFormatter{constructor(e){const{priceScale:t,minMove:s=1,type:i,typespecs:n,minMove2:a,ignoreLocaleNumberFormat:o}=e;("forex"===i||(0,r.isCFDSymbol)(i,n))&&a?(super({priceScale:a,ignoreLocaleNumberFormat:o}),this._isForex=!0):(super({priceScale:1,ignoreLocaleNumberFormat:o}),this._isForex=!1),this._pipPriceScale=t,this._pipMinMove=s,this._pipMinMove2=a}format(e,t={}){const{signPositive:s,tailSize:i,ignoreLocaleNumberFormat:n}=t;let r=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===r&&(r=NaN),super.format(e*this._pipPriceScale/r,{signPositive:s,tailSize:i,ignoreLocaleNumberFormat:n})}}var l=s(51196),u=s(909456);const c=(0,u.numDependencyFormatter)((e=>new i.NumericFormatter({precision:e}))),h=(0,u.numDependencyFormatter)((e=>new n.PercentageFormatter({priceScale:Math.pow(10,e??2),minMove:1}))),d=(0,u.numDependencyFormatter)((e=>new l.VolumeFormatter({precision:e}))),m=new WeakMap;function f(e){let t=m.get(e);return t||(t=new o({priceScale:e.pricescale,minMove:e.minmov,minMove2:e.minmove2,type:e.type,typespecs:e.typespecs}),m.set(e,t)),t}},65840:(e,t,s)=>{s.d(t,{coordinateIsValid:()=>_,extendAndClipLineSegment:()=>c,fillScaledRadius:()=>y,getArrowPoints:()=>h,interactionTolerance:()=>p,optimalBarWidth:()=>d,optimalCandlestickWidth:()=>m,optimalHiLoWidth:()=>f,roundToMax:()=>T,setValidLineStyle:()=>g,strokeScaledRadius:()=>v});var i=s(536794),n=s(86441),r=s(5531),a=s(822961),o=s(338242);const l={common:13,line:13,tradingLine:16,minDistanceBetweenPoints:10,series:14,curve:10,anchor:13,esd:4},u={common:3,line:3,tradingLine:3,minDistanceBetweenPoints:5,series:2,curve:3,anchor:2,esd:0};function c(e,t,s,i,a,o){if((0,n.equalPoints)(e,t))return null;const l=new n.Point(0,0),u=new n.Point(s,i);if(a){if(o){const s=(0,r.intersectLineAndBox)((0,n.lineThroughPoints)(e,t),(0,n.box)(l,u));return Array.isArray(s)?s:null}{const s=(0,r.intersectRayAndBox)(t,e,(0,n.box)(l,u));return null===s||(0,n.equalPoints)(t,s)?null:(0,n.lineSegment)(t,s)}}if(o){const s=(0,r.intersectRayAndBox)(e,t,(0,n.box)(l,u));return null===s||(0,n.equalPoints)(e,s)?null:(0,n.lineSegment)(e,s)}{const s=(0,r.intersectLineSegmentAndBox)((0,n.lineSegment)(e,t),(0,n.box)(l,u));return Array.isArray(s)?s:null}}function h(e,t,s,i,n){const r=.5*s,a=Math.sqrt(2),o=t.subtract(e),l=o.normalized();let u=5*s;i&&(u=Math.min(u,.35*o.length()));const c=1*r;if(u*a*.2<=c)return[];const h=l.scaled(u),d=t.subtract(h),m=l.transposed(),f=1*u,p=m.scaled(f),_=d.add(p),g=d.subtract(p),y=_.subtract(t).normalized().scaled(c),v=g.subtract(t).normalized().scaled(c),T=n?t:t.add(y),D=n?t:t.add(v),x=r*(a-1),b=m.scaled(x),k=Math.min(u-1*r/a,r*a*1),w=l.scaled(k),M=t.subtract(b),S=t.add(b),C=t.subtract(w)
;return[[_,T],[D,g],[M,C.subtract(b)],[S,C.add(b)]]}function d(e,t){return t=t||1,Math.floor(.3*e*t)}function m(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);const s=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),i=Math.floor(e*s*t),n=Math.floor(e*t),r=Math.min(i,n);return Math.max(Math.floor(t),r)}function f(e){return.4*e}function p(){return(0,a.lastMouseOrTouchEventInfo)().isTouch?l:u}function _(e){return null!=e&&!(0,i.isNaN)(e)}function g(e,t){void 0!==t&&(0,o.setLineStyle)(e,t)}function y(e,t){const s=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+s}function v(e,t,s){const i=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+(i!==s%2?.5:0)}function T(e){return Math.max(Math.floor(e),1)}},397535:(e,t,s)=>{s.d(t,{PriceRange:()=>r,mergePriceRanges:()=>a});var i=s(810715);const n=(0,s(735566).getLogger)("Chart.PriceRange");class r{constructor(e,t){if(null!==e&&"object"==typeof e){const t=e;this._minValue=t.m_minValue,this._maxValue=t.m_maxValue}else{const s=e;this._minValue=s,void 0!==t&&(this._maxValue=t)}}equals(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue}clone(){return new r(this._minValue,this._maxValue)}minValue(){return this._minValue}setMinValue(e){this._minValue=e}maxValue(){return this._maxValue}setMaxValue(e){this._maxValue=e}length(){return this._maxValue-this._minValue}isEmpty(){return this._maxValue===this._minValue||this._maxValue!=this._maxValue||this._minValue!=this._minValue}serialize(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}}state(){return{max:this._maxValue,min:this._minValue}}merge(e){return new r(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))}apply(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)}set(e,t){this._minValue=e,this._maxValue=t}scaleAroundCenter(e){if(!(0,i.isNumber)(e))return void n.logDebug("PriceRange.scaleAroundCenter: invalid coeff");if(0===this._maxValue-this._minValue)return;const t=.5*(this._maxValue+this._minValue);let s=this._maxValue-t,r=this._minValue-t;s*=e,r*=e,this._maxValue=t+s,this._minValue=t+r}shift(e){(0,i.isNumber)(e)?(this._maxValue+=e,this._minValue+=e):n.logDebug("PriceRange.shift: invalid coeff")}containsStrictly(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue}containPrice(e){return e>=this._minValue&&e<=this._maxValue}intersection(e){return this.containPrice(e.minValue())||this.containPrice(e.maxValue())||e.containPrice(this._minValue)?new r(Math.max(this._minValue,e.minValue()),Math.min(this._maxValue,e.maxValue())):null}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}function a(e){return e.reduce(((e,t)=>e?t?e.merge(t):e:t),null)}},781567:(e,t,s)=>{s.d(t,{createPrimitiveProperty:()=>n});var i=s(905520);function n(e){return new i.Property(e)}},582441:(e,t,s)=>{s.d(t,{createWVFromGetterAndSubscriptions:()=>n});var i=s(820028);function n(e,t){const s=new i.WatchedValue(e()),n={};t.forEach((t=>t.subscribe(n,(()=>{s.setValue(e())}))));return s.readonly().spawn((()=>t.forEach((e=>e.unsubscribeAll(n)))))
}},326488:(e,t,s)=>{s.d(t,{SeriesData:()=>d,barFunction:()=>c,barFunctions:()=>l,seriesPlotFunctionMap:()=>u});var i,n=s(650151),r=s(132565),a=s(20019);!function(e){e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight"}(i||(i={}));const o=["open","high","low","close","hl2","hlc3","ohlc4"],l={open:e=>e[1],high:e=>e[2],low:e=>e[3],close:e=>e[4],hl2:e=>(e[2]+e[3])/2,hlc3:e=>(e[2]+e[3]+e[4])/3,ohlc4:e=>(e[1]+e[2]+e[3]+e[4])/4};function u(){const e=new Map;return o.forEach(((t,s)=>{e.set(t,c(t))})),e}function c(e,t,s){const i=l[t??e],n=l[e],r=l[s??e];return(e,t)=>{switch(t){case 0:return i(e);case 2:return r(e);default:return n(e)}}}function h(e,t){return null==e[t]}class d{constructor(){this.m_bars=new r.PlotList(u(),h),this.m_nsBars=new r.PlotList(u(),h),this._conflatedChunksBuilder=new a.ConflatedChunksBuilder(this.m_bars,(e=>l[e]))}bars(){return this.m_bars}nsBars(){return this.m_nsBars}conflatedChunks(e,t){return this._conflatedChunksBuilder.conflatedChunks(e,t)}mergeRegularBars(e){return this._conflatedChunksBuilder.mergeData(e)}size(){return this.m_bars.size()+this.m_nsBars.size()}each(e){this.m_bars.each(e),this.m_nsBars.each(e)}clear(){this.m_nsBars.clear(),this.lastProjectionPrice=void 0,this._conflatedChunksBuilder.clearData()}clone(){const e=new d;return e.lastProjectionPrice=this.lastProjectionPrice,e.boxSize=this.boxSize,e.reversalAmount=this.reversalAmount,e.m_bars=this.m_bars.clone(),e.m_nsBars=this.m_bars.clone(),e}isEmpty(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()}first(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()}last(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()}search(e,t,s){return this.nsBars().isEmpty()?this.bars().search(e,t,s):this.bars().isEmpty()||(0,n.ensureNotNull)(this.nsBars().firstIndex())<=e?this.nsBars().search(e,t,s):this.bars().search(e,t,s)}valueAt(e){const t=this.search(e);return null!==t?t.value:null}plotValueToTimePointIndex(e,t,s){if(s===i.FromRight){const s=(s,i)=>{const n=i[t];return null!=n&&e>=n},i=this.m_bars.findLast(s);if(null!==i)return i.index;const n=this.m_nsBars.findLast(s);return null!==n?n.index:this.m_bars.firstIndex()}if(s===i.FromLeft){const s=(s,i)=>{const n=i[t];return null!=n&&e<=n},i=this.m_bars.findFirst(s);if(null!==i)return i.index;const n=this.m_nsBars.findFirst(s);return null!==n?n.index:this.m_bars.lastIndex()}throw new Error("plotValueToTimePointIndex: unsupported search mode")}moveData(e){this._conflatedChunksBuilder.moveData(e),this.m_nsBars.move(e)}}},70907:(e,t,s)=>{s.d(t,{DwgExtend:()=>i,convertPointsToScreenDimension:()=>o,doesItemAffectVisibleRange:()=>l,isExtendInSameDirection:()=>a});var i,n=s(650151);function r(e,t){return e===i.None?t:t===i.None?e:e===i.Both||t===i.Both?i.Both:e===t?t:i.Both}function a(e,t){return e===i.Both||e===t}function o(e,t,s,a,o,l,u,c,h,d){let m,f;if(null===e&&null===s){if(o!==i.Right&&o!==i.Both)return null;o=i.Both,m=0,f=c}else null===e?(m=u.indexToCoordinate((0,n.ensureNotNull)(s)-1),o=r(o,i.Left)):m=u.indexToCoordinate(e),
null===s?(f=u.indexToCoordinate((0,n.ensureNotNull)(e)-1),o=r(o,i.Right)):f=u.indexToCoordinate(s);const p=m,_=l.priceToCoordinate(t,h),g=f,y=l.priceToCoordinate(a,h);return void 0!==d?(d.x1=p,d.y1=_,d.x2=g,d.y2=y,d.extend=o,d):{x1:p,y1:_,x2:g,y2:y,extend:o}}function l(e,t,s,n,r){let a=!1;switch(s){case i.Both:a=!0;break;case i.Right:a=null===t||null===e||e<=r;break;case i.Left:a=null===t||t>=n;break;default:null!==e&&null!==t?a=(e>=n||t>=n)&&(e<=r||t<=r):null!==e&&null===t?a=e<=r:null===e&&null!==t&&(a=t>=n)}return a}!function(e){e.None="n",e.Left="l",e.Right="r",e.Both="b"}(i||(i={}))},992035:(e,t,s)=>{var i,n,r;s.d(t,{HHistDirection:()=>i,HHistLocation:()=>n,HHistVolumeMode:()=>r}),function(e){e.LeftToRight="left_to_right",e.RightToLeft="right_to_left"}(i||(i={})),function(e){e.Relative="relative",e.Absolute="absolute"}(n||(n={})),function(e){e.UpDown="Up/Down",e.Total="Total",e.Delta="Delta"}(r||(r={}))},691009:(e,t,s)=>{s.d(t,{containsTpoTimePointIndexes:()=>a,dematerializeTpo:()=>l,isTpoInBarsRange:()=>u,materializeTpo:()=>o});var i=s(650151),n=s(707771),r=s(171048);const a=!0;function o(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const s=t[e.firstBarTime],r=t[e.lastBarTime];return s===n.INVALID_TIME_POINT_INDEX||r===n.INVALID_TIME_POINT_INDEX?null:((0,i.assert)(s<=r,"firstBarTime should not exceed lastBarTime"),{id:e.id,firstBarTime:s,lastBarTime:r,priceRange:e.priceRange,times:e.times})}function l(e,t,s){return{id:t,firstBarTime:(0,r.ensureTimePointIndexIndex)(s.indexOf(e.firstBarTime)),lastBarTime:(0,r.ensureTimePointIndexIndex)(s.indexOf(e.lastBarTime)),priceRange:e.priceRange,times:e.times}}function u(e,t){return!(e.lastBarTime<t.firstBar()||e.firstBarTime>t.lastBar())}},384597:(e,t,s)=>{s.d(t,{NonSeriesStudy:()=>r});var i=s(650151),n=s(631114);class r extends n.Study{isLinkedToSeries(){return!0}clearData(){this._customData=null,this._indexes=null}restoreData(e,t,s){super.restoreData(e),this._customData=t,this._indexes=s}state(e){const t=super.state(e);return e&&(t.nonSeriesData=this._customData,t.indexes=this._indexes),t}customData(){return this._customData}_setPaneViews(e){this._paneViews=e,this.model().lightUpdate()}_onDataUpdated(e,t,s){null!==t&&(t.indexes_replace?((0,i.assert)("nochange"!==s),this._indexes=s):(this._customData=t.data,"nochange"!==s&&(this._indexes=s))),super._onDataUpdated(e,t,s)}}},960433:(e,t,s)=>{s.d(t,{TextWidthCache:()=>r,getMinTextMetrics:()=>n});var i=s(850117);function n(e){return{width:e.width,actualBoundingBoxAscent:e.actualBoundingBoxAscent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent}}class r{constructor(e=150){this._fontStyle="",this._cache=new i.CircularCacheBuffer(e,1.5)}reset(){this._cache.clear()}measureText(e,t){return this.getMetrics(e,t).width}yMidCorrection(e,t){const s=this.getMetrics(e,t);return void 0!==s.actualBoundingBoxAscent&&void 0!==s.actualBoundingBoxDescent?(s.actualBoundingBoxAscent-s.actualBoundingBoxDescent)/2:0}
getMetrics(e,t){e.font!==this._fontStyle&&(this.reset(),this._fontStyle=e.font);const s=this._cache.get(t);if(void 0!==s)return s;const i=e.textBaseline;e.textBaseline="middle";const r=n(e.measureText(t));return e.textBaseline=i,0===r.width&&t.length||this._cache.set(t,r),r}}},398290:(e,t,s)=>{s.d(t,{generateColorCached:()=>a});var i=s(259332),n=s(534328),r=s(850117);function a(e=1e3){const t=i.default.Cache;i.default.Cache=r.CircularCacheBuffer.bind(r.CircularCacheBuffer,e);const s=(0,i.default)(n.generateColor,((e,t,s)=>`${e}_${t}_${s}`));return i.default.Cache=t,s}},837462:(e,t,s)=>{function i(e,t,s,i){return`${i?i+" ":""}${s?s+" ":""}${e}px ${t}`}s.d(t,{makeFont:()=>i,parseFont:()=>r});const n=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function r(e){const t=n.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},707934:(e,t,s)=>{s.r(t),s.d(t,{createGoProDialog:()=>c,isUpgradableFeature:()=>u,onGoProDialog:()=>o});var i=s(638456);const n=new Set,r=[],a=new Promise((e=>{window.addEventListener("load",(()=>{setTimeout((()=>{e()}),3e3)})),setTimeout((()=>{e()}),3e3)}));function o(e,t){r.push(e),t&&t.forEach((e=>{n.add(e)}))}const l=["sessionLock","sessionLogout","checkingNSE"];function u(e){return!1===l.includes(e)}async function c(e){if(await a,r.forEach((t=>{t(e.feature)})),n.has(e.feature))return;if((0,i.isSymphonyEmbed)()&&u(e.feature)){const t=await Promise.all([s.e(21122),s.e(92537),s.e(87833),s.e(38452),s.e(84712),s.e(7276),s.e(47093),s.e(44581)]).then(s.bind(s,681143));e.actionsOverride=t.generateSymphonyActions({feature:e.feature,upgradeMessage:e.upgradeMessage,additional:e.customParams}),e.hideLimitTable=!0}const t=await Promise.all([s.e(83962),s.e(88974),s.e(18883),s.e(92537),s.e(19190),s.e(39759),s.e(52186),s.e(67131),s.e(82332),s.e(59546),s.e(65161),s.e(94036),s.e(7276),s.e(29396),s.e(6796),s.e(17725),s.e(39190),s.e(82321),s.e(59844),s.e(35302),s.e(7160),s.e(98230),s.e(5246)]).then(s.bind(s,427013));await(window.pro?.ensureValidShopConf()),t.renderGoproDialog(e)}window.TradingView.createGoProDialog=c},482354:(e,t,s)=>{function i(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var s=t.space||"";"number"==typeof s&&(s=Array(s+1).join(" "));var i,a="boolean"==typeof t.cycles&&t.cycles,o=t.replacer||function(e,t){return t},l=t.cmp&&(i=t.cmp,function(e){return function(t,s){var n={key:t,value:e[t]},r={key:s,value:e[s]};return i(n,r)}}),u=[];return function e(t,i,c,h){var d=s?"\n"+new Array(h+1).join(s):"",m=s?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),void 0!==(c=o.call(t,i,c))){if("object"!=typeof c||null===c)return JSON.stringify(c);if(n(c)){for(var f=[],p=0;p<c.length;p++){var _=e(c,p,c[p],h+1)||JSON.stringify(null);f.push(d+s+_)}return"["+f.join(",")+d+"]"}if(-1!==u.indexOf(c)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(c);var g=r(c).sort(l&&l(c));for(f=[],p=0;p<g.length;p++){var y=e(c,i=g[p],c[i],h+1);if(y){var v=JSON.stringify(i)+m+y;f.push(d+s+v)
}}return u.splice(u.indexOf(c),1),"{"+f.join(",")+d+"}"}}({"":e},"",e,0)}s.d(t,{sortedStringify:()=>i});var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},r=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},s=[];for(var i in e)t.call(e,i)&&s.push(i);return s}}}]);