(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[49693],{414879:(e,t,n)=>{"use strict";var s,a;n.r(t),n.d(t,{Months:()=>a,WeekDays:()=>s}),function(e){e[e.SUNDAY=1]="SUNDAY",e[e.MONDAY=2]="MONDAY",e[e.TUESDAY=3]="TUESDAY",e[e.WEDNESDAY=4]="WEDNESDAY",e[e.THURSDAY=5]="THURSDAY",e[e.FRIDAY=6]="FRIDAY",e[e.SATURDAY=7]="SATURDAY"}(s||(s={})),function(e){e[e.JANUARY=0]="JANUARY",e[e.FEBRUARY=1]="FEBRUARY",e[e.MARCH=2]="MARCH",e[e.APRIL=3]="APRIL",e[e.MAY=4]="MAY",e[e.JUNE=5]="JUNE",e[e.JULY=6]="JULY",e[e.AUGUST=7]="AUGUST",e[e.SEPTEMBER=8]="SEPTEMBER",e[e.OCTOBER=9]="OCTOBER",e[e.NOVEMBER=10]="NOVEMBER",e[e.DECEMBER=11]="DECEMBER"}(a||(a={}))},936410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{monthsFullNames:()=>r,monthsShortNames:()=>i,weekDaysFullNames:()=>o,weekDaysMiniNames:()=>u,weekDaysShortNames:()=>l});var s=n(444372),a=n(414879);const r={[a.Months.JANUARY]:s.t(null,void 0,n(100200)),[a.Months.FEBRUARY]:s.t(null,void 0,n(581069)),[a.Months.MARCH]:s.t(null,void 0,n(193878)),[a.Months.APRIL]:s.t(null,void 0,n(528896)),[a.Months.MAY]:s.t(null,void 0,n(125734)),[a.Months.JUNE]:s.t(null,void 0,n(661487)),[a.Months.JULY]:s.t(null,void 0,n(206608)),[a.Months.AUGUST]:s.t(null,void 0,n(811081)),[a.Months.SEPTEMBER]:s.t(null,void 0,n(632179)),[a.Months.OCTOBER]:s.t(null,void 0,n(137997)),[a.Months.NOVEMBER]:s.t(null,void 0,n(604607)),[a.Months.DECEMBER]:s.t(null,void 0,n(890082))},i={[a.Months.JANUARY]:s.t(null,void 0,n(562310)),[a.Months.FEBRUARY]:s.t(null,void 0,n(302507)),[a.Months.MARCH]:s.t(null,void 0,n(92767)),[a.Months.APRIL]:s.t(null,void 0,n(227072)),[a.Months.MAY]:s.t(null,{context:"short"},n(13132)),[a.Months.JUNE]:s.t(null,void 0,n(800429)),[a.Months.JULY]:s.t(null,void 0,n(853786)),[a.Months.AUGUST]:s.t(null,void 0,n(546450)),[a.Months.SEPTEMBER]:s.t(null,void 0,n(806816)),[a.Months.OCTOBER]:s.t(null,void 0,n(912179)),[a.Months.NOVEMBER]:s.t(null,void 0,n(526899)),[a.Months.DECEMBER]:s.t(null,void 0,n(532084))},o={[a.WeekDays.SUNDAY]:s.t(null,void 0,n(661480)),[a.WeekDays.MONDAY]:s.t(null,void 0,n(419573)),[a.WeekDays.TUESDAY]:s.t(null,void 0,n(682160)),[a.WeekDays.WEDNESDAY]:s.t(null,void 0,n(894226)),[a.WeekDays.THURSDAY]:s.t(null,void 0,n(879137)),[a.WeekDays.FRIDAY]:s.t(null,void 0,n(503570)),[a.WeekDays.SATURDAY]:s.t(null,void 0,n(130348))},l={[a.WeekDays.SUNDAY]:s.t(null,void 0,n(377493)),[a.WeekDays.MONDAY]:s.t(null,void 0,n(837150)),[a.WeekDays.TUESDAY]:s.t(null,void 0,n(811916)),[a.WeekDays.WEDNESDAY]:s.t(null,void 0,n(711532)),[a.WeekDays.THURSDAY]:s.t(null,void 0,n(771388)),[a.WeekDays.FRIDAY]:s.t(null,void 0,n(922928)),[a.WeekDays.SATURDAY]:s.t(null,void 0,n(232273))},u={[a.WeekDays.SUNDAY]:s.t(null,{context:"day_of_week"},n(875005)),[a.WeekDays.MONDAY]:s.t(null,{context:"day_of_week"},n(930961)),[a.WeekDays.TUESDAY]:s.t(null,{context:"day_of_week"},n(244254)),[a.WeekDays.WEDNESDAY]:s.t(null,{context:"day_of_week"},n(392578)),[a.WeekDays.THURSDAY]:s.t(null,{context:"day_of_week"},n(608765)),[a.WeekDays.FRIDAY]:s.t(null,{context:"day_of_week"},n(923230)),
[a.WeekDays.SATURDAY]:s.t(null,{context:"day_of_week"},n(894748))}},631078:(e,t,n)=>{"use strict";n.d(t,{useWatchedValueReadonly:()=>a});var s=n(50959);const a=(e,t=!1,n=[])=>{const a="watchedValue"in e?e.watchedValue:void 0,r="defaultValue"in e?e.defaultValue:e.watchedValue.value(),[i,o]=(0,s.useState)(a?a.value():r);return(t?s.useLayoutEffect:s.useEffect)((()=>{if(a){o(a.value());const e=e=>o(e);return a.subscribe(e),()=>a.unsubscribe(e)}return()=>{}}),[a,...n]),i}},266807:e=>{e.exports={wrapper:"wrapper-hPiAkrn3",timezone:"timezone-hPiAkrn3",largePadding:"largePadding-hPiAkrn3",sessionDayWrapper:"sessionDayWrapper-hPiAkrn3",nowWrapper:"nowWrapper-hPiAkrn3",now:"now-hPiAkrn3",sessionDay:"sessionDay-hPiAkrn3",weekDay:"weekDay-hPiAkrn3",sessionDaySegments:"sessionDaySegments-hPiAkrn3",timeMarkWrapper:"timeMarkWrapper-hPiAkrn3",timeMarkSegment:"timeMarkSegment-hPiAkrn3",timeMark:"timeMark-hPiAkrn3",timeMarkSegmentAlignByEnds:"timeMarkSegmentAlignByEnds-hPiAkrn3",segment:"segment-hPiAkrn3",small:"small-hPiAkrn3",start:"start-hPiAkrn3",end:"end-hPiAkrn3",active:"active-hPiAkrn3",green:"green-hPiAkrn3",orange:"orange-hPiAkrn3",blue:"blue-hPiAkrn3",gray:"gray-hPiAkrn3",tooltip:"tooltip-hPiAkrn3",time:"time-hPiAkrn3"}},256042:(e,t,n)=>{"use strict";n.d(t,{FullSessionScheduleRenderer:()=>A});var s=n(50959),a=n(497754),r=n(650151),i=n(444372),o=n(631078),l=n(623213),u=n(266807);const d=new WeakMap;function c(e){return d.has(e)||d.set(e,(0,l.randomHash)()),(0,r.ensureDefined)(d.get(e))}const y=new Map([[0,u.green],[1,u.orange],[2,u.blue],[3,u.gray]]),D=new Map([[0,i.t(null,void 0,n(241410))],[1,i.t(null,void 0,n(236018))],[2,i.t(null,void 0,n(673897))],[3,i.t(null,void 0,n(762464))]]),f=i.t(null,void 0,n(763538));function m(e){const{segment:t,forceStart:n,forceEnd:r}=e,i=t.end.value-t.start.value,o=i<.03,l={left:100*t.start.value+"%",width:`calc(${100*i}% + ${o?2:0}px)`},d=a(u.segment,y.get(t.type),(n||t.start.isFirstOrLastPoint)&&u.start,(r||t.end.isFirstOrLastPoint)&&u.end,o&&u.small,"common-tooltip-html","apply-common-tooltip"),c=function(e,t){return`<div class="${u.tooltip}">\n\t\t<span class="${y.get(t)}">${D.get(t)}</span>\n\t\t<span class="${u.time}">${e}</span>\n\t</div>`}(t.tooltip,t.type);return s.createElement("div",{className:d,style:l,"data-tooltip":c})}function h(e){const{sessionDay:t}=e,n=t.entries.map(((e,n)=>s.createElement(m,{key:`${c(e)}Segment`,segment:e,forceStart:0===n&&3===e.type,forceEnd:n===t.entries.length-1&&3===e.type}))),r=a(u.sessionDay,t.isActive&&u.active);return s.createElement("div",{className:r},s.createElement("div",{className:u.weekDay},t.title),s.createElement("div",{className:u.sessionDaySegments},n))}function v(e){const{sessionDays:t,currentTimeMark:n}=e,r=[],i=parseInt(Object.keys(t).filter((e=>t[parseInt(e)].isActive))[0]),o=t[i],l=o.entries.filter((e=>e.start.value<=n&&e.end.value>=n))[0];!l.start.isFirstOrLastPoint&&l.showStartForLastEntry?r.push(o.entries[o.entries.length-1].start):r.push(l.start);const d=!l.end.isFirstOrLastPoint&&l.showEndForFirstEntry?o.entries[0].end:l.end
;if(r[0].value!==d.value&&r.push(d),0===r.length)return null;r.sort(((e,t)=>e.value-t.value));const y=r.map((e=>s.createElement("div",{key:c(e),className:u.timeMark},e.title))),D=100*(2===r.length?r[1].value-r[0].value:0),f=a(D>12&&u.timeMarkSegmentAlignByEnds,u.timeMarkSegment);return s.createElement("div",{className:u.sessionDay},s.createElement("div",{className:u.weekDay}),s.createElement("div",{className:u.timeMarkWrapper},s.createElement("div",{className:f,style:{left:100*r[0].value+"%",width:`${D}%`}},y)))}function A(e){const{className:t,timezone:n,showAllDays:r,timeZoneClassName:i}=e,l=(0,o.useWatchedValueReadonly)({watchedValue:e.sessionDays}),d=(0,o.useWatchedValueReadonly)({watchedValue:e.now}),c=Object.values(l).filter((e=>e.isActive))[0],y=a(t,u.wrapper);return s.createElement("div",{className:y},s.createElement("div",{className:u.sessionDayWrapper},r?s.createElement(s.Fragment,null,Object.values(l).map(((e,t)=>s.createElement(h,{key:t,sessionDay:e})))):s.createElement(h,{sessionDay:c}),s.createElement("div",{className:u.nowWrapper},s.createElement("div",{className:u.now,style:{left:100*d+"%"}}))),s.createElement(v,{sessionDays:l,currentTimeMark:d}),s.createElement("div",{className:a(u.timezone,i,r&&u.largePadding)},`${f}: ${n}`))}},347733:(e,t,n)=>{"use strict";n.d(t,{FullSessionScheduleViewModel:()=>ne});var s=n(954531),a=n(536794),r=n(493239),i=n(820028),o=n(388741);function l(e){return e/r.minutesPerDay}function u(e){return Math.round(e*r.minutesPerDay)}var d=n(745470),c=n(82593),y=n(650151),D=n(586563),f=n(414879);const m=[f.WeekDays.SUNDAY,f.WeekDays.MONDAY,f.WeekDays.TUESDAY,f.WeekDays.WEDNESDAY,f.WeekDays.THURSDAY,f.WeekDays.FRIDAY,f.WeekDays.SATURDAY];function h(e,t){return(e+t+6)%7+1}function v(e){return t=>h(t,e)}const A=v(-1),E=v(1);var k=n(936410),p=n(909456);function S(e){for((0,y.assert)(Number.isInteger(e),"timeMinutes expected to be integer number");e>r.minutesPerDay;)e-=r.minutesPerDay;const t=e%60,n=(e-t)/60;return(0,p.numberToStringWithLeadingZero)(n,2)+":"+(0,p.numberToStringWithLeadingZero)(t,2)}function M(e,t){return`${e} â€” ${t}`}function g(e,t){return`${k.weekDaysShortNames[e]} ${S(t)}`}function w(e,t,n,s){(0,y.assert)(t!==r.minutesPerDay,"Start time expected to be normalized (24:00 as range start is not allowed)"),(0,y.assert)(0!==s,"End time expected to be normalized (00:00 as range end is not allowed)");const a=function(e,t,n,s){const a=e*r.minutesPerDay+t;let i=n*r.minutesPerDay+s;return i<a&&(i+=7*r.minutesPerDay),i-a}(e,t,n,s);return a<r.minutesPerDay||a===r.minutesPerDay&&0===t?function(e,t){return M(S(e),S(t))}(t,s):function(e,t,n,s){return M(g(e,t),g(n,s))}(e,t,n,s)}function P(e,t,n,s){return{start:e,end:t,type:n,tooltip:s,showStartForLastEntry:!1,showEndForFirstEntry:!1}}function W(e){return{value:e,title:S(u(e)),isFirstOrLastPoint:!0}}function R(e){return 3!==e.type}function Y(e,t){return{dayIndex:e,entries:t.filter(R)}}function N(e,t,n,s=t){const a=n(t),r=e[a];return a!==s&&0===r.entries.length?N(e,a,n,s):Y(a,e[a].entries)}function U(e){return(t,n)=>N(t,n,e)}
const T=U(A),_=U(E);function I(e,t,n,s){return(a,r,i)=>void 0===a?[s,i]:a===e?[t,n(r)]:[a,r]}const b=I(1,0,E,0),x=I(0,1,A,1);function F(e,t,n,s,a){const[r,i]=b(e,t,a),[o,l]=x(n,s,a);(0,y.assert)(t!==n||r<o,`Days are same (${t}) but prev entry time (${r}) >= next entry time (${o})`);const d=u(r),c=u(o);return P(W(i!==a?0:r),W(l!==a?1:o),3,w(i,d,l,c))}function O(e,t,n,s,a){return F(e?.end?.value,t,n?.start?.value,s,a)}function B(e){const t=[...e.entries];for(let n=1;n<e.entries.length;n++){const s=e.entries[n-1],a=e.entries[n];if(a.start.value!==s.end.value){const n=O(s,e.dayIndex,a,e.dayIndex,e.dayIndex);t.push(n)}}return t.sort(((e,t)=>e.start.value-t.start.value)),t}function L(e,t){const n=(0,c.default)(t.entries),s=t.dayIndex,a=(0,y.ensureDefined)((0,d.default)(e.entries));return 0===a.start.value?[]:[O(n,s,a,e.dayIndex,e.dayIndex)]}function V(e,t){const n=(0,d.default)(t.entries),s=t.dayIndex,a=(0,y.ensureDefined)((0,c.default)(e.entries));return 1===a.end.value?[]:[O(a,e.dayIndex,n,s,e.dayIndex)]}function C(e,t){const n={thisDay:Y(e,t[e].entries),prevDay:T(t,e),nextDay:_(t,e)};return function({thisDay:e,prevDay:t,nextDay:n}){if(0===e.entries.length)return[O((0,c.default)(t.entries),t.dayIndex,(0,d.default)(n.entries),n.dayIndex,e.dayIndex)]}(n)??function({thisDay:e,prevDay:t,nextDay:n}){const s=e.dayIndex;if(t.dayIndex!==s||n.dayIndex!==s)return;const r=e.entries,i=(0,y.ensureDefined)((0,d.default)(r)),o=(0,y.ensureDefined)((0,c.default)(r));return[0!==i.start.value?F(0,s,i.start.value,s,s):void 0,...B(e),1!==o.end.value?F(o.end.value,s,1,s,s):void 0].filter(a.isExistent)}(n)??function(e){return[...L(e.thisDay,e.prevDay),...B(e.thisDay),...V(e.thisDay,e.nextDay)]}(n)}function $(e,t,n,s){const[a,r]=e[t],i=l(a),o=l(r),u=W(i),d=W(o);return 0===t&&e.length>1&&(d.isFirstOrLastPoint=!1),1===t&&e.length>1&&(u.isFirstOrLastPoint=!1),P(u,d,n,s)}function z(e,t,n,s){const a=e,i=t+n,o=[],u=t,D=Math.min(r.minutesPerDay,i),f=[[u,D]];let m;if(o.push(a),i>D){m=h(a,Math.ceil((i-D)/r.minutesPerDay));const e=[0,i%r.minutesPerDay];f.push(e),o.push(m)}const v=function(e,t,n){const s=(0,y.ensureDefined)((0,d.default)(e))[0],a=(0,y.ensureDefined)((0,c.default)(e))[1];if(void 0===n){const i=e.map((e=>e[1]-e[0])).reduce(((e,t)=>e+t));n=a===r.minutesPerDay?t:h(t,Math.floor(l(s+i)))}return w(t,s,n,a)}(f,a,m),A=[];for(let e=0;e<f.length;e++){const t=$(f,e,s,v);A.push([t,o[e]])}return A}var J=n(335524);const H=(0,n(819751).default)(m.map((e=>[e,{title:k.weekDaysShortNames[e],isActive:!1,entries:[]}])));function G(e){return(t,n)=>{return s=(0,y.ensureDefined)(e(t)),a=(0,y.ensureDefined)(e(n)),s.start.value===a.start.value&&s.end.value===a.end.value;var s,a}}const j=G(d.default),Z=G(c.default);function q(e,t){return z(e.sessionStartDayOfWeek(),e.start(),e.length(),t)}function K(e,t){t.forEach((t=>function(e,t,n){const s=e[n].entries;s.push(t),s.sort(((e,t)=>e.start.value-t.start.value))}(e,t[0],t[1])))}function Q(e,t,n){for(const s of t){K(e,q(s,n))}}function X(e,t){
return e.type===t.type&&(3===e.type||t.end.value-t.start.value+e.end.value-e.start.value<=1)}function ee(e,t){const n=function(e){if(null===e)return new Map;if(void 0===e.subsessions)return new Map([[0,new J.SessionsSpec(e.timezone,e.session_display??e.session,e.session_holidays,e.corrections)]]);const t="regular",n="premarket",s="postmarket",a=[t,n,s],r=new Map;for(const i of a){let a=null;switch(i){case t:a=0;break;case n:a=1;break;case s:a=2}if(null!==a){const t=e.subsessions.find((e=>e.id===i));void 0!==t&&r.set(a,new J.SessionsSpec(e.timezone,t["session-display"]||t.session,e.session_holidays,t["session-correction"]))}}return r}(e);t=t??(0,r.utc_to_cal)((0,r.get_timezone)(e?.timezone??"Etc/UTC"),Date.now());const s=(t?.getUTCDay()??(new Date).getDay())%7+1;const a=(0,D.deepCopy)(H);a[s].isActive=!0;for(const e of Array.from(n.keys())){const s=(0,y.ensureDefined)(n.get(e)),r=s.getWeekIndex(t);Q(a,s.getEntriesForWeek(r).list(),e)}return function(e){const t=new Map;for(const n of m)t.set(n,C(n,e));for(const n of m)e[n].entries=(0,y.ensureDefined)(t.get(n))}(a),function(e){for(const t of m){const n=e[t].entries,s=(0,y.ensureDefined)((0,d.default)(n));X(s,(0,y.ensureDefined)((0,c.default)(e[A(t)].entries)))&&(s.start.isFirstOrLastPoint=!1);const a=(0,y.ensureDefined)((0,c.default)(n));X(a,(0,y.ensureDefined)((0,d.default)(e[E(t)].entries)))&&(a.end.isFirstOrLastPoint=!1)}}(a),function(e){for(const t of m){const n=e[t].entries;if(1===n.length)continue;const s=A(t),a=E(t),r=(0,y.ensureDefined)((0,c.default)(n)),i=(0,y.ensureDefined)((0,d.default)(n));i.start.isFirstOrLastPoint||(i.showStartForLastEntry=Z(n,e[s].entries)),r.end.isFirstOrLastPoint||(r.showEndForFirstEntry=j(n,e[a].entries))}}(a),{newSessionsDays:a,newTodaySession:a[s]}}function te(e){return(0,r.get_cal_from_unix_timestamp_ms)((0,r.get_timezone)(e.timezone),window.ChartApiInstance.serverTime()-1e3*(0,o.getSymbolDelaySeconds)(e))}class ne{constructor(e){this.sessionsDays=new i.WatchedValue((0,a.clone)(H)),this.todaySession=new i.WatchedValue((0,a.clone)({entries:[]})),this._currentTime=new i.WatchedValue(-1),this._symbolInfo=e.symbolInfo().spawn(),this._symbolInfo.subscribe(this._updateEntriesBySubSessions.bind(this),{callWithLast:!0}),this._timeIntervalId=setInterval(this._updateTodayWithOffsets.bind(this),6e4)}destroy(){this._symbolInfo.destroy(),clearInterval(this._timeIntervalId)}currentTimeValue(){return this._currentTime.readonly()}timezone(){const e=this._symbolInfo.value();return null===e?"":(0,s.timezoneTitle)(e.timezone)}_updateEntriesBySubSessions(e){this._updateTodayWithOffsets();const{newSessionsDays:t,newTodaySession:n}=ee(e,null===e?null:te(e));this.sessionsDays.setValue(t),this.todaySession.setValue(n)}_updateTodayWithOffsets(){const e=this._symbolInfo.value();if(null===e)return void this._currentTime.setValue(-1);const t=this._currentTime.value(),n=l((0,r.get_minutes_from_midnight)(te(e)));this._currentTime.setValue(n),n<t&&this._updateEntriesBySubSessions(e)}}}}]);