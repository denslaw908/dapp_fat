(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[81687,47365],{196726:(e,t,s)=>{"use strict";function i(e){e.cancelable&&e.preventDefault()}function o(e){return t=>{i(t),e(t)}}s.d(t,{preventDefault:()=>i,wrapHandlerWithPreventEvent:()=>o})},660439:(e,t,s)=>{"use strict";s.d(t,{calculateMinMax:()=>E,collectAllPaths:()=>k,compareTwoCollectionsByIds:()=>S,findFirst:()=>C,indexOf:()=>f,intersect:()=>b,join:()=>v,lowerbound:()=>a,lowerboundExt:()=>l,mapEntriesGenerator:()=>y,minMax:()=>T,moveAfter:()=>_,moveBefore:()=>p,moveToHead:()=>d,nestedMapGenerator:()=>w,removeEmptyObjectsFromRecordInplace:()=>M,removeItemFromArray:()=>m,revertRecord:()=>L,subtract:()=>h,sum:()=>g,upperbound:()=>u});var i=s(715943),o=s(182433),r=s(650151);function n(e,t){return e<t}function l(e,t,s,i,o){let r=o-i;for(;0<r;){const o=r>>1,n=i+o;s(e(n),t)?(i=n+1,r-=o+1):r=o}return i}function a(e,t,s,i=0,o=e.length){return l((t=>e[t]),t,s,i,o)}function c(e,t,s=0,i=e.length){return a(e,t,n,s,i)}function u(e,t,s,i=0,o=e.length){let r=o-i;for(;0<r;){const o=r>>1,n=i+o;s(t,e[n])?r=o:(i=n+1,r-=o+1)}return i}function h(e,t){return e.filter((e=>!t.includes(e)))}function d(e,t){const s=e.indexOf(t);return s<0?e.slice():[t].concat(e.slice(0,s)).concat(e.slice(s+1))}function _(e,t,s){const i=new Set(t),o=[],r=[],n=[];return e.forEach(((e,t)=>{i.has(e)?r.push(e):(o.push(e),n.push(t))})),s=s<e.length-1?c(n,s+1):o.length,o.splice(s,0,...r),{newItems:o,movedItemsStartIndex:s}}function p(e,t,s){const i=new Set(t),o=[],r=[],n=[];return e.forEach(((e,t)=>{i.has(e)?r.push(e):(o.push(e),n.push(t))})),s=s<=e.length-1?c(n,s):o.length,o.splice(s,0,...r),{newItems:o,movedItemsStartIndex:s}}function b(e,t){const s=new Set;return e.forEach((e=>{t.has(e)&&s.add(e)})),s}function v(e,t){const s=new Set(e);return t.forEach((e=>s.add(e))),s}function m(e,t){const s=e.indexOf(t);(0,r.assert)(-1!==s,"Item is not found"),e.splice(s,1)}function C(e,t){for(const s of e)if(t(s))return s;return null}function f(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return-1}function S(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s].id()!==t[s].id())return!1;return!0}function g(e){return e.reduce(((e,t)=>e+t),0)}function*y(e){for(const[t,s]of e)yield[t,s]}function*w(e,t){for(const[s,i]of e)if(void 0===t)for(const[,e]of i)yield[s,e];else{const e=i.get(t);void 0!==e&&(yield[s,e])}}function T(e){return[Math.min(...e),Math.max(...e)]}function E(e,t){return T(e.map(t))}function P(e){for(let t=e.length-1;t>=0;t--)Array.isArray(e[t])?(P(e[t]),(0,i.default)(e[t])&&e.splice(t,1)):(0,o.default)(e[t])&&(M(e[t]),(0,i.default)(e[t])&&e.splice(t,1))}function M(e){const t=Object.keys(e);for(const s of t)Array.isArray(e[s])?(P(e[s]),(0,i.default)(e[s])&&delete e[s]):(0,o.default)(e[s])&&(M(e[s]),(0,i.default)(e[s])&&delete e[s]);return e}function I(e,t,s){const i=Object.keys(e);for(const r of i){const i=t?`${t}.${r}`:r;(0,o.default)(e[r])?I(e[r],i,s):s.push(i)}}function k(e){const t=[];return I(e,"",t),t}function L(e){
return Object.entries(e).reduce(((e,[t,s])=>(e[s]=t,e)),{})}},910282:(e,t,s)=>{"use strict";s.d(t,{CHART_FONT_FAMILY:()=>n,CHART_MONOSPACE_FONT_FAMILY:()=>l});var i=s(314802);const o="'Trebuchet MS', Roboto, Ubuntu, sans-serif",r=`-apple-system, BlinkMacSystemFont, ${o}`;let n=((0,i.isOnMobileAppPage)("old"),o);const l="monospace";{const e=["U+2E80-2FD5","U+3040-309F","U+1B100-1B12F","U+1AFF0-1AFFF","U+1B000-1B0FF","U+1B130-1B16F","U+3190-319F","U+30A0-30FF","U+31F0-31FF","U+3400-4DBF","U+4E00-9FFF","U+0E00-0E7F"],t=n;(async()=>{if(!/iPhone OS 15_\d+?/.test(navigator.userAgent))return r;{if(["kr","zh_CN","zh_TW"].includes(window.locale))return n;const t=new FontFace("ChartIosFont","local(Helvetica), local(Arial)",{unicodeRange:e.join(", ")});try{return document.fonts.add(await t.load()),`ChartIosFont, ${r}`}catch(e){return n}}})().then((e=>{t===n&&(n=e)}))}},584317:(e,t,s)=>{"use strict";s.d(t,{DialogRenderer:()=>o});var i=s(820028);class o{constructor(){this._container=document.createElement("div"),this._visibility=new i.WatchedValue(!1),this._rootInstance=null}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},912614:(e,t,s)=>{"use strict";s.d(t,{getTranslatedInputTitle:()=>r});var i=s(444372);const o={PercentageLTP:"Percentage LTP",Labels:"Pane labels",LineFills:"Line fills"};function r(e){return i.t(o[e]??e,{context:"input"},s(932856))}},312520:(e,t,s)=>{"use strict";s.d(t,{MouseEventHandler:()=>v,defaultPreventedHandler:()=>p,getClickPosition:()=>d,isTouchMouseEvent:()=>_});var i=s(481251),o=s(650151),r=s(536794),n=s(638456),l=s(196726),a=s(822961);let c=2;const u=n.isSafari?"click":"auxclick",h={treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!1,ignoreClickAndTapOnDblClickOrDblTap:!1};function d(e){if(_(e))return{x:e.clientX,y:e.clientY};if("touches"in(t=e)&&void 0!==t.touches){if(1===e.touches.length){const t=(0,o.ensureNotNull)(e.target).getBoundingClientRect(),s=e.touches[0];return{x:s.clientX-t.left,y:s.clientY-t.top}}return null}var t;return{x:e.offsetX,y:e.offsetY}}function _(e){return"isTouch"in e&&"stylus"in e}function p(e){return t=>{t.preventDefault(),e(t)}}function b(e,t){let s=!1;return{clickOrTap:(...i)=>{t?.()?e.clickOrTap(...i):(s=!1,setTimeout((()=>!s&&e.clickOrTap(...i)),501))},doubleClickOrDoubleTap:(...t)=>{s=!0,e.doubleClickOrDoubleTap?.(...t)}}}class v{constructor(e,t,s){if(this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._touchMoveStartPosition=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRootMouseEvents=null,
this._unsubscribeRootTouchEvents=null,this._unsubscribePinchEvents=null,this._unsubscribeTargetElementEvents=null,this._pinchInfo=null,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!n.CheckMobile.iOS(),this._onFirefoxOutsideMouseUp=e=>{this._mouseUpHandler(e)},this._onMobileSafariDoubleClick=e=>{if(this._firesTouchEvents(e)){const t=this._makeCompatEvent(e);if(++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(C(e),this._tapPosition);s<30&&!this._cancelTap&&this._processTouchEvent(t,this._handlers.doubleTapEvent),this._resetTapTimeout()}}else{const t=this._makeCompatEvent(e);if(++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(C(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}}},this._target=e,this._options=(0,r.merge)((0,r.clone)(h),s||{}),this._options.ignoreClickAndTapOnDblClickOrDblTap){if(t.mouseClickEvent&&t.mouseDoubleClickEvent){const e=b({clickOrTap:t.mouseClickEvent.bind(t),doubleClickOrDoubleTap:t.mouseDoubleClickEvent.bind(t)});t.mouseClickEvent=e.clickOrTap,t.mouseDoubleClickEvent=e.doubleClickOrDoubleTap}if(t.tapEvent&&t.doubleTapEvent){const e=b({clickOrTap:t.tapEvent.bind(t),doubleClickOrDoubleTap:t.doubleTapEvent.bind(t)});t.tapEvent=e.clickOrTap,t.doubleTapEvent=e.doubleClickOrDoubleTap}}this._handlers=t,this._init()}destroy(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),null!==this._unsubscribePinchEvents&&(this._unsubscribePinchEvents(),this._unsubscribePinchEvents=null),null!==this._unsubscribeTargetElementEvents&&(this._unsubscribeTargetElementEvents(),this._unsubscribeTargetElementEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()}_mouseEnterHandler(e){this._unsubscribeMousemove&&this._unsubscribeMousemove();const t=this._mouseMoveHandler.bind(this);if(this._unsubscribeMousemove=()=>{this._target.removeEventListener("mousemove",t)},this._target.addEventListener("mousemove",t),this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e);this._processMouseEvent(s,this._handlers.mouseEnterEvent),this._acceptMouseLeave=!0}_resetClickTimeout(){
null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_resetTapTimeout(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_mouseMoveHandler(e){if(this._mousePressed||null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseMoveEvent),this._acceptMouseLeave=!0}_touchMoveHandler(e){const t=g(e.changedTouches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t)return;if(this._lastTouchEventTimeStamp=S(e),null!==this._pinchInfo)return;if(this._preventTouchDragProcess)return;this._pinchPrevented=!0;const s=this._touchMouseMoveWithDownInfo(C(t),(0,o.ensureNotNull)(this._touchMoveStartPosition)),{xOffset:i,yOffset:r,manhattanDistance:n}=s;if(this._touchMoveExceededManhattanDistance||!(n<5)){if(!this._touchMoveExceededManhattanDistance){const e=.5*i,t=r>=e&&!this._options.treatVertTouchDragAsPageScroll,s=e>r&&!this._options.treatHorzTouchDragAsPageScroll;t||s||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}if(!this._preventTouchDragProcess){const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.touchMoveEvent),(0,l.preventDefault)(e)}}}_mouseMoveWithDownHandler(e){if(0!==e.button)return;if(this._options.isMouseMoveHandlingEnabled&&!this._options.isMouseMoveHandlingEnabled?.())return;const t=this._touchMouseMoveWithDownInfo(C(e),(0,o.ensureNotNull)(this._mouseMoveStartPosition)),{manhattanDistance:s}=t;if(s>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick){const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.pressedMouseMoveEvent)}}_touchMouseMoveWithDownInfo(e,t){const s=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return{xOffset:s,yOffset:i,manhattanDistance:s+i}}_touchEndHandler(e){let t=g(e.changedTouches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t&&0===e.touches.length&&(t=e.changedTouches[0]),null===t)return;this._activeTouchId=null,this._lastTouchEventTimeStamp=S(e),this._clearLongTapTimeout(),this._touchMoveStartPosition=null,this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);const s=this._makeCompatEvent(e,t);if(this._processTouchEvent(s,this._handlers.touchEndEvent),++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:e}=this._touchMouseMoveWithDownInfo(C(t),this._tapPosition);e<30&&!this._cancelTap&&this._processTouchEvent(s,this._handlers.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processTouchEvent(s,this._handlers.tapEvent),this._handlers.tapEvent&&(0,l.preventDefault)(e));0===this._tapCount&&(0,l.preventDefault)(e),0===e.touches.length&&this._longTapActive&&(this._longTapActive=!1,(0,
l.preventDefault)(e))}_touchCancelHandler(e){this._touchEndHandler(e)}_mouseUpHandler(e){if(0!==e.button)return;const t=this._makeCompatEvent(e);if(this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),n.isFF){this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(e))if(this._processMouseEvent(t,this._handlers.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(C(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processMouseEvent(t,this._handlers.mouseClickEvent)}_clearLongTapTimeout(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}_touchStartHandler(e){if(null!==this._activeTouchId)return this._clearLongTapTimeout(),void this._resetTapTimeout();const t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=S(e);const s=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartPosition=C(t),this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{const t=this._touchMoveHandler.bind(this),i=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=()=>{s.removeEventListener("touchmove",t),s.removeEventListener("touchend",i)},s.addEventListener("touchmove",t,{passive:!1}),s.addEventListener("touchend",i,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),240)}const i=this._makeCompatEvent(e,t);this._processTouchEvent(i,this._handlers.touchStartEvent),this._tapTimeoutId||(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapPosition=C(t))}_wheelClickHandler(e){if(1!==e.button)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.wheelClickEvent)}_mouseDownHandler(e){if(0!==e.button)return;if(this._options.isMouseMoveHandlingEnabled&&!this._options.isMouseMoveHandlingEnabled?.())return;const t=this._target.ownerDocument.documentElement;n.isFF&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartPosition=C(e),this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{const e=this._mouseMoveWithDownHandler.bind(this),s=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=()=>{t.removeEventListener("mousemove",e),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",e),t.addEventListener("mouseup",s)}if(this._mousePressed=!0,this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e)
;this._processMouseEvent(s,this._handlers.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickPosition=C(e))}_init(){const e=this._mouseEnterHandler.bind(this);this._target.addEventListener("mouseenter",e);const t=this._touchCancelHandler.bind(this);this._target.addEventListener("touchcancel",t);{const e=this._target.ownerDocument,t=e=>!e.target||!this._target.contains(e.target),s=e=>{if(!t(e))return;const s=e.changedTouches[0];this._lastTouchEventTimeStamp=S(e),this._processTouchEvent(this._makeCompatEvent(e,s),this._handlers.touchStartOutsideEvent)},i=e=>{t(e)&&!this._firesTouchEvents(e)&&this._processMouseEvent(this._makeCompatEvent(e),this._handlers.mouseDownOutsideEvent)};this._unsubscribeOutsideTouchEvents=()=>{e.removeEventListener("touchstart",s)},this._unsubscribeOutsideMouseEvents=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",s,{passive:!0})}n.CheckMobile.iOS()&&(this._unsubscribeMobileSafariEvents=()=>{this._target.removeEventListener("dblclick",this._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick));const s=this._mouseLeaveHandler.bind(this);this._target.addEventListener("mouseleave",s);const i=this._contextMenuHandler.bind(this);this._target.addEventListener("contextmenu",i);const o=this._touchStartHandler.bind(this);let r;this._target.addEventListener("touchstart",o,{passive:!0}),n.isChrome&&(r=e=>{if(1===e.button)return e.preventDefault(),!1},this._target.addEventListener("mousedown",r));const l=this._mouseDownHandler.bind(this);this._target.addEventListener("mousedown",l);const a=this._wheelClickHandler.bind(this);this._target.addEventListener(u,a);const c=()=>{};this._target.addEventListener("touchmove",c,{passive:!1}),this._unsubscribeTargetElementEvents=()=>{this._target.removeEventListener("mouseleave",s),this._target.removeEventListener("contextmenu",i),this._target.removeEventListener("touchstart",o),r&&this._target.removeEventListener("mousedown",r),this._target.removeEventListener("mousedown",l),this._target.removeEventListener(u,a),this._target.removeEventListener("touchmove",c)},this._initPinch()}_initPinch(){if(void 0===this._handlers.pinchStartEvent&&void 0===this._handlers.pinchEvent&&void 0===this._handlers.pinchEndEvent)return;const e=e=>this._checkPinchState(e.touches);this._target.addEventListener("touchstart",e,{passive:!0});const t=e=>{if(null===this._pinchInfo)return;const t=g(e.touches,(0,o.ensureNotNull)(this._activeTouchId)),s=g(e.touches,this._pinchInfo.secondTouchId);if(t&&s&&void 0!==this._handlers.pinchEvent){const{startPinchDistance:i,startPinchMiddlePoint:o}=this._pinchInfo,r=f(t,s)/i,n=m(this._target);this._handlers.pinchEvent(o,{x:t.clientX-n.left,y:t.clientY-n.top},{x:s.clientX-n.left,y:s.clientY-n.top},r),(0,l.preventDefault)(e)}};this._target.addEventListener("touchmove",t,{passive:!1});const s=e=>this._checkPinchState(e.touches)
;this._target.addEventListener("touchend",s),this._unsubscribePinchEvents=()=>{this._target.removeEventListener("touchstart",e),this._target.removeEventListener("touchmove",t),this._target.addEventListener("touchend",s)}}_checkPinchState(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)}_startPinch(e){if(void 0!==this._handlers.pinchStartEvent&&null===this._pinchInfo){const t=m(this._target);let s,i;e[0].identifier===this._activeTouchId?(s=e[0],i=e[1]):(s=e[1],i=e[0]);const o={x:s.clientX-t.left,y:s.clientY-t.top},r={x:i.clientX-t.left,y:i.clientY-t.top},n={x:(o.x+r.x)/2,y:(o.y+r.y)/2};this._handlers.pinchStartEvent(n,o,r,{bothPointsOnTargetElement:this._target.contains(i.target)})&&(this._pinchInfo={startPinchDistance:f(s,i),startPinchMiddlePoint:n,secondTouchId:i.identifier})}this._clearLongTapTimeout()}_stopPinch(){null!==this._pinchInfo&&(this._pinchInfo=null,this._handlers.pinchEndEvent?.())}_mouseLeaveHandler(e){if(this._unsubscribeMousemove&&this._unsubscribeMousemove(),this._firesTouchEvents(e))return;if(!this._acceptMouseLeave)return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseLeaveEvent),this._acceptMouseLeave=!n.CheckMobile.iOS()}_longTapHandler(e){const t=g(e.touches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t)return;const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.longTapEvent),this._processTouchEvent(s,this._handlers.touchContextMenuEvent),this._cancelTap=!0,this._longTapActive=!0}_contextMenuHandler(e){if((0,l.preventDefault)(e),null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.contextMenuEvent),this._cancelClick=!0}_firesTouchEvents(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:S(e)<this._lastTouchEventTimeStamp+500}_processTouchEvent(e,t){(0,a.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e)}_processMouseEvent(e,t){window.TVD&&("mouseenter"===e.srcType||"mousemove"===e.srcType)&&c>0?c--:("mouseleave"!==e.srcType&&(0,a.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e))}_makeCompatEvent(e,t){const s=t||e,o=(0,i.default)((()=>this._target.getBoundingClientRect()||{left:0,top:0}));return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,get localX(){return s.clientX-o().left},get localY(){return s.clientY-o().top},ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,isTouch:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,stylus:"stylus"===t?.touchType,srcType:e.type,target:s.target,view:e.view,preventDefault:()=>{"touchstart"!==e.type&&(0,l.preventDefault)(e)}}}}function m(e){return e.getBoundingClientRect()||{left:0,top:0}}function C(e){return{x:e.pageX,y:e.pageY}}function f(e,t){const s=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(s*s+i*i)}
function S(e){return e.timeStamp||performance.now()}function g(e,t){for(let s=0;s<e.length;++s)if(e[s].identifier===t)return e[s];return null}},766409:(e,t,s)=>{"use strict";s.d(t,{barFunctionByStyle:()=>o});var i=s(326488);function o(e,t){switch(e){case 12:return(0,i.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,i.barFunction)(t??"close");default:return(0,i.barFunction)("close","open")}}},840514:(e,t,s)=>{"use strict";s.d(t,{CustomSourceBase:()=>i});class i{constructor(e,t){this._id=e,this._model=t}id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},326301:(e,t,s)=>{"use strict";s.d(t,{getDataVendorString:()=>o});var i=s(931924);function o(e){return null==e||i.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},830101:(e,t,s)=>{"use strict";s.d(t,{alwaysShowLastPriceAndLastDayChange:()=>i,lastDayChangeAvailable:()=>o});s(931924);const i=!1,o=!0},765935:(e,t,s)=>{"use strict";var i;s.d(t,{PaneCursorType:()=>i}),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize",e[e.HorizontalResize=7]="HorizontalResize",e[e.DiagonalNeSwResize=8]="DiagonalNeSwResize",e[e.DiagonalNwSeResize=9]="DiagonalNwSeResize",e[e.Text=10]="Text",e[e.None=11]="None"}(i||(i={}))},316250:(e,t,s)=>{"use strict";s.d(t,{fromIndexedTo100:()=>u,fromLog:()=>p,fromPercent:()=>l,getCurrentModePriceText:()=>m,getOppositeModePriceText:()=>C,logFormulaForBase:()=>b,logFormulasAreSame:()=>v,toIndexedTo100:()=>h,toIndexedTo100Range:()=>d,toLog:()=>_,toPercent:()=>a,toPercentRange:()=>c});var i=s(397535),o=s(982367);const r={logicalOffset:4,coordOffset:1e-4},n=305;function l(e,t){return t<0&&(e=-e),e/100*t+t}function a(e,t){const s=100*(e-t)/(t||1);return t<0?-s:s}function c(e,t){const s=a(e.minValue(),t),o=a(e.maxValue(),t);return new i.PriceRange(s,o)}function u(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function h(e,t){const s=100*(e-t)/t+100;return t<0?-s:s}function d(e,t){const s=h(e.minValue(),t),o=h(e.maxValue(),t);return new i.PriceRange(s,o)}function _(e,t){const s=Math.min(10**n-t.coordOffset,Math.abs(e));if(s<1e-25)return 0;const i=(0,o.log10)(s+t.coordOffset)+t.logicalOffset;return e<0?-i:i}function p(e,t){const s=Math.abs(e);if(s<1e-15)return 0;const i=Math.pow(10,Math.min(s-t.logicalOffset,n))-t.coordOffset;return e<0?-i:i}function b(e){if(null===e)return r;const t=1/e;if(t>=r.coordOffset||t<1e-15)return r;const s=Math.abs(Math.log10(e));return{logicalOffset:s,
coordOffset:1/Math.pow(10,s)}}function v(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function m(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function C(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},14767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QuotesProvider:()=>n});var i=s(534197),o=s(547465),r=s(623213);class n{constructor(e="full",t){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new o.Delegate,this._quoteSymbolChanged=new o.Delegate,this._multiplexerType=e,this._hibernated=t,this._hibernated?.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,r.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}async quotesSnapshot(e){return(0,i.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession(),this._hibernated?.release()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,i.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,i.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},23076:(e,t,s)=>{"use strict";s.d(t,{SelectionRenderer:()=>u});var i=s(86441),o=s(934026),r=s(790188),n=s(731974),l=s(765935),a=s(320994);const c=r.colorsPalette["color-tv-blue-600"];class u extends a.BitmapCoordinatesPaneRenderer{constructor(e){super(),this._data=e||null}setData(e){this._data=e}hitTest(e){if(!this._data||!this._data.visible)return null;for(let t=0;t<this._data.points.length;t++){const s=this._data.points[t];if(s.point.subtract(e).length()<=6)return s.hitTestResult?s.hitTestResult:new n.HitTestResult(this._data.hittestResult,{pointIndex:s.pointIndex,cursorType:s.cursorType??l.PaneCursorType.Default})}return null}doesIntersectWithBox(e){return!!this._data&&this._data.points.some((t=>(0,o.pointInBox)(t.point,e)))}_drawImpl(e){if(null===this._data||!this._data.visible)return
;const{points:t,bgColors:s,vertOffset:o=0}=this._data;for(let n=0;n<t.length;++n){const{point:l,lineWidth:a}=t[n];(r=l,Number.isFinite(r.x)&&Number.isFinite(r.y))&&this._drawMarker(e,l.add((0,i.point)(0,o)),this._data,s[n],a)}var r}_drawMarker(e,t,s,o,r=1){const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e,{color:u=c,withOutline:d=!0}=s,_=Math.max(1,Math.floor(l))%2/2,p=(0,i.point)(Math.round(t.x*l)+_,Math.round(t.y*a)+_),b=h(p,Math.round(4*l));n.fillStyle=o,n.fill(d?h(p,Math.round(5*l)+_):b),n.fillStyle=u,b.addPath(h(p,Math.floor((4-r)*l))),n.fill(b,"evenodd")}}function h(e,t){const s=new Path2D;return s.arc(e.x,e.y,t,0,2*Math.PI,!0),s}},889858:(e,t,s)=>{"use strict";s.d(t,{SeriesBarColorer:()=>p});var i=s(790188),o=s(650151),r=s(170562),n=s(584785),l=s(522109);const a=(0,i.getHexColorByName)("color-minty-green-500"),c=(0,i.getHexColorByName)("color-ripe-red-500");function u(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function h(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function d(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function _(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class p extends l.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,s,i){const o=s;o.barColor=void 0,o.barBorderColor=void 0,o.barWickColor=void 0,o.isBarHollow=void 0,o.isBarUp=void 0,o.upColor=void 0,o.downColor=void 0,o.isTwoColorBar=void 0,o.isMergedBar=void 0;const r=this._series.properties();switch(r.childs().style.value()){case 2:case 14:case 15:this._applyLineStyle(e,t,s,i,r);break;case 18:this._applyLineStyle(e,t,s,i,r,!0);break;case 3:this._applyAreaStyle(s,r);break;case 16:this._applyHLCAreaStyle(e,t,s,i,r);break;case 0:this._applyBarStyle(e,s,i,r);break;case 17:case 1:case 19:this._applyCandleStyle(e,s,i,r);break;case 9:this._applyHollowCandleStyle(e,s,i,r);break;case 8:this._applyHAStyle(e,t,s,i,r);break;case 10:this._applyBaseLineStyle(e,t,s,i,r);break;case 12:this._applyHiLoStyle(t,s,r);break;case 13:this._applyColumnStyle(e,s,i,r);break;case 4:this._applyRenkoStyle(e,t,s,i,r);break;case 7:this._applyPBStyle(e,t,s,i,r);break;case 5:this._applyKagiStyle(e,t,s,i,r);break;case 6:this._applyPnfStyle(e,t,s,i,r);break;case 11:this._applyRangeStyle(e,t,s,i,r);break;case 20:this._applySVPStyle(e,s,i,r);break;case 21:this._applyHLCBarsStyle(e,s,i,r)}return s}static upColor(e,t){const s=e.childs(),i=s.style.value();switch(i){case 18:return{barColor:s.tpoStyle.childs().color.value()};case 20:return{
barColor:s.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:s.lineStyle.childs().color.value()};case 14:return{barColor:s.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:s.steplineStyle.childs().color.value()};case 3:return{barColor:s.areaStyle.childs().linecolor.value()};case 16:return{barColor:s.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:a};case 0:return{barColor:s.barStyle.childs().upColor.value()};case 17:return u(s.volFootprintStyle.childs());case 19:return u(s.volCandlesStyle.childs());case 1:return u(s.candleStyle.childs());case 9:return u(s.hollowCandleStyle.childs());case 8:return u(s.haStyle.childs());case 10:return{barColor:s.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:s.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:s.columnStyle.childs().upColor.value()};case 4:return d(s.renkoStyle.childs(),t);case 7:return d(s.pbStyle.childs(),t);case 5:return d(s.kagiStyle.childs(),t);case 6:return d(s.pnfStyle.childs(),t);case 11:0;const i=s.rangeStyle.childs(),o=i.barStyle.value()===r.RangeBarStyle.Bars;return{barColor:t?i.upColorProjection.value():o?i.upColor.value():i.candlesUpColor.value(),barBorderColor:t?i.upColorProjection.value():o?i.upColor.value():i.candlesBorderUpColor.value()};case 21:return{barColor:s.hlcBarsStyle.childs().color.value()}}(0,o.ensureNever)(i)}static downColor(e,t){const s=e.childs(),i=s.style.value();switch(i){case 2:return{barColor:s.lineStyle.childs().color.value()};case 18:return{barColor:s.tpoStyle.childs().color.value()};case 20:return{barColor:s.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:s.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:s.steplineStyle.childs().color.value()};case 3:return{barColor:s.areaStyle.childs().linecolor.value()};case 16:return{barColor:s.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:s.barStyle.childs().downColor.value()};case 17:return h(s.volFootprintStyle.childs());case 1:return h(s.candleStyle.childs());case 19:return h(s.volCandlesStyle.childs());case 9:return h(s.hollowCandleStyle.childs());case 8:return h(s.haStyle.childs());case 10:return{barColor:s.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:s.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:s.columnStyle.childs().downColor.value()};case 4:return _(s.renkoStyle.childs(),t);case 7:return _(s.pbStyle.childs(),t);case 5:return _(s.kagiStyle.childs(),t);case 6:return _(s.pnfStyle.childs(),t);case 11:0;const i=s.rangeStyle.childs(),o=i.barStyle.value()===r.RangeBarStyle.Bars;return{barColor:t?i.downColorProjection.value():o?i.downColor.value():i.candlesDownColor.value(),barBorderColor:t?i.downColorProjection.value():o?i.downColor.value():i.candlesBorderDownColor.value()};case 21:return{
barColor:s.hlcBarsStyle.childs().color.value()}}(0,o.ensureNever)(i)}_applyLineStyle(e,t,s,i,r,n){if(s.barColor=p.upColor(r).barColor,n)return;const l=this._findBar(e,t,i),a=this._series.barFunction()(l),c=this._series.priceScale(),u=this._series.firstValue();if(null==a||c.isEmpty()||null==u)return;const h=c.priceToCoordinate(a,u);s.barColor=(0,o.ensureNotNull)(this._series.lineColorAtYPercentFromTop(h/c.height()))}_applyAreaStyle(e,t){e.barColor=p.upColor(t).barColor}_applyHLCAreaStyle(e,t,s,i,o){const r=this._isUp(e,!1,i,this._series.data().first()?.index!==e)?p.upColor(o,t):p.downColor(o,t);s.barColor=r.barColor,s.barBorderColor=r.barBorderColor}_applyBarStyle(e,t,s,i){const o=this._isUp(e,!1,s,i.childs().barStyle.childs().barColorsOnPrevClose.value())?p.upColor(i):p.downColor(i);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyCandleStyle(e,t,s,i){const o=i.childs(),r=1===o.style.value()?o.candleStyle.childs():19===o.style.value()?o.volCandlesStyle.childs():o.volFootprintStyle.childs(),n=this._isUp(e,!1,s,r.barColorsOnPrevClose.value()&&this._series.data().first()?.index!==e),l=n?p.upColor(i):p.downColor(i);t.barColor=l.barColor,t.barBorderColor=l.barBorderColor,t.barWickColor=n?r.wickUpColor?r.wickUpColor.value():r.wickColor.value():r.wickDownColor?r.wickDownColor.value():r.wickColor.value()}_applyHollowCandleStyle(e,t,s,i){const o=i.childs().hollowCandleStyle.childs(),r=this._isUp(e,!1,s,this._series.data().first()?.index!==e),n=r?p.upColor(i):p.downColor(i);t.barColor=n.barColor,t.barBorderColor=n.barBorderColor,t.barWickColor=r?o.wickUpColor?o.wickUpColor.value():o.wickColor.value():o.wickDownColor?o.wickDownColor.value():o.wickColor.value();const l=this._findBar(e,!1,s);t.isBarHollow=l[1]<=l[4]}_applyHAStyle(e,t,s,i,o){const r=o.childs().haStyle.childs(),n=this._isUp(e,t,i,r.barColorsOnPrevClose.value()),l=n?p.upColor(o):p.downColor(o);s.barColor=l.barColor,s.barBorderColor=l.barBorderColor,s.barWickColor=n?r.wickUpColor.value():r.wickDownColor.value()}_applyBaseLineStyle(e,t,s,i,r){const n=this._findBar(e,t,i),l=r.childs().baselineStyle.childs(),a=this._series.priceScale(),c=Math.round(a.height()*(Math.abs(100-l.baseLevelPercentage.value())/100)),u=(0,o.ensureNotNull)(this._series.firstValue()),h=a.coordinateToPrice(c,u);n[4]>h?s.barColor=p.upColor(r,t).barColor:s.barColor=p.downColor(r,t).barColor}_applyHiLoStyle(e,t,s){const i=p.upColor(s,e);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyColumnStyle(e,t,s,i){const o=i.childs().columnStyle.childs(),r=this._isUp(e,!1,s,o.barColorsOnPrevClose.value())?p.upColor(i):p.downColor(i);t.color=r.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,s,i,o){const r=o.childs().renkoStyle.childs(),n=this._isUp(e,t,i,!1),l=n?p.upColor(o,t):p.downColor(o,t);s.barColor=l.barColor,s.barBorderColor=l.barBorderColor,s.barWickColor=n?r.wickUpColor.value():r.wickDownColor.value(),s.isBarUp=n}_applyPBStyle(e,t,s,i,o){const r=this._isUp(e,t,i,!1),n=r?p.upColor(o,t):p.downColor(o,t);s.barColor=n.barColor,s.barBorderColor=n.barBorderColor,s.isBarUp=r}
_applyKagiStyle(e,t,s,i,o){let r;s.upColor=p.upColor(o,t).barColor,s.downColor=p.downColor(o,t).barColor;const n=this._findBar(e,t,i);n[3]<n[6]&&n[6]<n[2]?(r=n[1]<=n[4],s.isTwoColorBar=!0):(r=n[1]<=n[4]?n[1]===n[6]:n[1]!==n[6],s.isTwoColorBar=!1),s.barColor=r?s.upColor:s.downColor,s.isBarUp=n[1]<=n[4]}_applyPnfStyle(e,t,s,i,o){const r=this._findBar(e,t,i)[6],n=r>0,l=p.upColor(o,t),a=p.downColor(o,t);s.isBarUp=n,s.isMergedBar=2===Math.abs(r),s.upColor=l.barColor,s.downColor=a.barColor,s.barColor=n?l.barColor:a.barColor}_applyRangeStyle(e,t,s,i,o){const n=o.childs().rangeStyle.childs(),l=n.barStyle.value()===r.RangeBarStyle.Bars,a=this._isUp(e,!1,i,!1),c=a?p.upColor(o,t):p.downColor(o,t),u=a?t?n.upColorProjection.value():l?void 0:n.candlesWickUpColor.value():t?n.downColorProjection.value():l?void 0:n.candlesWickDownColor.value();s.barColor=c.barColor,s.barBorderColor=c.barBorderColor,s.wickColor=u,s.barWickColor=u}_applySVPStyle(e,t,s,i){const o=this._isUp(e,!1,s,!1)?p.upColor(i,!1):p.downColor(i,!1);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyHLCBarsStyle(e,t,s,i){t.barColor=i.childs().hlcBarsStyle.childs().color.value()}_findBar(e,t,s){return s?s.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,s){if(s&&s.previousValue)return s.previousValue;const i=this._series.bars().search(e-1,n.PlotRowSearchMode.NearestLeft,4);return null!==i?i.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,s,i){const o=this._findBar(e,t,s);if(i){return this._findPrevBar(e,t,s)[4]<=o[4]}return o[1]<=o[4]}}},271747:(e,t,s)=>{"use strict";s.d(t,{SeriesAreaPaneView:()=>a});var i=s(534328),o=s(300562),r=s(708162),n=s(23076),l=s(705912);class a extends l.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),s=t.transparency.value(),l={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,i.generateColor)(t.color1.value(),s),color2:(0,i.generateColor)(t.color2.value(),s),skipHoles:!0},a=new r.CompositeRenderer;return a.append(new o.PaneRendererArea(l)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new n.SelectionRenderer(this._selectionData)),a}}},5253:(e,t,s)=>{"use strict";s.d(t,{SeriesBarsPaneView:()=>l});var i=s(708162),o=s(23076),r=s(512898),n=s(652695);class l extends r.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},s=new i.CompositeRenderer;return s.append(new n.PaneRendererBars(t)),
this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&s.append(new o.SelectionRenderer(this._selectionData)),s}_createItem(e,t,s){const i={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:s.barColor,left:NaN,right:NaN,timePointIndex:e};return(0,r.baseBarCandlesUpdater)(t,i)?i:null}}},340104:(e,t,s)=>{"use strict";s.d(t,{SeriesBaselinePaneView:()=>b});var i=s(534328),o=s(708162),r=s(86441),n=s(5531),l=s(204652),a=s(65840),c=s(660439),u=s(820807),h=s(731974);class d extends u.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:s,bottomLineWidth:i}=this._data,o=(0,a.interactionTolerance)().series+(s+i)/4,n=(0,c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),u=Math.max(1,n-1),d=Math.min(t.length-1,n+1);for(let s=u;s<=d;++s){const i=t[s-1],n=t[s],{distance:a}=(0,l.distanceToSegment)((0,r.point)(i.center,i.y),(0,r.point)(n.center,n.y),(0,r.point)(e.x,e.y));if(a<=o)return new h.HitTestResult(h.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:s,bottom:i,bottomFillColor1:o,bottomFillColor2:l,topFillColor1:c,topFillColor2:u,topLineColor:h,bottomLineColor:d,topLineWidth:_,bottomLineWidth:p}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===t)return!1;let s=e.length-1;for(;s>t&&!(0,a.coordinateIsValid)(e[s].y);)s--;return!(t>s)}(t))return;const b=e.context,{topItems:v,bottomItems:m}=function(e,t){const s=[],i=[];let o=null;for(let l=0;l<e.length;l++){let c=e[l];const u=e[l+1]||{};if((0,a.coordinateIsValid)(c.y))c.y<=t&&s.push(c),c.y>=t&&i.push(c),o=c;else{if(null===o)continue;c=o}if((0,a.coordinateIsValid)(u.y)&&(c.y>t&&u.y<t||c.y<t&&u.y>t))if(Math.abs(c.center-u.center)<1){const e={center:c.center,y:t};s.push(e),i.push(e)}else{const e=(0,n.intersectLineSegments)((0,r.point)(c.center,c.y),(0,r.point)(u.center,u.y),(0,r.point)(c.center,t),(0,r.point)(u.center,t));if(null!==e){const t={center:c.center+(u.center-c.center)*e,y:c.y+(u.y-c.y)*e};s.push(t),i.push(t)}}}return{topItems:s,bottomItems:i}}(t,s);b.lineCap="round",b.lineJoin="round",0!==v.length&&(b.beginPath(),b.moveTo(v[0].center,s),this._makeLine(b,v,!0,0),b.closePath(),b.fillStyle=this._makeLinearGradient(b,c,u,s-i,s),b.fill(),b.beginPath(),this._makeLine(b,v,!1,0),b.lineWidth=_,b.strokeStyle=h,b.stroke()),0!==m.length&&(b.beginPath(),b.moveTo(m[0].center,s),this._makeLine(b,m,!0,1),b.closePath(),b.fillStyle=this._makeLinearGradient(b,o,l,s,s+i),b.fill(),b.beginPath(),this._makeLine(b,m,!1,1),b.lineWidth=p,b.strokeStyle=d,b.stroke())}_makeLine(e,t,s,i){if(null===this._data)return;const o=t.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===o)return;const{barSpacing:r,baseLevelCoordinate:n}=this._data,l=.25*r;let c;const u=t.length;for(let r=o;r<u;r++){const u=t[r],h=t[r+1]||{};if((0,a.coordinateIsValid)(u.y)){if(0===i){if(c&&c.y>=n&&u.y>=n){e.moveTo(u.center,u.y);continue}
}else if(c&&c.y<=n&&u.y<=n){e.moveTo(u.center,u.y);continue}if(c&&(0,a.coordinateIsValid)(c.y))e.lineTo(u.center,u.y),s&&!(0,a.coordinateIsValid)(h.y)&&e.lineTo(u.center,n);else if(h&&(0,a.coordinateIsValid)(h.y))s?(r!==o&&e.lineTo(u.center,n),e.lineTo(u.center,u.y)):e.moveTo(u.center,u.y);else if(s){if(0===r)continue;r!==o&&e.lineTo(u.center-l,n),e.lineTo(u.center-l,u.y),e.lineTo(u.center+l,u.y),e.lineTo(u.center+l,n)}else e.moveTo(u.center-l,u.y),e.lineTo(u.center+l,u.y);c=u}}}_makeLinearGradient(e,t,s,i,o){const r=e.createLinearGradient(0,i,0,o);return r.addColorStop(0,t),r.addColorStop(1,s),r}}var _=s(23076),p=s(705912);class b extends p.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new d,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new o.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new _.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),s=t.transparency.value();this._topFillColor1=(0,i.generateColor)(t.topFillColor1.value(),s),this._topFillColor2=(0,i.generateColor)(t.topFillColor2.value(),s),this._bottomFillColor1=(0,i.generateColor)(t.bottomFillColor1.value(),s),this._bottomFillColor2=(0,i.generateColor)(t.bottomFillColor2.value(),s),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},973592:(e,t,s)=>{"use strict";s.d(t,{SeriesWaterlinePaneView:()=>l});var i=s(121181),o=s(765935),r=s(731974),n=s(257145);class l extends i.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:o.PaneCursorType.VerticalResize,activeItem:0,areaName:r.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new r.HitTestResult(r.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=n.LINESTYLE_SPARSE_DOTTED}_updateImpl(){
const{baseLevelPercentage:e,paneHeight:t,color:s}=this._getters,i=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(i/100)),this._lineRendererData.color=s()}}},616332:(e,t,s)=>{"use strict";s.d(t,{SeriesCandlesPaneView:()=>a});var i=s(708162),o=s(65840),r=s(23076),n=s(512898),l=s(149836);class a extends n.SeriesBarCandlesPaneView{constructor(e,t,s=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=s}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs(),s=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),n=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:n,bodyVisible:s.drawBody.value(),borderVisible:s.drawBorder.value(),borderColor:s.borderColor.value(),wickColor:s.wickColor.value(),barWidth:(0,o.optimalBarWidth)(n),wickVisible:s.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new i.CompositeRenderer;return c.append(new l.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new r.SelectionRenderer(this._selectionData)),c}_createItem(e,t,s){const i={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:s.barColor,borderColor:s.barBorderColor,wickColor:s.barWickColor,hollow:s.isBarHollow};return(0,n.baseBarCandlesUpdater)(t,i)?i:null}}},351018:(e,t,s)=>{"use strict";s.d(t,{SeriesColumnsPaneView:()=>_});var i=s(650151),o=s(86441),r=s(931924),n=s(569708),l=s(731974),a=s(708162),c=s(584785),u=s(975022),h=s(23076),d=s(564079);s(316250);class _{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new u.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new a.CompositeRenderer;return t.append(new d.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new h.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const r=this._source.nearestIndex(s.firstBar(),c.PlotRowSearchMode.NearestRight),a=this._source.nearestIndex(s.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===r||void 0===a)return;const u=this._source.barColorer(),h={},d=this._source.barFunction();for(const{index:e,value:t}of this._source.bars().rangeIterator(r,a)){const s=d(t);if(!(0,n.default)(s))continue;h.value=t;let i=this._source.precomputedBarStyle(t)
;void 0===i&&(i=u.barStyle(e,!1,h),this._source.setPrecomputedBarStyle(t,i)),this._items.push({timePointIndex:e,left:NaN,center:NaN,right:NaN,y:s,style:i}),h.previousValue=t}const _=this._source.firstValue();if(null===_)return;t.pointsArrayToCoordinates(this._items,_),e.fillBarBorders(this._items);this._source.properties().childs().columnStyle.childs().baselinePosition?.value();if(this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const s=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:l.HitTarget.Regular};const r=(0,i.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=l.HitTarget.Regular;for(let i=0;i<s.length;i++){const n=s[i],l=this._source.bars().valueAt(n);if(null===l)continue;const a=d(l),c=e.indexToCoordinate(n),u=t.priceToCoordinate(a,_);this._selectionData.points.push({point:new o.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/r))}}else this._selectionIndexer.clear()}}},735922:(e,t,s)=>{"use strict";s.d(t,{SeriesHiLoPaneView:()=>v});var i=s(259332),o=s(837462),r=s(660439),n=s(65840),l=s(731974),a=s(820807);class c extends a.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,n.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,s=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-s)return null;if(e.x>t[t.length-1].center+s)return null;const i=t[(0,r.lowerbound)(t,e.x-s,((e,t)=>e.center<t))];if(e.x<i.center-s||e.x>i.center+s)return null;const o=(0,n.interactionTolerance)().series+this._barWidth/2,a=Math.min(i.high,i.low),c=Math.max(i.high,i.low),u=this._data.fontSize;return a-o-u<=e.y&&e.y<=a+o||c-o<=e.y&&e.y<=c+o+u?new l.HitTestResult(l.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:s,labelColor:i,bars:r,inverted:n,labelsPadding:l}=this._data,a=e.context;a.textAlign="center",a.fillStyle=i,a.font=(0,o.makeFont)(s,t);for(let e=0;e<r.length;++e){const t=r[e],s=Math.round(Math.min(t.high,t.low)),i=Math.round(Math.max(t.high,t.low)),o=Math.round(t.center);a.textBaseline="alphabetic",a.fillText(n?t.lowLabel:t.highLabel,o,s-l),a.textBaseline="top",a.fillText(n?t.highLabel:t.lowLabel,o,i+l)}}}var u=s(708162),h=s(23076),d=s(910282),_=s(688857),p=s(149836),b=s(512898);class v extends b.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new p.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,i.default)(((e,t)=>Math.max(1,(0,r.lowerboundExt)((e=>e+1),null,(s=>{const i=(0,o.makeFont)(s,d.CHART_FONT_FAMILY);return(0,_.measureText)(e,i).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null
;const t=new u.CompositeRenderer,s=this._needLabels(),i=this._source.properties().childs().hiloStyle.childs(),o=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({generateLabels:s,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:i.drawBody.value(),barSpacing:o,borderVisible:i.showBorders.value(),barWidth:(0,n.optimalHiLoWidth)(o),isPriceScaleInverted:e.isInverted()}),t.append(this._candlesRenderer),s){const s=this._calculateLabelFontSize();s&&s>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:o,font:d.CHART_FONT_FAMILY,fontSize:s,labelColor:i.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*s}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new h.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,s,i){const o={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:s.barColor,borderColor:s.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,b.baseBarCandlesUpdater)(t,o))return null;if(o.open=o.high,o.close=o.low,i.generateLabels){const e=i.formatter.format(o.high),t=i.formatter.format(o.low);o.highLabel=e,o.lowLabel=t;const s=(e.length>t.length?e:t).replace(/\d/g,"0");s.length>this._maxLengthLabel.length&&(this._maxLengthLabel=s)}return o}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},517742:(e,t,s)=>{"use strict";s.d(t,{SeriesHLCAreaPaneView:()=>v});var i=s(86441),o=s(650151),r=s(931924),n=s(276780),l=s(975022),a=s(23076),c=s(584785),u=s(65840),h=s(708162),d=s(731974),_=s(919383),p=s(886367);class b extends p.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class v{constructor(e,t){this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._hlcAreaCache=new b,this._highPoints=new p.CachedContainer,this._closePoints=new p.CachedContainer,this._lowPoints=new p.CachedContainer,this._barsBorders=new p.CachedContainer,this._filledAreas=new n.CachedMap,this._renderer=new h.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new l.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){this._renderer.clear();const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return
;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const r=this._source.firstValue();if(null===r)return;const l=this._source.nearestIndex(s.firstBar()-1,c.PlotRowSearchMode.NearestLeft)??s.firstBar()-1,h=this._source.nearestIndex(s.lastBar()+1,c.PlotRowSearchMode.NearestRight)??s.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(l),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let p,b,v;this._source.bars().range(l,h).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const s=this._hlcAreaCache.at(e);s.close=t[4],s.high=t[2],s.low=t[3]}return!1}));const m=new Map,C=l+this._hlcAreaCache.length();for(let e=l;e<C;e++){const t=this._hlcAreaCache.at(e),s=t.close??null,i=t.high??null,o=t.low??null;(null!==s||null!==i||null!==o||Number.isFinite(p)||Number.isFinite(b)||Number.isFinite(v))&&(p=s,b=i,v=o,this._highPoints.push(i),this._closePoints.push(s),this._lowPoints.push(o),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),m.set(e,this._barsBorders.length()-1))}t.pricesArrayToCoordinates(this._highPoints.data(),r,this._highPoints.length()),t.pricesArrayToCoordinates(this._closePoints.data(),r,this._closePoints.length()),t.pricesArrayToCoordinates(this._lowPoints.data(),r,this._lowPoints.length()),e.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const f=this._source.properties().childs().hlcAreaStyle.childs(),S=f.highCloseFillColor.value(),g=f.closeLowFillColor.value(),y=this._filledAreas.get(S)??new n.AreaBackgroundItemsGroup({type:0,color:S}),w=y.newItem()??new n.AreaBackgroundItem;y.push(w),this._filledAreas.set(S,y);const T=this._filledAreas.get(g)??new n.AreaBackgroundItemsGroup({type:0,color:g}),E=T.newItem()??new n.AreaBackgroundItem;T.push(E),this._filledAreas.set(g,T);const P=[],M=[],I=[],k=this._barsBorders.length();for(let e=0;e<k;e++){const t=this._closePoints.at(e),s=this._highPoints.at(e),i=this._lowPoints.at(e),o=this._barsBorders.at(e),r=o.center,n=(0,u.coordinateIsValid)(t),l=(0,u.coordinateIsValid)(s),a=(0,u.coordinateIsValid)(i);n&&l&&a&&(w.addPoints1Point(r,s),w.addPoints2Point(r,t),E.addPoints1Point(r,t),E.addPoints2Point(r,i),P.push({y:s,...o}),M.push({y:t,...o}),I.push({y:i,...o}))}const L=e.barSpacing();if(this._renderer.append(new n.AreaBackgroundRenderer({barSpacing:L,colorAreas:this._filledAreas})),f.lowLineVisible.value()&&this._renderer.append(new _.PaneRendererLine({barSpacing:L,items:I,simpleMode:!0,withMarkers:!1,lineColor:f.lowLineColor.value(),lineStyle:f.lowLineStyle.value(),lineWidth:f.lowLineWidth.value(),skipHoles:!0})),f.highLineVisible.value()&&this._renderer.append(new _.PaneRendererLine({barSpacing:L,items:P,simpleMode:!0,withMarkers:!1,lineColor:f.highLineColor.value(),lineStyle:f.highLineStyle.value(),lineWidth:f.highLineWidth.value(),skipHoles:!0})),this._renderer.append(new _.PaneRendererLine({
barSpacing:L,items:M,simpleMode:!0,withMarkers:!1,lineColor:f.closeLineColor.value(),lineStyle:f.closeLineStyle.value(),lineWidth:f.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const t=this._selectionIndexer.indexes(),s=[],r=[],n=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let e=0;e<t.length;e++){const o=t[e],l=m.get(o);if(void 0===l)continue;const a=this._closePoints.at(l),c=this._barsBorders.at(l).center;s.push({point:new i.Point(c,a)}),r.push(this._model.backgroundColorAtYPercentFromTop(a/n))}this._renderer.append(new a.SelectionRenderer({bgColors:r,points:s,visible:!0,barSpacing:e.barSpacing(),hittestResult:d.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},669110:(e,t,s)=>{"use strict";s.d(t,{SeriesHLCBarsPaneView:()=>l});var i=s(708162),o=s(23076),r=s(652695),n=s(5253);class l extends n.SeriesBarsPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:!0,thinBars:e.hlcBarsStyle.childs().thinBars.value()},s=new i.CompositeRenderer;return s.append(new r.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&s.append(new o.SelectionRenderer(this._selectionData)),s}}},498969:(e,t,s)=>{"use strict";s.d(t,{SeriesHollowCandlesPaneView:()=>a});var i=s(708162),o=s(65840),r=s(23076),n=s(149836),l=s(616332);class a extends l.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),s=this._model.timeScale().barSpacing(),l={bars:this._bars,barSpacing:s,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,o.optimalBarWidth)(s),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},a=new i.CompositeRenderer;return a.append(new n.PaneRendererCandles(l)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new r.SelectionRenderer(this._selectionData)),a}}},316661:(e,t,s)=>{"use strict";s.d(t,{SeriesLinePaneView:()=>u});var i=s(731974),o=s(708162),r=s(919383),n=s(255143),l=s(23076),a=s(705912),c=s(660603);class u extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let s,a=!1;2===t?s=e.lineStyle.childs():14===t?(s=e.lineWithMarkersStyle.childs(),a=!0):15===t?s=e.steplineStyle.childs():18===t&&(s=e.tpoStyle.childs());const u=this._model.timeScale().barSpacing(),h=s.colorType?.value()!==c.ColorType.Gradient?{type:c.ColorType.Solid,color:s.color.value()}:{type:c.ColorType.Gradient,startColor:s.gradientStartColor.value(),endColor:s.gradientEndColor.value()},d={barSpacing:u,items:this._items,lineColor:h,lineStyle:s.linestyle.value(),
withMarkers:a,lineWidth:s.linewidth.value(),simpleMode:!0,hitTestResult:i.HitTarget.Regular,skipHoles:!0};let _,p;if(_=15===t?new n.PaneRendererStepLine(d):new r.PaneRendererLine(d),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new o.CompositeRenderer;e.append(_),e.append(new l.SelectionRenderer(this._selectionData)),p=e}else p=_;return p}}},512898:(e,t,s)=>{"use strict";s.d(t,{SeriesBarCandlesPaneView:()=>u,baseBarCandlesUpdater:()=>c});var i=s(86441),o=s(931924),r=s(975022),n=s(584785),l=s(731974);function a(e){return null!=e}function c(e,t){const s=e[1],i=e[2],o=e[3],r=e[4];return!!(a(s)&&a(i)&&a(o)&&a(r))&&(t.open=s,t.high=i,t.low=o,t.close=r,!0)}class u{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,o.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new r.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),s=this._source.priceScale();if(this._bars=[],t.isEmpty()||!s||s.isEmpty())return;const o=t.visibleBarsStrictRange();if(null===o)return;if(0===this._source.bars().size())return;let r=this._source.nearestIndex(o.firstBar(),n.PlotRowSearchMode.NearestRight);const a=this._source.nearestIndex(o.lastBar(),n.PlotRowSearchMode.NearestLeft);if(void 0===r||void 0===a)return;for(;r<=a;r++){if(null!==this._source.bars().valueAt(r))break}if(r>a)return;const c=this._source.bars().range(r,a),u=this._source.barColorer(),h={};if(c.each(((t,s)=>{h.value=s;const i=u.firstColoredBar(t);let o;null!==i&&i>=t?this._source.setPrecomputedBarStyle(s,void 0):o=this._source.precomputedBarStyle(s),void 0===o&&(o=u.barStyle(t,!1,h),this._source.setPrecomputedBarStyle(s,o));const r=this._createItem(t,s,o,e);return!!r&&(h.previousValue=s,this._bars.push(r),!1)})),0===this._bars.length)return;const d=this._source.firstValue();if(null!==d)if(s.barPricesToCoordinates(this._bars,d),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:l.HitTarget.Regular,barSpacing:t.barSpacing()};const o=this._model.paneForSource(this._source);if(!o)return;const r=o.height();for(let o=0;o<e.length;o++){const n=e[o],l=this._source.bars().valueAt(n);if(null===l)continue;const a=l[1],c=l[4];if(null==a||null==c)continue;const u=.5*(a+c),h=t.indexToCoordinate(n),_=s.priceToCoordinate(u,d);this._selectionData.points.push({point:new i.Point(h,_)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(_/r))}}else this._selectionIndexer.clear()}}},705912:(e,t,s)=>{"use strict";s.d(t,{SeriesSingleLinePaneView:()=>h});var i=s(569708),o=s(86441),r=s(650151),n=s(931924),l=s(975022),a=s(584785),c=s(731974),u=s(660439);class h{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,n.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,
this._model=t,this._selectionIndexer=new l.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const s=e.visibleBarsStrictRange();if(null===s)return;if(0===this._source.bars().size())return;const n=this._source.nearestIndex(s.firstBar()-1,a.PlotRowSearchMode.NearestLeft)??s.firstBar()-1,l=this._source.nearestIndex(s.lastBar()+1,a.PlotRowSearchMode.NearestRight)??s.lastBar()+1,h=this._source.barFunction(),d=this._model.timeScale().barSpacing();if(d<.1&&this._source.supportsConflatedChunks()){const e=this._source.conflatedChunks(d,(0,r.ensureNotNull)(this._source.priceSource())),t=(0,u.lowerbound)(e,n,((e,t)=>e.startTime<t)),s=Math.min(e.length-1,(0,u.lowerbound)(e,l,((e,t)=>e.endTime<t)));for(let i=t;i<=s;i++){const t=e[i];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,y:e,left:NaN,center:NaN,right:NaN})}))}}else for(const{index:e,value:t}of this._source.bars().rangeIterator(n,l)){const s=h(t);(0,i.default)(s)&&this._items.push({timePointIndex:e,y:s,left:NaN,center:NaN,right:NaN})}const _=this._source.firstValue();if(null!==_)if(t.pointsArrayToCoordinates(this._items,_),e.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const s=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:c.HitTarget.Regular};const i=(0,r.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let r=0;r<s.length;r++){const n=s[r],l=this._source.bars().valueAt(n);if(null===l)continue;const a=h(l),c=e.indexToCoordinate(n),u=t.priceToCoordinate(a,_);this._selectionData.points.push({point:new o.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/i))}}else this._selectionIndexer.clear();else this._items=[]}}},176749:(e,t,s)=>{"use strict";s.d(t,{SeriesValuesProvider:()=>P,calculateColor:()=>T,changesData:()=>E});var i=s(650151),o=s(150335),r=s(724377),n=s(444372),l=s(638456),a=s(534328),c=s(969680),u=s(584785),h=s(87913),d=s(951827),_=s(889858);function p(e,t){return 100*(t-e)/Math.abs(e||1)}var b=s(909954),v=s(529751),m=s(634969),C=s(830101);const f=C.lastDayChangeAvailable||C.alwaysShowLastPriceAndLastDayChange,S=l.CheckMobile.any(),g=(0,d.getPercentageFormatter)(),y=(0,d.getVolumeFormatter)(2),w=`${m.notAvailable} (${m.notAvailable}%)`;function T(e,t){const s=(0,r.parseRgb)(t),i=(0,r.parseRgb)(e);return(0,r.distanceRgb)(s,i)<70?(0,r.rgbToHexString)((0,r.invertRgb)(s)):t}function E(e,t,s,i,o){let r,n;if(null!==t){const e=o[4],s=t.change||0;n={change:s,currentPrice:e,prevPrice:e-s,percentChange:t.change_percent||0}}const l=s[4],a=e.search(i-1,u.PlotRowSearchMode.NearestLeft,1),c=a?.value[4]??null;return null!==c&&null!=l&&(r={change:l-c,currentPrice:l,prevPrice:c,percentChange:p(c,l)}),{barChange:r,lastDayChange:n}}class P{constructor(e,t){this._series=e,
this._model=t,this._emptyValues=[{title:n.t(null,void 0,s(16610)),visible:!1,value:"",index:0,id:""},{title:n.t(null,void 0,s(778254)),visible:!1,value:"",index:1,id:""},{title:n.t(null,void 0,s(165318)),visible:!1,value:"",index:2,id:""},{title:n.t(null,{context:"input"},s(51408)),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:n.t(null,void 0,s(537276)),visible:!1,value:"",index:6,id:""},{title:n.t(null,{context:"study"},s(424261)),visible:!1,value:"",index:7,id:""},{title:n.t(null,void 0,s(463815)),visible:!1,value:"",index:8,id:""}]}getItems(){return this._emptyValues}getValues(e){const t=this._showLastPriceAndChangeOnly(),s=this._emptyValues.map(((e,s)=>({...e,value:6===s||8===s?w:m.notAvailable,visible:5!==s&&4!==s&&!t})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return s;const r=(0,i.ensureNotNull)(this._series.data().bars().last());(0,o.isNumber)(e)||(e=r.index);const n=this._series.nearestIndex(e,u.PlotRowSearchMode.NearestLeft);if(void 0===n)return s;const l=this._series.data().valueAt(n),h=this._model.backgroundTopColor().value();if(null===l)return s;const d=l[1],_=l[2],p=l[3],v=l[4],{barChange:C,lastDayChange:S}=E(this._series.data(),this._series.quotes(),l,n,r.value),P=(0,b.getPriceValueFormatterForSource)(this._series);if((0,b.shouldBeFormattedAsPercent)(this._series)||(0,b.shouldBeFormattedAsIndexedTo100)(this._series))s[6].value="",s[8].value="";else{const e=this._series.formatter(),t={signPositive:!0};if(void 0!==C){const{currentPrice:i,prevPrice:o,change:r,percentChange:n}=C,l=e.formatChange?.(i,o,t)??e.format(r,t);s[6].value=(0,c.forceLTRStr)(`${l} (${g.format(n,t)})`)}if(void 0!==S){const{currentPrice:i,prevPrice:o,change:r,percentChange:n}=S,l=e.formatChange?.(i,o,t)??e.format(r,t);s[8].value=(0,c.forceLTRStr)(`${l} (${g.format(n,t)})`)}}let M=null;if(t)s[5].value=null==v?m.notAvailable:P(v),s[5].visible=!0,M=this._getChangeColor(S?.change,r.index),s[6].visible=void 0!==C,s[8].visible=void 0!==S||f;else{s[0].value=null==d?m.notAvailable:P(d),s[1].value=null==_?m.notAvailable:P(_),s[2].value=null==p?m.notAvailable:P(p),s[3].value=null==v?m.notAvailable:P(v),s[4].value=P(this._series.barFunction()(l));const e=l[5];(0,o.isNumber)(e)?s[7].value=y.format(e):s[7].visible=!1;const t=this._series.intervalObj().value().is1Tick(),i=21!==this._series.style();s[0].visible=!t&&i,s[1].visible=!t,s[2].visible=!t,s[8].visible=void 0!==S||f,s[6].visible=void 0!==C;const r=this._series.barColorer().barStyle(n,!1);M=T(h,r.barBorderColor??r.barColor)}M=(0,a.resetTransparency)(T(h,M));for(const e of s)e.color||(e.color=M);return s[8].visible&&(s[8].color=(0,a.resetTransparency)(T(h,this._getChangeColor(S?.change,r.index)))),s}_mobileNonTrackingMode(){return S&&(null===this._model.crosshairSource().pane||(0,v.isLineToolName)(h.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){
return C.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e,t){const s=this._series.style();if(2===s||15===s||14===s)return this._series.barColorer().barStyle(t,!1).barColor;const i=void 0===e||e>=0?_.SeriesBarColorer.upColor(this._series.properties()):_.SeriesBarColorer.downColor(this._series.properties());return i.barBorderColor??i.barColor}}},808825:(e,t,s)=>{"use strict";var i;s.d(t,{StudyStatusType:()=>i}),function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(i||(i={}))},885935:(e,t,s)=>{"use strict";s.d(t,{TpoSummaryDataSource:()=>r,tpoSummaryDataSourceId:()=>o});var i=s(470416);const o="_seriesTpoSummaryId";class r extends i.PriceDataSource{constructor(e){super(e,o)}barColorer(){return null}formatter(e){return this._model.mainSeries().formatter(e)}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}currency(){return this._model.mainSeries().currency()}unit(){return this._model.mainSeries().unit()}onStatusChanged(){return this._model.mainSeries().onStatusChanged()}symbolSource(){return this._model.mainSeries().symbolSource()}barsProvider(){return this._model.mainSeries().barsProvider()}valuesProvider(){return this._model.mainSeries().valuesProvider()}legendValuesProvider(){return this._model.mainSeries().legendValuesProvider()}statusProvider(e){return this._model.mainSeries().statusProvider(e)}name(){return"TPO Summary"}paneViews(e){return this._model.mainSeries().paneViews(e)}updateAllViews(e){this._model.mainSeries().updateAllViews(e)}widgetSideAreaViews(e){return this._model.mainSeries().widgetSideAreaViews?.(e)??null}properties(){return this._model.mainSeries().properties()}hasStateForAlert(){return!1}allowsMovingBetweenPanes(){return!1}isUserDeletable(){return!1}state(){return{id:this.id(),type:"TpoSummaryDataSource",zorder:this.zorder()}}canBeHidden(){return!1}isDraggable(){return!1}contextMenuStatName(){return"TpoSummaryContextMenu"}}},315507:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},85290:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);