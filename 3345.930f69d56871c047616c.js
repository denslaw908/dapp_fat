(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3345,68984,67653],{646021:t=>{t.exports={"common-tooltip":"common-tooltip-EJBD96zX","common-tooltip--hidden":"common-tooltip--hidden-EJBD96zX","common-tooltip--horizontal":"common-tooltip--horizontal-EJBD96zX","common-tooltip--farther":"common-tooltip--farther-EJBD96zX","common-tooltip--vertical":"common-tooltip--vertical-EJBD96zX","common-tooltip-farther":"common-tooltip-farther-EJBD96zX","common-tooltip--direction_normal":"common-tooltip--direction_normal-EJBD96zX","common-tooltip__body":"common-tooltip__body-EJBD96zX","common-tooltip__button-container":"common-tooltip__button-container-EJBD96zX","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-EJBD96zX","common-tooltip__button":"common-tooltip__button-EJBD96zX","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-EJBD96zX","common-tooltip__ear-holder":"common-tooltip__ear-holder-EJBD96zX","common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-EJBD96zX","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-EJBD96zX","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-EJBD96zX","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-EJBD96zX","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-EJBD96zX","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-EJBD96zX","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-EJBD96zX","common-tooltip__body--no-padding":"common-tooltip__body--no-padding-EJBD96zX","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-EJBD96zX","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-EJBD96zX","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-EJBD96zX","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-EJBD96zX","common-tooltip__plus-sign":"common-tooltip__plus-sign-EJBD96zX"}},764250:(t,e,o)=>{"use strict";o.d(e,{ActionGroup:()=>s});class i{constructor(t,e){this._group=t;const{hotkey:o,handler:i,desc:s,isDisabled:n,element:r=null,isRepeatAccepted:a=!1}=e;this.hotkey=o,this.handler=i,this.desc=s,this.element=r,this.isRepeatAccepted=a,this.isDisabled=n?"function"==typeof n?n:()=>!0:()=>!1}destroy(){this._group&&(this._group.remove(this),this._group=null)}}class s{constructor(t,e){this._actions=new Map,this._manager=t,this.order=e?.order??0,this.modal=!(!e||!e.modal),e&&(this.desc=e.desc),e&&e.isDisabled?"function"==typeof e.isDisabled?this.isDisabled=e.isDisabled:this.isDisabled=()=>!0:this.isDisabled=()=>!1,this._manager.registerGroup(this)}add(t){let e=this._actions.get(t.hotkey);e||(e=[],this._actions.set(t.hotkey,e));const o=new i(this,t);return e.push(o),o}remove(t){const e=this._actions.get(t.hotkey);if(!e)return;const o=e.findIndex((e=>e===t));o>=0&&(1===e.length?this._actions.delete(t.hotkey):e.splice(o,1))}handleHotkey(t,e){const o=this._actions.get(t);if(!o)return!1
;for(const i of o)if((!i.element||e.target&&i.element.contains(e.target))&&!i.isDisabled(e))return e.repeat&&!i.isRepeatAccepted||(i.handler(e),this._callMatchedHotkeyHandler(t)),e.preventDefault(),!0;return!1}promote(){this._manager.promoteGroup(this)}destroy(){for(const[,t]of this._actions)for(const e of t)e.destroy();this._actions.clear(),this._manager.unregisterGroup(this)}static setMatchedHotkeyHandler(t){s._matchedHotkeyHandler=t}_callMatchedHotkeyHandler(t){s._matchedHotkeyHandler&&s._matchedHotkeyHandler(t)}}},163586:(t,e,o)=>{"use strict";o.d(e,{ActionManager:()=>l});var i=o(158942),s=o(591800),n=o(607423);class r{constructor(t,e){this.modifiers=t,this.code=e}altOrOptionCode(){return"AltLeft"===this.code||"AltRight"===this.code}controlOrMetaCode(){return s.isMacKeyboard?"MetaLeft"===this.code||"MetaRight"===this.code||"OSLeft"===this.code||"OSRight"===this.code:"ControlLeft"===this.code||"ControlRight"===this.code}}class a extends i.WatchedValue{setValue(t,e){const o=this.value();(e||void 0===o||o.code!==t.code||o.modifiers!==t.modifiers)&&super.setValue(t)}}class l{constructor(){this._groups=[],this._pressedKeys=new i.WatchedValue(0),this._keyboardPressedKeysState=new a(new r(0)),this._keyDownListener=t=>{if(t.defaultPrevented)return;const e=(0,s.hashFromEvent)(t);if(this._pressedKeys.setValue(e),this._keyboardPressedKeysState.setValue(new r((0,s.modifiersFromEvent)(t),t.code)),!(0,n.isNativeUIInteraction)(e,t.target))for(let o=this._groups.length;o-- >0;){const i=this._groups[o];if(!i.isDisabled()){if(i.handleHotkey(e,t))return;if(i.modal)return}}},this._keyUpListener=t=>{const e=(0,s.hashFromEvent)(t);this._pressedKeys.setValue(e),this._keyboardPressedKeysState.setValue(new r((0,s.modifiersFromEvent)(t),""))},this._blurEvent=()=>{this._pressedKeys.setValue(0),this._keyboardPressedKeysState.setValue(new r(0,""))},this._mouseEvent=t=>{const e=(0,s.modifiersFromEvent)(t),o=255&(this._pressedKeys.value()??0);this._pressedKeys.setValue(e|o)}}listen(t){t.addEventListener("keydown",this._keyDownListener),t.addEventListener("keyup",this._keyUpListener),t.addEventListener("blur",this._blurEvent),t.addEventListener("mousemove",this._mouseEvent)}unlisten(t){t.removeEventListener("keydown",this._keyDownListener),t.removeEventListener("keyup",this._keyUpListener),t.removeEventListener("blur",this._blurEvent),t.removeEventListener("mousemove",this._mouseEvent)}registerGroup(t){this._groups.push(t),this.sortGroups()}unregisterGroup(t){for(let e=this._groups.length;e--;)this._groups[e]===t&&this._groups.splice(e,1)}promoteGroup(t){const e=this._getModalOrderEpoch(),o=h(t,e);let i=this._groups.findIndex((t=>h(t,e)===o)),s=0;for(;i<this._groups.length&&h(this._groups[i],e)===o;){const n=this._groups[i];n===t?s=1:h(n,e)===o&&(this._groups[i-s]=n),i++}this._groups[i-s]=t}pressedKeys(){return this._pressedKeys.readonly()}keyboardPressedKeysState(){return this._keyboardPressedKeysState.readonly()}sortGroups(){const t=this._getModalOrderEpoch();this._groups.sort(((e,o)=>h(o,t)-h(e,t)))}_getMinOrder(){
return this._groups.reduce(((t,e)=>Math.min(t,e.order)),0)}_getModalOrderEpoch(){return-2*(Math.abs(this._getMinOrder())-1)}}function h(t,e){return t.order+(t.modal?e:0)}},499994:(t,e,o)=>{"use strict";o.d(e,{getTooltipData:()=>s,setTooltipData:()=>n});const i=new WeakMap;function s(t,e){const o=i.get(t);return o instanceof Function?o(e):o&&o[e]}function n(t,e,o){if(o instanceof Function)return void i.set(t,o);const s=i.get(t),n=void 0===s||s instanceof Function?{}:s;n[e]=o,i.set(t,n)}},471802:(t,e,o)=>{"use strict";o.d(e,{getDataFromTarget:()=>p,getTooltip:()=>y,hideTooltip:()=>w,setStyle:()=>b,showTooltip:()=>g,updateTooltipTextFromTarget:()=>_});var i=o(650151),s=o(760863),n=o(969680),r=(o(142492),o(982528)),a=o(982367),l=o(638456);const h={default:"",white:"theme-white",chart:"theme-chart","round-shadow":"theme-round-shadow"},d=Object.keys(h);var c=o(499994),u=o(604286),m=o(646021);function _(t){const e=t.hasAttribute("data-tooltip")?t.getAttribute("data-tooltip"):t.getAttribute("title");return e&&((0,c.setTooltipData)(t,"text",e),t.removeAttribute("title")),(0,c.getTooltipData)(t,"text")||""}function p(t){const e=_(t),o=t.getBoundingClientRect(),i={h:o.height,w:o.width,x:o.left,y:o.top},s=t.getAttribute("data-color-theme")||"",n=t.classList.contains("common-tooltip-html"),r=parseInt(t.getAttribute("data-tooltip-delay")||""),a=parseInt(t.getAttribute("data-tooltip-debounce")||"");let l={type:"none"};return e&&(l={type:n?"html":"text",data:e}),{above:t.classList.contains("common-tooltip-above"),below:t.classList.contains("common-tooltip-below"),otl:t.classList.contains("common-tooltip-otl"),otr:t.classList.contains("common-tooltip-otr"),vertical:t.classList.contains("common-tooltip-vertical"),hotkey:t.getAttribute("data-tooltip-hotkey"),narrow:t.classList.contains("common-tooltip-narrow"),wide:t.classList.contains("common-tooltip-wide"),colorTheme:s,tooltipDelay:r,tooltipDebounce:a,rect:i,content:l,target:t}}function y(t){const e=(0,i.ensureNotNull)(k).cloneNode(!0),o=D(e),{content:s}=t;switch(s.type){case"element":o.innerHTML="",o.appendChild(s.data);break;case"html":o.innerHTML=s.data;break;case"text":if(t.hotkey){const t=(0,i.ensureNotNull)(W).cloneNode(!0);t.innerText=s.data,o.appendChild(t)}else o.innerText=s.data}if(t.hotkey){const e="none"!==s.type,n=(0,i.ensureNotNull)(L).cloneNode(!0),r=(0,u.hotKeyDeserialize)(t.hotkey),a=r.keys.map((t=>`<span class="${m["common-tooltip__hotkey-button"]}">${t}</span>`));n.innerHTML=function(t,e){const o=/{\d}|{hotkey_\d}/gi;return t.replace(o,(t=>{const o=Number(t.match(/\d/));return e[o]}))}(r.text,a).replace(/\s\+\s/g,`<span class="${m["common-tooltip__plus-sign"]}">+</span>`),o.classList.add(m["common-tooltip__body--with-hotkey"]),e&&n.classList.add(m["common-tooltip__hotkey-block--divider"]),o.appendChild(n)}return e.addEventListener("contextmenu",r.preventDefault),e}function b(t,e){const o=e.rect;if(!o)return;!function(t,e){const o=d.includes(e)?h[e]:"";t.classList.remove(...d.map((t=>h[t])).filter((t=>!!t))),o&&!t.classList.contains(o)&&t.classList.add(o)
}(t,e.colorTheme||"default"),e.addClass&&t.classList.add(e.addClass);const i=D(t),s=t.querySelector(`.${m["common-tooltip__button-container"]}`);i.classList.toggle(m["common-tooltip__body--width_wide"],Boolean(e.wide)),i.classList.toggle(m["common-tooltip__body--no-padding"],Boolean(e.noPadding)),i.classList.toggle(m["common-tooltip__body--width_narrow"],Boolean(e.narrow)),i.classList.toggle(m["common-tooltip__body--no-buttons"],!0),i.style.left=S(0),i.style.width=S(i.clientWidth+(Boolean(e.noPadding)?0:2));const r=document.body.clientWidth,c=l.CheckMobile.iOS()||l.CheckMobile.Android()||(0,l.supportTouch)()&&(0,l.isMac)()?window.innerHeight:document.body.clientHeight,u=e.vertical,_=e.extendMargin||u&&o.w<20||!u&&o.h<20;t.classList.toggle(m["common-tooltip--farther"],_),t.classList.toggle(m["common-tooltip--vertical"],u),t.classList.toggle(m["common-tooltip--horizontal"],!u);const p=function(t){return t.querySelector(`.${m["common-tooltip__ear-holder"]}`)}(t),y=t.offsetHeight;if(u){const l=10,h=c-10,d=12,u=l+d,_=h-d,b=(0,a.clamp)(o.y+o.h/2,u,_)-y/2,g=b+y;t.style.left=S(o.x+o.w),t.style.top=S(b),b<l?i.style.top=s.style.top=S(l-b):g>h&&(i.style.top=s.style.top=S(h-g));const{right:w}=(t.querySelector(":last-child")||i).getBoundingClientRect(),v=w+10>r;t.classList.toggle(m["common-tooltip--direction_reversed"],v),t.classList.toggle(m["common-tooltip--direction_normal"],!v);let f=v?"after":"before";(0,n.isRtl)()?(f=e.otr?"after":f,f=e.otl?"before":f):(f=e.otr?"before":f,f=e.otl?"after":f),p.classList.toggle(m["common-tooltip__ear-holder--before"],"before"===f),p.classList.toggle(m["common-tooltip__ear-holder--after"],"after"===f),"after"===f&&(t.style.left="auto",t.style.right=S(r-o.x))}else{const n=o.x-(i.offsetWidth-o.w)/2,a=r-t.offsetWidth-20<=0?(r-t.offsetWidth)/2:10,l=r-a-t.offsetWidth,h=Math.max(a,Math.min(n,l));t.style.left=S(h);const d=l<n;t.classList.toggle(m["common-tooltip--direction_reversed"],d),t.classList.toggle(m["common-tooltip--direction_normal"],!d);const u=function(t,e,o,i){if(t.above)return I(e,i)?"above":"below";if(t.below)return function(t,e,o){return o.y+o.h+e+10<t}(e,o,i)?"below":"above";return I(o,i)?"above":"below"}(e,c,y,o);"above"===u?t.style.bottom=S(c-o.y):t.style.top=S(o.y+o.h),p.classList.add("above"===u?m["common-tooltip__ear-holder--above"]:m["common-tooltip__ear-holder--below"]);const{left:_}=i.getBoundingClientRect();let b=Math.trunc(o.x+o.w/2-(_+i.clientWidth/2));t.style.left=S(h+b),t.style.width=S(i.clientWidth+s.clientWidth),b=d?Math.max(0,b):Math.min(0,b),s.style.left=S(-b),i.style.left=S(-b)}}function g(t){t.classList.toggle(m["common-tooltip--hidden"],!1)}function w(t){t.classList.toggle(m["common-tooltip--hidden"],!0)}function S(t){return`${Math.floor(t)}px`}
const v=`\n\t<div id="common-tooltip-wrapper" class="${m["common-tooltip"]}">\n\t\t<div class="${m["common-tooltip__ear-holder"]}" >\n\t\t\t<div class="${m["common-tooltip__body"]} js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="${m["common-tooltip__button-container"]}"></div>\n\t</div>\n`,f=`\n\t<div class="${m["common-tooltip__hotkey-block"]}"></div>\n`,C=`\n\t<div class="${m["common-tooltip__hotkey-text"]}"></div>\n`,k=(0,s.parseHtmlElement)(v),L=(0,s.parseHtmlElement)(f),W=(0,s.parseHtmlElement)(C);function D(t){return t.querySelector(`.${m["common-tooltip__body"]}`)}function I(t,e){return 10+t<e.y}},630112:(t,e,o)=>{"use strict";o.d(e,{empty:()=>r,setTooltip:()=>a});const i="tooltip-root-element";let s;function n(){const t=document.getElementById(i);t?s=t:(s=document.createElement("div"),s.id=i,document.body.appendChild(s))}function r(){s&&(s.innerHTML="")}function a(t){r(),s||n(),s.appendChild(t)}"interactive"===document.readyState?n():document.addEventListener("DOMContentLoaded",n)},112539:(t,e,o)=>{"use strict";o.d(e,{clearSchedule:()=>r,scheduleHide:()=>l,scheduleRemove:()=>a,scheduleRender:()=>h});let i=0,s=0,n=0;function r(){clearTimeout(i),clearTimeout(s),clearTimeout(n)}function a(t,e){n=setTimeout(t,e)}function l(t,e){s=setTimeout(t,e)}function h(t,e){i=setTimeout(t,e)}},31214:(t,e,o)=>{"use strict";o.d(e,{reloginOrGoPro:()=>h,runOrGoPro:()=>l,runOrGoProWithoutSync:()=>a});var i=o(526225),s=o(707934),n=o(456335),r=o(678708);function a(t,e,o,i){(0,n.featureCheck)(e,i)?t():(0,s.createGoProDialog)({...o,runOrGoproWithFeatureCheckOptions:{featureCheck:()=>(0,n.featureCheck)(e,i),signInSuccess:t}})}async function l(t,e,o,s={}){const n=window.is_authenticated;window.is_authenticated&&window.user.is_pro&&await(0,i.syncUserData)("gopro"),n===window.is_authenticated?a(t,e,o,s):(0,r.showSignModal)({source:o.goproSource,feature:o.feature,signinSuccess:t})}async function h(t){const e=window.is_authenticated;window.is_authenticated&&window.user.is_pro&&await(0,i.syncUserData)("gopro"),e===window.is_authenticated?(0,s.createGoProDialog)(t):(0,r.showSignModal)({source:t.goproSource,feature:t.feature})}},167653:(t,e,o)=>{"use strict";o.d(e,{linking:()=>g});var i=o(290484),s=o(650151),n=o(820028),r=(o(931924),o(477786)),a=o(388741),l=o(735566),h=o(62802),d=o(588948),c=o(17957),u=o(388130),m=o(776734);var _=o(296538),p=o(912445);const y=(0,l.getLogger)("Linking");class b{constructor(t,e,o){this.watchedSymbol=new n.WatchedValue,this.seriesShortSymbol=new n.WatchedValue,this.proSymbol=new n.WatchedValue,this.ensuredProSymbol=new n.WatchedValue,this.watchedInterval=new n.WatchedValue,this.watchedIntraday=new n.WatchedValue,this.watchedSeconds=new n.WatchedValue,this.watchedTicks=new n.WatchedValue,this.watchedDataFrequencyResolution=new n.WatchedValue,this.watchedRange=new n.WatchedValue,this.watchedSupportedResolutions=new n.WatchedValue,this.watchedSupportedChartStyles=new n.WatchedValue,this.symbolNamesList=new n.WatchedValue,this._chartWidgetCollection=null,this._chartWidgetBindingState=0,
this._activeChartWidget=null,this._linkingGroupCharts=null,this._boundChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._setGroupSymbolCancellationToken={cancelled:!1},this._muted=!1,this.updateBoundChartWidget=()=>{const t=this._chartToBind();t!==this._boundChartWidget&&(null===t?this.unbindFromChartWidget():this.bindToChartWidget(t))},this._updateAllGroupChartWidgets=()=>{this._destroySymbolIntervalPropertySubscriptions?.();const t=(0,s.ensureNotNull)(this._linkingGroupCharts).value(),e=[],o=[];for(const i of t){const t=i.symbolWV().spawn(),s=i.resolutionWV().spawn();t.subscribe(this._updateSymbolByProperty.bind(this,i)),s.subscribe(this._updateIntervalByProperty.bind(this,i)),e.push(t),o.push(s)}this._destroySymbolIntervalPropertySubscriptions=()=>{e.forEach((t=>t.destroy())),o.forEach((t=>t.destroy())),this._destroySymbolIntervalPropertySubscriptions=void 0};const i=this.watchedSymbol.value();t.length>1&&this._needApplySymbol(i)&&!this._muted&&this._setGroupSymbol(i);const n=this.watchedInterval.value();t.length>1&&this._needApplyInterval(n)&&!this._muted&&this._setGroupInterval(n),this.updateBoundChartWidget()},this._groupIndex=t;const i=(t,e)=>{t.subscribe((t=>{o()===this&&e.setValue(t)}),{callWithLast:!0})};i(this.watchedSymbol,e.watchedSymbol),i(this.seriesShortSymbol,e.seriesShortSymbol),i(this.proSymbol,e.proSymbol),i(this.ensuredProSymbol,e.ensuredProSymbol),i(this.watchedInterval,e.watchedInterval),i(this.watchedIntraday,e.watchedIntraday),i(this.watchedSeconds,e.watchedSeconds),i(this.watchedTicks,e.watchedTicks),i(this.watchedDataFrequencyResolution,e.watchedDataFrequencyResolution),i(this.watchedRange,e.watchedRange),i(this.watchedSupportedResolutions,e.watchedSupportedResolutions),i(this.watchedSupportedChartStyles,e.watchedSupportedChartStyles),i(this.symbolNamesList,e.symbolNamesList),this.watchedSymbol.subscribe((t=>{this._boundChartWidget&&this._boundChartWidget.hasModel()&&this.mainSeries().symbolSameAsCurrent(t)||this.proSymbol.setValue(t)}),{callWithLast:!0})}mute(t){this._muted=t}bindToChartWidgetCollection(t){this.unbindFromChartWidgetCollection(),this._chartWidgetCollection=t,this._activeChartWidget=t.activeChartWidget.spawn(),this._activeChartWidget.subscribe(this.updateBoundChartWidget),this._linkingGroupCharts=t.linkingGroupsCharts(this._groupIndex).spawn(),this._linkingGroupCharts.subscribe(this._updateAllGroupChartWidgets),this.updateBoundChartWidget(),this._updateAllGroupChartWidgets()}unbindFromChartWidgetCollection(){this.unbindFromChartWidget(),this._chartWidgetCollection=null,this._activeChartWidget?.destroy(),this._activeChartWidget=null,this._linkingGroupCharts?.destroy(),this._linkingGroupCharts=null,this._destroySymbolIntervalPropertySubscriptions?.()}bindToChartWidget(t){if(this.unbindFromChartWidget(),this._boundChartWidget=t,t.hasModel())return void this._onChartModelCreated(t.model());t.modelCreated().subscribe(this,this._onChartModelCreated,!0),
this._chartWidgetBindingState=1;const e=t.mainSeriesProperties().childs();this.watchedSymbol.setValue(e.symbol.value()),this.watchedInterval.setValue(e.interval.value()),this._boundChartWidget.linkingGroupIndex().subscribe(this.updateBoundChartWidget)}unbindFromChartWidget(){const t=this._boundChartWidget;if(null!==t){switch(this._chartWidgetBindingState){case 1:t.modelCreated().unsubscribeAll(this);break;case 2:this.watchedSymbol.unsubscribe(this._watchedSymbolListenerBound);const e=this.mainSeries().dataEvents();e.symbolResolved().unsubscribeAll(this),e.symbolError().unsubscribeAll(this),this.mainSeries().onIntervalChanged().unsubscribeAll(this),this.watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this.watchedSymbol.writeLock}t.linkingGroupIndex().unsubscribe(this.updateBoundChartWidget),this._boundChartWidget=null,this._chartWidgetBindingState=0}}boundChartWidget(){return this._boundChartWidget}mainSeries(){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");return this._boundChartWidget.model().mainSeries()}_watchedSymbolListener(t){this._needApplySymbol(t)&&!this._muted&&this._setGroupSymbol(t)}_updateSymbolByProperty(t,e){const o=this._symbolLock();o&&this._needApplySymbol(e)&&!this._muted&&this._setGroupSymbol(e),(o||t===this._boundChartWidget)&&this.watchedSymbol.setValue(e)}_watchedIntervalListener(t){const e=r.Interval.normalize(t);e&&this._needApplyInterval(e)&&!this._muted&&this._setGroupInterval(e)}_updateIntervalByProperty(t,e){const o=this._intervalLock(),i=r.Interval.normalize(e);o&&i&&this._needApplyInterval(i)&&!this._muted&&this._setGroupInterval(i),(o||t===this._boundChartWidget)&&this.watchedInterval.setValue(i??e)}_updateSeriesSymbolInfo(){this.seriesShortSymbol.setValue((0,s.ensureNotNull)(this._boundChartWidget).getSymbol(!0));const t=this.mainSeries().symbolInfo();if(t){const e=t.pro_name||!1;this.proSymbol.setValue(e||this.watchedSymbol.value()),this.ensuredProSymbol.setValue(this.proSymbol.value()),t.aliases&&this.symbolNamesList.setValue(t.aliases);let o=(0,_.allChartStyles)();((0,a.isCloseBasedSymbol)(t)||this.mainSeries().intervalObj().value().is1Tick())&&(o=o.filter((t=>(0,a.isSingleValueBasedStyle)(t)))),this.watchedSupportedChartStyles.setValue(o),this.watchedIntraday.setValue(!!t.has_intraday),this.watchedSeconds.setValue(!!t.has_seconds),this.watchedTicks.setValue(!(0,a.isCloseBasedSymbol)(t)&&!!t["is-tickbars-available"]),this.watchedRange.setValue(!(0,a.isCloseBasedSymbol)(t));const i=t.data_frequency?t.data_frequency:void 0;this.watchedDataFrequencyResolution.setValue(i)}else this.watchedIntraday.setValue(!1),this.watchedSeconds.setValue(!1),this.watchedTicks.setValue(!1),this.watchedRange.setValue(!1),this.mainSeries().isFailed()&&this.ensuredProSymbol.setValue(this.proSymbol.value())}_onChartModelCreated(t){if(!this._boundChartWidget)throw new Error("ChartWidget is undefined");this._chartWidgetBindingState=2,this.watchedSymbol.setValue(this._boundChartWidget.symbolWV().value()),
this.watchedSymbol.subscribe(this._watchedSymbolListenerBound);const e=t.mainSeries().dataEvents();e.symbolResolved().subscribe(this,this._updateSeriesSymbolInfo),e.symbolError().subscribe(this,this._updateSeriesSymbolInfo),t.mainSeries().onIntervalChanged().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),this.watchedInterval.setValue(this._boundChartWidget.resolutionWV().value()),this.watchedInterval.subscribe(this._watchedIntervalListenerBound),this._boundChartWidget.readOnly()&&(this.watchedSymbol.writeLock=!0)}_chartToBind(){const t=this._chartWidgetCollection;return null===t?null:t.activeChartWidget.value().linkingGroupIndex().value()===this._groupIndex?t.activeChartWidget.value():null!==this._boundChartWidget&&this._boundChartWidget.linkingGroupIndex().value()===this._groupIndex?this._boundChartWidget:t.getAll().find((t=>t.linkingGroupIndex().value()===this._groupIndex))??null}_symbolLock(){return!!this._chartWidgetCollection?.lock.symbol.value()}_intervalLock(){return!!this._chartWidgetCollection?.lock.interval.value()}_chartsForLock(t){return(0===t?this._symbolLock():this._intervalLock())?(0,s.ensureNotNull)(this._linkingGroupCharts).value():this._boundChartWidget?[this._boundChartWidget]:[]}_setGroupSymbol(t){this.mute(!0),this._setGroupSymbolCancellationToken.cancelled=!0;const e=this._setGroupSymbolCancellationToken={cancelled:!1};(0,s.ensureNotNull)(this._chartWidgetCollection).setSymbol(t,this._groupIndex,(0,s.ensureNotNull)(this._boundChartWidget)).finally((()=>{if(this._boundChartWidget&&!e.cancelled){const e=this._boundChartWidget.model().mainSeries();e.symbolSameAsCurrent(t)||(this.watchedSymbol.setValue(e.symbol()),this.proSymbol.setValue(e.proSymbol()))}})),this.mute(!1)}_needApplySymbol(t){const e=this._chartsForLock(0),o=e.find((e=>e.hasModel()&&e.model().mainSeries().symbolInfo()&&e.model().mainSeries().symbolSameAsResolved(t)));if(o){const t=o.model().mainSeries();if(e.every((e=>t.symbolSameAsResolved(e.symbolWV().value()))))return!1}return e.some((e=>e.symbolWV().value()!==t))}_setGroupInterval(t){this.mute(!0),(0,s.ensureNotNull)(this._chartWidgetCollection).setResolution(t,this._groupIndex).finally((()=>{if(this._boundChartWidget){const e=this._boundChartWidget.resolutionWV().value();r.Interval.isEqual(e,t)||this.watchedInterval.setValue(e)}})),this.mute(!1)}_needApplyInterval(t){return this._chartsForLock(1).some((e=>!r.Interval.isEqual(e.resolutionWV().value(),t)))}}const g=new class{constructor(){this._watchedSymbol=new n.WatchedValue,this._seriesShortSymbol=new n.WatchedValue,this._proSymbol=new n.WatchedValue,this._ensuredProSymbol=new n.WatchedValue,this._watchedInterval=new n.WatchedValue,this._watchedIntraday=new n.WatchedValue,this._watchedSeconds=new n.WatchedValue,this._watchedTicks=new n.WatchedValue,this._watchedDataFrequencyResolution=new n.WatchedValue,this._watchedRange=new n.WatchedValue,this._watchedSupportedResolutions=new n.WatchedValue,this._watchedSupportedChartStyles=new n.WatchedValue([]),this._symbolNamesList=new n.WatchedValue,
this._chartWidgetCollection=null,this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._searchChartsLoadDebounced=null,this._selfEmit=!1,this._preventFeedBySymbol=!1,this._feedBySymbolDebounceCounter=0,this._linkingGroups=new Map,this._activeLinkingGroup=new n.WatchedValue,this._activeLinkingGroupIndex=null,this._updateLinkingGroups=()=>{(0,s.ensureNotNull)(this._chartWidgetCollection).allLinkingGroups().value().forEach((t=>this._linkingGroup(t))),this._linkingGroups.forEach((t=>t.updateBoundChartWidget()))},this._activeLinkingGroup.setValue(this._linkingGroup(null));const t=(t,e)=>{t.subscribe((t=>e().setValue(t)),{callWithLast:!0})};t(this._watchedSymbol,(()=>this._activeLinkingGroup.value().watchedSymbol)),t(this._seriesShortSymbol,(()=>this._activeLinkingGroup.value().seriesShortSymbol)),t(this._proSymbol,(()=>this._activeLinkingGroup.value().proSymbol)),t(this._ensuredProSymbol,(()=>this._activeLinkingGroup.value().ensuredProSymbol)),t(this._watchedInterval,(()=>this._activeLinkingGroup.value().watchedInterval)),t(this._watchedIntraday,(()=>this._activeLinkingGroup.value().watchedIntraday)),t(this._watchedSeconds,(()=>this._activeLinkingGroup.value().watchedSeconds)),t(this._watchedTicks,(()=>this._activeLinkingGroup.value().watchedTicks)),t(this._watchedDataFrequencyResolution,(()=>this._activeLinkingGroup.value().watchedDataFrequencyResolution)),t(this._watchedRange,(()=>this._activeLinkingGroup.value().watchedRange)),t(this._watchedSupportedResolutions,(()=>this._activeLinkingGroup.value().watchedSupportedResolutions)),t(this._watchedSupportedChartStyles,(()=>this._activeLinkingGroup.value().watchedSupportedChartStyles)),t(this._symbolNamesList,(()=>this._activeLinkingGroup.value().symbolNamesList));const e=t=>{this._watchedSymbol.setValue(t.watchedSymbol.value()),this._seriesShortSymbol.setValue(t.seriesShortSymbol.value()),this._proSymbol.setValue(t.proSymbol.value()),this._ensuredProSymbol.setValue(t.ensuredProSymbol.value()),this._watchedInterval.setValue(t.watchedInterval.value()),this._watchedIntraday.setValue(t.watchedIntraday.value()),this._watchedSeconds.setValue(t.watchedSeconds.value()),this._watchedTicks.setValue(t.watchedTicks.value()),this._watchedDataFrequencyResolution.setValue(t.watchedDataFrequencyResolution.value()),this._watchedRange.setValue(t.watchedRange.value()),this._watchedSupportedResolutions.setValue(t.watchedSupportedResolutions.value()),this._watchedSupportedChartStyles.setValue(t.watchedSupportedChartStyles.value()),this._symbolNamesList.setValue(t.symbolNamesList.value())};this._activeLinkingGroup.subscribe(e),e(this._activeLinkingGroup.value()),(0,p.setMuteLinkingGroup)(((t,e)=>{this._linkingGroup(t).mute(e)}))}get symbol(){return this._watchedSymbol}get proSymbol(){return this._proSymbol.readonly()}get ensuredProSymbol(){return this._ensuredProSymbol.readonly()}get symbolNamesList(){return this._symbolNamesList.readonly()}get seriesShortSymbol(){return this._seriesShortSymbol.readonly()}get interval(){return this._watchedInterval}get intraday(){
return this._watchedIntraday.readonly()}get seconds(){return this._watchedSeconds.readonly()}get ticks(){return this._watchedTicks.readonly()}get range(){return this._watchedRange.readonly()}get supportedResolutions(){return this._watchedSupportedResolutions.readonly()}get supportedChartStyles(){return this._watchedSupportedChartStyles.readonly()}get preventFeedBySymbol(){return this._preventFeedBySymbol}get dataFrequencyResolution(){return this._watchedDataFrequencyResolution.readonly()}activeLinkingGroup(){return this._activeLinkingGroup.readonly()}getChartWidget(){return this.activeLinkingGroup().value().boundChartWidget()}bindToChartWidgetCollection(t){this._chartWidgetCollection?.onAboutToBeDestroyed.unsubscribeAll(this),this._unbindFromChartWidgetCollection(),this._chartWidgetCollection=t,this._chartWidgetCollection.onAboutToBeDestroyed.subscribe(this,this._unbindFromChartWidgetCollection),this._chartWidgetCollection.allLinkingGroups().subscribe(this._updateLinkingGroups),this._updateLinkingGroups(),this._activeLinkingGroupIndex=t.activeLinkingGroup().spawn(),this._activeLinkingGroupIndex.subscribe((t=>{this._activeLinkingGroup.setValue(this._linkingGroup(t))}),{callWithLast:!0}),this._linkingGroups.forEach((e=>e.bindToChartWidgetCollection(t)))}bindToSearchCharts(t){this.unbindFromSearchCharts(),this._searchCharts=t,t.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),t.loadingSymbol.subscribe((t=>{!1===t&&(this._feedBySymbolDebounceCounter=0)})),this._watchedSymbol.subscribe(this._onSymbolLinkBound)}unbindFromSearchCharts(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)}setPreventFeedBySymbol(t){this._preventFeedBySymbol=t}setSymbolAndLogInitiator(t,e,o,i=!1){var s,n,r,a;(this.symbol.value()!==t||o)&&(y.logInfo(`Change linking symbol to ${t}, initiator: ${e}`),this.symbol.setValue(t,o),i||null===this._chartWidgetCollection||(s=this.activeLinkingGroup().value().mainSeries(),n=this._chartWidgetCollection.layout.value(),r=this._chartWidgetCollection.metaInfo.uid.value()||"",a=e,window.user.do_not_track||s.symbolResolvingActive().subscribe((t=>{if(t)return;const e=s.symbolInfo();e&&(0,m.getTracker)().then((t=>{null!==t&&t.trackChartSymbols({symbolName:e.pro_name,symbolType:e.type,layoutType:n,chartId:r,openSource:a,platform:(0,c.getPlatform)(),isExpert:window.user.declared_status===u.UserStatus.Pro})}))}),{once:!0})))}_onSearchBySymbol(t){if(!t.resolved_symbol)throw new Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(t.resolved_symbol),this._selfEmit=!1}_onSymbolLink(t){if(!this._selfEmit){if(!this._searchCharts){const t="No search charts defined";throw y.logError(t),new Error(t)}this._preventFeedBySymbol||this._loadSearchCharts(t)}}_loadSearchCharts(t){if(!this._searchCharts){const t="No search charts defined";throw y.logError(t),new Error(t)}
if(this._searchChartsLoadDebounced)return void(this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced(t)));const e=t=>this._searchCharts?(!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,i.default)(e,2e3),this._searchChartsLoadDebounced(t)):this._searchChartsLoadDebounced=null,this._searchCharts.feedBySymbol.call(this._searchCharts,t)):()=>{};!0===this._searchCharts.loadingSymbol.value()?this._feedBySymbolDebounceCounter<100&&(this._feedBySymbolDebounceCounter++,this._searchChartsLoadDebounced=(0,i.default)(e,2e3),this._searchChartsLoadDebounced(t)):this._searchCharts.feedBySymbol(t)}_linkingGroup(t){let e=this._linkingGroups.get(t);if(void 0===e){const o={watchedSymbol:this._watchedSymbol,seriesShortSymbol:this._seriesShortSymbol,proSymbol:this._proSymbol,ensuredProSymbol:this._ensuredProSymbol,watchedInterval:this._watchedInterval,watchedIntraday:this._watchedIntraday,watchedSeconds:this._watchedSeconds,watchedTicks:this._watchedTicks,watchedDataFrequencyResolution:this._watchedDataFrequencyResolution,watchedRange:this._watchedRange,watchedSupportedResolutions:this._watchedSupportedResolutions,watchedSupportedChartStyles:this._watchedSupportedChartStyles,symbolNamesList:this._symbolNamesList};e=new b(t,o,(()=>this._activeLinkingGroup.value())),this._linkingGroups.set(t,e),this._chartWidgetCollection&&e.bindToChartWidgetCollection(this._chartWidgetCollection)}return e}_unbindFromChartWidgetCollection(){null!==this._chartWidgetCollection&&(this._activeLinkingGroupIndex?.destroy(),this._activeLinkingGroupIndex=null,this._linkingGroups.forEach((t=>t.unbindFromChartWidgetCollection())),this._chartWidgetCollection.allLinkingGroups().unsubscribe(this._updateLinkingGroups),this._chartWidgetCollection=null)}};{const t=(0,d.getFreshInitData)().symbolInfo,e=t?t.pro_symbol:h.getValue("editchart.model.symbol",window.DEFAULT_SYMBOL);g.setSymbolAndLogInitiator(e,"initial data",!1,!0)}window.TradingViewApi||(window.TradingViewApi={linking:g})},912445:(t,e,o)=>{"use strict";let i;function s(t,e){i?.(t,e)}function n(t){i=t}o.d(e,{muteLinkingGroup:()=>s,setMuteLinkingGroup:()=>n})},776734:(t,e,o)=>{"use strict";async function i(){if(!window.user||window.user.do_not_track)return null;{const t=(await Promise.all([o.e(73034),o.e(69374),o.e(24081)]).then(o.bind(o,823623))).getTrackerInstance();return t||null}}o.d(e,{getTracker:()=>i})},61499:(t,e,o)=>{"use strict";var i;o.d(e,{StdTheme:()=>i}),function(t){t.Light="light",t.Dark="dark"}(i||(i={}))},224743:(t,e,o)=>{"use strict";o.d(e,{globalCloseDelegate:()=>i,globalCloseMenu:()=>s});const i=new(o(547465).Delegate);function s(){i.fire()}},296538:(t,e,o)=>{"use strict";o.d(e,{allChartStyles:()=>n});var i=o(931924);const s=(0,o(638456).onWidget)();function n(){return function(){const t=[0,1,9,13,2,14,15,3,16,10];return t.push(12),s||t.push(17),s||t.push(18),s||t.push(20),s||t.push(19),t}().concat(function(){const t=[8]
;return i.enabled("japanese_chart_styles")&&(t.push(4,7,5,6),t.push(11)),t}())}},388130:(t,e,o)=>{"use strict";o.d(e,{DAYS_UNTIL_BLOCK:()=>n,UserStatus:()=>i,getDaysUntilBlock:()=>r,isUserLockedOut:()=>a});var i,s=o(336669);!function(t){t.NonPro="non_pro",t.Pro="pro"}(i||(i={}));const n=7,r=(0,s.memoize)((()=>{const t=window.user.declared_status_timestamp;if(!t)return null;const e=((new Date).getTime()-new Date(1e3*t).getTime())/1e3/24/60/60;return n-Math.floor(e)})),a=(0,s.memoize)((t=>{const e=t??r();return Boolean(null!==e&&e<=0)}))},17957:(t,e,o)=>{"use strict";o.d(e,{getPlatform:()=>n});var i=o(314802),s=o(638456);function n(){return(0,s.isDesktopApp)()?"desktop":(0,i.isOnMobileAppPage)("old")?"ios":(0,i.isOnMobileAppPage)("new")?"android":"web"}},357173:(t,e,o)=>{"use strict";o.d(e,{getProPlanDetailsForUser:()=>u,getProPlanWeight:()=>a,isExpertFeature:()=>c});var i=o(778016),s=o(232759),n=o(803912),r=o(958178);function a(t){return window.pro?"free"===t?-1:window.pro.getProduct((0,s.getProductForTrial)(t)).upgrade_weight:0}function l(t){return window.pro?window.pro.getProduct((0,s.getProductForTrial)(t)).upgrade_weight:0}function h(t){return function(t){return t.sort(((t,e)=>a(t)-a(e)))}((0,i.getProPlansWithFeature)(t).filter((t=>!(0,s.isTrialProduct)(t))))[0]||null}function d(t){return function(t){return t.sort(((t,e)=>l(t)-l(e)))}((0,i.getExpertPlansWithFeature)(t))[0]||null}function c(t){const e=d(t),o=h(t);return Boolean(e)&&!Boolean(o)}async function u(){const t=await(0,n.fetch)("/pro-plans/profile/"),e=await t.json();if(t.ok)return e;if(403===t.status){const o=e;throw new r.ApiError(o.detail,t.status,o.code)}throw new Error(`Unable to handle unexpected response: ${String(t.text())}`)}},16241:(t,e,o)=>{"use strict";function i(t){return t+"…"}o.d(e,{appendEllipsis:()=>i})},336669:(t,e,o)=>{"use strict";function i(t,e){const o=new Map;return function(...i){const s=""+(e?e.apply(null,i):i[0]);if(!o.has(s)){const e=t.apply(this,i);return o.set(s,e),e}return o.get(s)}}o.d(e,{memoize:()=>i})},982528:(t,e,o)=>{"use strict";function i(t){t.preventDefault()}o.d(e,{preventDefault:()=>i,preventDefaultForContextMenu:()=>n});const s=["input:not([type])",'input[type="text"]','input[type="email"]','input[type="password"]','input[type="search"]','input[type="number"]','input[type="url"]',"textarea","a[href]",'*[contenteditable="true"]',"[data-allow-context-menu]"];function n(t){const e=t.target;e&&!e.closest(s.join(", "))&&t.preventDefault()}}}]);